(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Wy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Oc={exports:{}},Bo={},Mc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function Qy(){if(Zf)return Te;Zf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),V=Symbol.iterator;function U(N){return N===null||typeof N!="object"?null:(N=V&&N[V]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,X={};function H(N,j,le){this.props=N,this.context=j,this.refs=X,this.updater=le||b}H.prototype.isReactComponent={},H.prototype.setState=function(N,j){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,j,"setState")},H.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ee(){}ee.prototype=H.prototype;function ae(N,j,le){this.props=N,this.context=j,this.refs=X,this.updater=le||b}var ue=ae.prototype=new ee;ue.constructor=ae,Y(ue,H.prototype),ue.isPureReactComponent=!0;var Ee=Array.isArray,Je=Object.prototype.hasOwnProperty,De={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(N,j,le){var ve,we={},Ce=null,Le=null;if(j!=null)for(ve in j.ref!==void 0&&(Le=j.ref),j.key!==void 0&&(Ce=""+j.key),j)Je.call(j,ve)&&!k.hasOwnProperty(ve)&&(we[ve]=j[ve]);var Oe=arguments.length-2;if(Oe===1)we.children=le;else if(1<Oe){for(var Be=Array(Oe),pt=0;pt<Oe;pt++)Be[pt]=arguments[pt+2];we.children=Be}if(N&&N.defaultProps)for(ve in Oe=N.defaultProps,Oe)we[ve]===void 0&&(we[ve]=Oe[ve]);return{$$typeof:i,type:N,key:Ce,ref:Le,props:we,_owner:De.current}}function A(N,j){return{$$typeof:i,type:N.type,key:j,ref:N.ref,props:N.props,_owner:N._owner}}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function D(N){var j={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(le){return j[le]})}var x=/\/+/g;function I(N,j){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):j.toString(36)}function Ze(N,j,le,ve,we){var Ce=typeof N;(Ce==="undefined"||Ce==="boolean")&&(N=null);var Le=!1;if(N===null)Le=!0;else switch(Ce){case"string":case"number":Le=!0;break;case"object":switch(N.$$typeof){case i:case e:Le=!0}}if(Le)return Le=N,we=we(Le),N=ve===""?"."+I(Le,0):ve,Ee(we)?(le="",N!=null&&(le=N.replace(x,"$&/")+"/"),Ze(we,j,le,"",function(pt){return pt})):we!=null&&(P(we)&&(we=A(we,le+(!we.key||Le&&Le.key===we.key?"":(""+we.key).replace(x,"$&/")+"/")+N)),j.push(we)),1;if(Le=0,ve=ve===""?".":ve+":",Ee(N))for(var Oe=0;Oe<N.length;Oe++){Ce=N[Oe];var Be=ve+I(Ce,Oe);Le+=Ze(Ce,j,le,Be,we)}else if(Be=U(N),typeof Be=="function")for(N=Be.call(N),Oe=0;!(Ce=N.next()).done;)Ce=Ce.value,Be=ve+I(Ce,Oe++),Le+=Ze(Ce,j,le,Be,we);else if(Ce==="object")throw j=String(N),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ct(N,j,le){if(N==null)return N;var ve=[],we=0;return Ze(N,ve,"","",function(Ce){return j.call(le,Ce,we++)}),ve}function Pt(N){if(N._status===-1){var j=N._result;j=j(),j.then(function(le){(N._status===0||N._status===-1)&&(N._status=1,N._result=le)},function(le){(N._status===0||N._status===-1)&&(N._status=2,N._result=le)}),N._status===-1&&(N._status=0,N._result=j)}if(N._status===1)return N._result.default;throw N._result}var Ue={current:null},J={transition:null},ce={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:J,ReactCurrentOwner:De};function te(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Ct,forEach:function(N,j,le){Ct(N,function(){j.apply(this,arguments)},le)},count:function(N){var j=0;return Ct(N,function(){j++}),j},toArray:function(N){return Ct(N,function(j){return j})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Te.Component=H,Te.Fragment=n,Te.Profiler=a,Te.PureComponent=ae,Te.StrictMode=s,Te.Suspense=_,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Te.act=te,Te.cloneElement=function(N,j,le){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ve=Y({},N.props),we=N.key,Ce=N.ref,Le=N._owner;if(j!=null){if(j.ref!==void 0&&(Ce=j.ref,Le=De.current),j.key!==void 0&&(we=""+j.key),N.type&&N.type.defaultProps)var Oe=N.type.defaultProps;for(Be in j)Je.call(j,Be)&&!k.hasOwnProperty(Be)&&(ve[Be]=j[Be]===void 0&&Oe!==void 0?Oe[Be]:j[Be])}var Be=arguments.length-2;if(Be===1)ve.children=le;else if(1<Be){Oe=Array(Be);for(var pt=0;pt<Be;pt++)Oe[pt]=arguments[pt+2];ve.children=Oe}return{$$typeof:i,type:N.type,key:we,ref:Ce,props:ve,_owner:Le}},Te.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Te.createElement=T,Te.createFactory=function(N){var j=T.bind(null,N);return j.type=N,j},Te.createRef=function(){return{current:null}},Te.forwardRef=function(N){return{$$typeof:m,render:N}},Te.isValidElement=P,Te.lazy=function(N){return{$$typeof:S,_payload:{_status:-1,_result:N},_init:Pt}},Te.memo=function(N,j){return{$$typeof:E,type:N,compare:j===void 0?null:j}},Te.startTransition=function(N){var j=J.transition;J.transition={};try{N()}finally{J.transition=j}},Te.unstable_act=te,Te.useCallback=function(N,j){return Ue.current.useCallback(N,j)},Te.useContext=function(N){return Ue.current.useContext(N)},Te.useDebugValue=function(){},Te.useDeferredValue=function(N){return Ue.current.useDeferredValue(N)},Te.useEffect=function(N,j){return Ue.current.useEffect(N,j)},Te.useId=function(){return Ue.current.useId()},Te.useImperativeHandle=function(N,j,le){return Ue.current.useImperativeHandle(N,j,le)},Te.useInsertionEffect=function(N,j){return Ue.current.useInsertionEffect(N,j)},Te.useLayoutEffect=function(N,j){return Ue.current.useLayoutEffect(N,j)},Te.useMemo=function(N,j){return Ue.current.useMemo(N,j)},Te.useReducer=function(N,j,le){return Ue.current.useReducer(N,j,le)},Te.useRef=function(N){return Ue.current.useRef(N)},Te.useState=function(N){return Ue.current.useState(N)},Te.useSyncExternalStore=function(N,j,le){return Ue.current.useSyncExternalStore(N,j,le)},Te.useTransition=function(){return Ue.current.useTransition()},Te.version="18.3.1",Te}var ep;function mh(){return ep||(ep=1,Mc.exports=Qy()),Mc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Ky(){if(tp)return Bo;tp=1;var i=mh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,_,E){var S,V={},U=null,b=null;E!==void 0&&(U=""+E),_.key!==void 0&&(U=""+_.key),_.ref!==void 0&&(b=_.ref);for(S in _)s.call(_,S)&&!c.hasOwnProperty(S)&&(V[S]=_[S]);if(m&&m.defaultProps)for(S in _=m.defaultProps,_)V[S]===void 0&&(V[S]=_[S]);return{$$typeof:e,type:m,key:U,ref:b,props:V,_owner:a.current}}return Bo.Fragment=n,Bo.jsx=d,Bo.jsxs=d,Bo}var np;function Gy(){return np||(np=1,Oc.exports=Ky()),Oc.exports}var Ie=Gy(),Vn=mh(),Il={},Fc={exports:{}},Qt={},Uc={exports:{}},zc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Xy(){return rp||(rp=1,function(i){function e(J,ce){var te=J.length;J.push(ce);e:for(;0<te;){var N=te-1>>>1,j=J[N];if(0<a(j,ce))J[N]=ce,J[te]=j,te=N;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ce=J[0],te=J.pop();if(te!==ce){J[0]=te;e:for(var N=0,j=J.length,le=j>>>1;N<le;){var ve=2*(N+1)-1,we=J[ve],Ce=ve+1,Le=J[Ce];if(0>a(we,te))Ce<j&&0>a(Le,we)?(J[N]=Le,J[Ce]=te,N=Ce):(J[N]=we,J[ve]=te,N=ve);else if(Ce<j&&0>a(Le,te))J[N]=Le,J[Ce]=te,N=Ce;else break e}}return ce}function a(J,ce){var te=J.sortIndex-ce.sortIndex;return te!==0?te:J.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var _=[],E=[],S=1,V=null,U=3,b=!1,Y=!1,X=!1,H=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(J){for(var ce=n(E);ce!==null;){if(ce.callback===null)s(E);else if(ce.startTime<=J)s(E),ce.sortIndex=ce.expirationTime,e(_,ce);else break;ce=n(E)}}function Ee(J){if(X=!1,ue(J),!Y)if(n(_)!==null)Y=!0,Pt(Je);else{var ce=n(E);ce!==null&&Ue(Ee,ce.startTime-J)}}function Je(J,ce){Y=!1,X&&(X=!1,ee(T),T=-1),b=!0;var te=U;try{for(ue(ce),V=n(_);V!==null&&(!(V.expirationTime>ce)||J&&!D());){var N=V.callback;if(typeof N=="function"){V.callback=null,U=V.priorityLevel;var j=N(V.expirationTime<=ce);ce=i.unstable_now(),typeof j=="function"?V.callback=j:V===n(_)&&s(_),ue(ce)}else s(_);V=n(_)}if(V!==null)var le=!0;else{var ve=n(E);ve!==null&&Ue(Ee,ve.startTime-ce),le=!1}return le}finally{V=null,U=te,b=!1}}var De=!1,k=null,T=-1,A=5,P=-1;function D(){return!(i.unstable_now()-P<A)}function x(){if(k!==null){var J=i.unstable_now();P=J;var ce=!0;try{ce=k(!0,J)}finally{ce?I():(De=!1,k=null)}}else De=!1}var I;if(typeof ae=="function")I=function(){ae(x)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Ct=Ze.port2;Ze.port1.onmessage=x,I=function(){Ct.postMessage(null)}}else I=function(){H(x,0)};function Pt(J){k=J,De||(De=!0,I())}function Ue(J,ce){T=H(function(){J(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){Y||b||(Y=!0,Pt(Je))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return U},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(J){switch(U){case 1:case 2:case 3:var ce=3;break;default:ce=U}var te=U;U=ce;try{return J()}finally{U=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=U;U=J;try{return ce()}finally{U=te}},i.unstable_scheduleCallback=function(J,ce,te){var N=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?N+te:N):te=N,J){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=te+j,J={id:S++,callback:ce,priorityLevel:J,startTime:te,expirationTime:j,sortIndex:-1},te>N?(J.sortIndex=te,e(E,J),n(_)===null&&J===n(E)&&(X?(ee(T),T=-1):X=!0,Ue(Ee,te-N))):(J.sortIndex=j,e(_,J),Y||b||(Y=!0,Pt(Je))),J},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(J){var ce=U;return function(){var te=U;U=ce;try{return J.apply(this,arguments)}finally{U=te}}}}(zc)),zc}var ip;function Yy(){return ip||(ip=1,Uc.exports=Xy()),Uc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Jy(){if(sp)return Qt;sp=1;var i=mh(),e=Yy();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},V={};function U(t){return _.call(V,t)?!0:_.call(S,t)?!1:E.test(t)?V[t]=!0:(S[t]=!0,!1)}function b(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y(t,r,o,u){if(r===null||typeof r>"u"||b(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];H[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function ae(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ee,ae);H[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ee,ae);H[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ee,ae);H[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function ue(t,r,o,u){var h=H.hasOwnProperty(r)?H[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Y(r,o,h,u)&&(o=null),u||h===null?U(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ee=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),De=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),J=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,N;function j(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var le=!1;function ve(t,r){if(!t||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){u=F}t.call(r.prototype)}else{try{throw Error()}catch(F){u=F}t()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,w=p.length-1;1<=y&&0<=w&&h[y]!==p[w];)w--;for(;1<=y&&0<=w;y--,w--)if(h[y]!==p[w]){if(y!==1||w!==1)do if(y--,w--,0>w||h[y]!==p[w]){var R=`
`+h[y].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=y&&0<=w);break}}}finally{le=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?j(t):""}function we(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function Ce(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case De:return"Portal";case A:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case x:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ct:return r=t.displayName||null,r!==null?r:Ce(t.type)||"Memo";case Pt:r=t._payload,t=t._init;try{return Ce(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Kn(t){t._valueTracker||(t._valueTracker=pt(t))}function xi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function mr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xr(t,r){var o=r.checked;return te({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Li(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Oe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Hs(t,r){r=r.checked,r!=null&&ue(t,"checked",r,!1)}function Ws(t,r){Hs(t,r);var o=Oe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Oi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Oi(t,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function la(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Oi(t,r,o){(r!=="number"||mr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Gn=Array.isArray;function Xn(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Oe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Qs(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Gn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Oe(o)}}function Fi(t,r){var o=Oe(r.value),u=Oe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Ks(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ot(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yn,Gs=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Yn=Yn||document.createElement("div"),Yn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Yn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function gr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jr=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(t){Jr.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Yr[r]=Yr[t]})});function Xs(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Yr.hasOwnProperty(t)&&Yr[t]?(""+r).trim():r+"px"}function Ys(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Xs(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Js=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(t,r){if(r){if(Js[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function eo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function Ui(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zi=null,rn=null,xn=null;function Bi(t){if(t=Ao(t)){if(typeof zi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Ua(r),zi(t.stateNode,t.type,r))}}function Ln(t){rn?xn?xn.push(t):xn=[t]:rn=t}function to(){if(rn){var t=rn,r=xn;if(xn=rn=null,Bi(t),r)for(t=0;t<r.length;t++)Bi(r[t])}}function ei(t,r){return t(r)}function no(){}var Jn=!1;function ro(t,r,o){if(Jn)return t(r,o);Jn=!0;try{return ei(t,r,o)}finally{Jn=!1,(rn!==null||xn!==null)&&(no(),to())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Ua(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ji=!1;if(m)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){ji=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{ji=!1}function ti(t,r,o,u,h,p,y,w,R){var F=Array.prototype.slice.call(arguments,3);try{r.apply(o,F)}catch(q){this.onError(q)}}var ni=!1,bi=null,gn=!1,io=null,uu={onError:function(t){ni=!0,bi=t}};function $i(t,r,o,u,h,p,y,w,R){ni=!1,bi=null,ti.apply(uu,arguments)}function ua(t,r,o,u,h,p,y,w,R){if($i.apply(this,arguments),ni){if(ni){var F=bi;ni=!1,bi=null}else throw Error(n(198));gn||(gn=!0,io=F)}}function yn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ri(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _n(t){if(yn(t)!==t)throw Error(n(188))}function ca(t){var r=t.alternate;if(!r){if(r=yn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return _n(h),t;if(p===u)return _n(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,w=h.child;w;){if(w===o){y=!0,o=h,u=p;break}if(w===u){y=!0,u=h,o=p;break}w=w.sibling}if(!y){for(w=p.child;w;){if(w===o){y=!0,o=p,u=h;break}if(w===u){y=!0,u=p,o=h;break}w=w.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function so(t){return t=ca(t),t!==null?qi(t):null}function qi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=qi(t);if(r!==null)return r;t=t.sibling}return null}var Hi=e.unstable_scheduleCallback,oo=e.unstable_cancelCallback,ha=e.unstable_shouldYield,cu=e.unstable_requestPaint,je=e.unstable_now,da=e.unstable_getCurrentPriorityLevel,ii=e.unstable_ImmediatePriority,yr=e.unstable_UserBlockingPriority,sn=e.unstable_NormalPriority,ao=e.unstable_LowPriority,fa=e.unstable_IdlePriority,si=null,Gt=null;function pa(t){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(si,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:ga,lo=Math.log,ma=Math.LN2;function ga(t){return t>>>=0,t===0?32:31-(lo(t)/ma|0)|0}var Wi=64,Qi=4194304;function _r(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var w=y&~h;w!==0?u=_r(w):(p&=y,p!==0&&(u=_r(p)))}else y=o&~h,y!==0?u=_r(y):p!==0&&(u=_r(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Mt(r),h=1<<o,u|=t[o],r&=~h;return u}function hu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Mt(p),w=1<<y,R=h[y];R===-1?(!(w&o)||w&u)&&(h[y]=hu(w,r)):R<=r&&(t.expiredLanes|=w),p&=~w}}function Xt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ai(){var t=Wi;return Wi<<=1,!(Wi&4194240)&&(Wi=64),t}function vr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Er(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Mt(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Mt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function wr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Mt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ae=0;function Tr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ya,Ki,_a,va,Ea,uo=!1,On=[],Et=null,vn=null,En=null,Ir=new Map,on=new Map,Mn=[],du="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wa(t,r){switch(t){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ir.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":on.delete(r.pointerId)}}function Bt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ao(r),r!==null&&Ki(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function fu(t,r,o,u,h){switch(r){case"focusin":return Et=Bt(Et,t,r,o,u,h),!0;case"dragenter":return vn=Bt(vn,t,r,o,u,h),!0;case"mouseover":return En=Bt(En,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Ir.set(p,Bt(Ir.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,on.set(p,Bt(on.get(p)||null,t,r,o,u,h)),!0}return!1}function Ta(t){var r=di(t.target);if(r!==null){var o=yn(r);if(o!==null){if(r=o.tag,r===13){if(r=ri(o),r!==null){t.blockedOn=r,Ea(t.priority,function(){_a(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function er(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Gi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Zr=u,o.target.dispatchEvent(u),Zr=null}else return r=Ao(o),r!==null&&Ki(r),t.blockedOn=o,!1;r.shift()}return!0}function li(t,r,o){er(t)&&o.delete(r)}function Ia(){uo=!1,Et!==null&&er(Et)&&(Et=null),vn!==null&&er(vn)&&(vn=null),En!==null&&er(En)&&(En=null),Ir.forEach(li),on.forEach(li)}function wn(t,r){t.blockedOn===r&&(t.blockedOn=null,uo||(uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ia)))}function Tn(t){function r(h){return wn(h,t)}if(0<On.length){wn(On[0],t);for(var o=1;o<On.length;o++){var u=On[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Et!==null&&wn(Et,t),vn!==null&&wn(vn,t),En!==null&&wn(En,t),Ir.forEach(r),on.forEach(r),o=0;o<Mn.length;o++)u=Mn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Mn.length&&(o=Mn[0],o.blockedOn===null);)Ta(o),o.blockedOn===null&&Mn.shift()}var tr=Ee.ReactCurrentBatchConfig,Sr=!0;function He(t,r,o,u){var h=Ae,p=tr.transition;tr.transition=null;try{Ae=1,co(t,r,o,u)}finally{Ae=h,tr.transition=p}}function pu(t,r,o,u){var h=Ae,p=tr.transition;tr.transition=null;try{Ae=4,co(t,r,o,u)}finally{Ae=h,tr.transition=p}}function co(t,r,o,u){if(Sr){var h=Gi(t,r,o,u);if(h===null)Au(t,r,u,ui,o),wa(t,u);else if(fu(h,t,r,o,u))u.stopPropagation();else if(wa(t,u),r&4&&-1<du.indexOf(t)){for(;h!==null;){var p=Ao(h);if(p!==null&&ya(p),p=Gi(t,r,o,u),p===null&&Au(t,r,u,ui,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Au(t,r,u,null,o)}}var ui=null;function Gi(t,r,o,u){if(ui=null,t=Ui(u),t=di(t),t!==null)if(r=yn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ri(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return ui=t,null}function ho(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(da()){case ii:return 1;case yr:return 4;case sn:case ao:return 16;case fa:return 536870912;default:return 16}default:return 16}}var Yt=null,Xi=null,jt=null;function fo(){if(jt)return jt;var t,r=Xi,o=r.length,u,h="value"in Yt?Yt.value:Yt.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return jt=h.slice(t,1<u?1-u:void 0)}function Yi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Fn(){return!0}function po(){return!1}function wt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Fn:po,this.isPropagationStopped=po,this}return te(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),r}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=wt(In),Un=te({},In,{view:0,detail:0}),mu=wt(Un),Zi,nr,Ar,ci=te({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ar&&(Ar&&t.type==="mousemove"?(Zi=t.screenX-Ar.screenX,nr=t.screenY-Ar.screenY):nr=Zi=0,Ar=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:nr}}),es=wt(ci),mo=te({},ci,{dataTransfer:0}),Sa=wt(mo),ts=te({},Un,{relatedTarget:0}),ns=wt(ts),Aa=te({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),rr=wt(Aa),Ra=te({},In,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ca=wt(Ra),Pa=te({},In,{data:0}),go=wt(Pa),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Va(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ka[t])?!!r[t]:!1}function zn(){return Va}var l=te({},Un,{key:function(t){if(t.key){var r=rs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ft[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=wt(l),g=te({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=wt(g),L=te({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn}),z=wt(L),G=te({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fe=wt(G),lt=te({},ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pe=wt(lt),mt=[9,13,27,32],rt=m&&"CompositionEvent"in window,an=null;m&&"documentMode"in document&&(an=document.documentMode);var Jt=m&&"TextEvent"in window&&!an,hi=m&&(!rt||an&&8<an&&11>=an),is=" ",Wh=!1;function Qh(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function $g(t,r){switch(t){case"compositionend":return Kh(r);case"keypress":return r.which!==32?null:(Wh=!0,is);case"textInput":return t=r.data,t===is&&Wh?null:t;default:return null}}function qg(t,r){if(ss)return t==="compositionend"||!rt&&Qh(t,r)?(t=fo(),jt=Xi=Yt=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return hi&&r.locale!=="ko"?null:r.data;default:return null}}var Hg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Hg[t.type]:r==="textarea"}function Xh(t,r,o,u){Ln(u),r=Oa(r,"onChange"),0<r.length&&(o=new Ji("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var yo=null,_o=null;function Wg(t){pd(t,0)}function Da(t){var r=cs(t);if(xi(r))return t}function Qg(t,r){if(t==="change")return r}var Yh=!1;if(m){var gu;if(m){var yu="oninput"in document;if(!yu){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),yu=typeof Jh.oninput=="function"}gu=yu}else gu=!1;Yh=gu&&(!document.documentMode||9<document.documentMode)}function Zh(){yo&&(yo.detachEvent("onpropertychange",ed),_o=yo=null)}function ed(t){if(t.propertyName==="value"&&Da(_o)){var r=[];Xh(r,_o,t,Ui(t)),ro(Wg,r)}}function Kg(t,r,o){t==="focusin"?(Zh(),yo=r,_o=o,yo.attachEvent("onpropertychange",ed)):t==="focusout"&&Zh()}function Gg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(_o)}function Xg(t,r){if(t==="click")return Da(r)}function Yg(t,r){if(t==="input"||t==="change")return Da(r)}function Jg(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Sn=typeof Object.is=="function"?Object.is:Jg;function vo(t,r){if(Sn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!_.call(r,h)||!Sn(t[h],r[h]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nd(t,r){var o=td(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=td(o)}}function rd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?rd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function id(){for(var t=window,r=mr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=mr(t.document)}return r}function _u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Zg(t){var r=id(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&rd(o.ownerDocument.documentElement,o)){if(u!==null&&_u(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=nd(o,p);var y=nd(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ey=m&&"documentMode"in document&&11>=document.documentMode,os=null,vu=null,Eo=null,Eu=!1;function sd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Eu||os==null||os!==mr(u)||(u=os,"selectionStart"in u&&_u(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Eo&&vo(Eo,u)||(Eo=u,u=Oa(vu,"onSelect"),0<u.length&&(r=new Ji("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=os)))}function Na(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var as={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},wu={},od={};m&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function xa(t){if(wu[t])return wu[t];if(!as[t])return t;var r=as[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in od)return wu[t]=r[o];return t}var ad=xa("animationend"),ld=xa("animationiteration"),ud=xa("animationstart"),cd=xa("transitionend"),hd=new Map,dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,r){hd.set(t,r),c(r,[t])}for(var Tu=0;Tu<dd.length;Tu++){var Iu=dd[Tu],ty=Iu.toLowerCase(),ny=Iu[0].toUpperCase()+Iu.slice(1);Rr(ty,"on"+ny)}Rr(ad,"onAnimationEnd"),Rr(ld,"onAnimationIteration"),Rr(ud,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(cd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function fd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,ua(u,r,void 0,t),t.currentTarget=null}function pd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var w=u[y],R=w.instance,F=w.currentTarget;if(w=w.listener,R!==p&&h.isPropagationStopped())break e;fd(h,w,F),p=R}else for(y=0;y<u.length;y++){if(w=u[y],R=w.instance,F=w.currentTarget,w=w.listener,R!==p&&h.isPropagationStopped())break e;fd(h,w,F),p=R}}}if(gn)throw t=io,gn=!1,io=null,t}function $e(t,r){var o=r[Du];o===void 0&&(o=r[Du]=new Set);var u=t+"__bubble";o.has(u)||(md(r,t,2,!1),o.add(u))}function Su(t,r,o){var u=0;r&&(u|=4),md(o,t,u,r)}var La="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[La]){t[La]=!0,s.forEach(function(o){o!=="selectionchange"&&(ry.has(o)||Su(o,!1,t),Su(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[La]||(r[La]=!0,Su("selectionchange",!1,r))}}function md(t,r,o,u){switch(ho(r)){case 1:var h=He;break;case 4:h=pu;break;default:h=co}o=h.bind(null,r,o,t),h=void 0,!ji||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Au(t,r,o,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var w=u.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var R=y.tag;if((R===3||R===4)&&(R=y.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;y=y.return}for(;w!==null;){if(y=di(w),y===null)return;if(R=y.tag,R===5||R===6){u=p=y;continue e}w=w.parentNode}}u=u.return}ro(function(){var F=p,q=Ui(o),W=[];e:{var $=hd.get(t);if($!==void 0){var Z=Ji,ie=t;switch(t){case"keypress":if(Yi(o)===0)break e;case"keydown":case"keyup":Z=f;break;case"focusin":ie="focus",Z=ns;break;case"focusout":ie="blur",Z=ns;break;case"beforeblur":case"afterblur":Z=ns;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Sa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=z;break;case ad:case ld:case ud:Z=rr;break;case cd:Z=Fe;break;case"scroll":Z=mu;break;case"wheel":Z=Pe;break;case"copy":case"cut":case"paste":Z=Ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=v}var se=(r&4)!==0,tt=!se&&t==="scroll",O=se?$!==null?$+"Capture":null:$;se=[];for(var C=F,M;C!==null;){M=C;var K=M.stateNode;if(M.tag===5&&K!==null&&(M=K,O!==null&&(K=et(C,O),K!=null&&se.push(Io(C,K,M)))),tt)break;C=C.return}0<se.length&&($=new Z($,ie,null,o,q),W.push({event:$,listeners:se}))}}if(!(r&7)){e:{if($=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",$&&o!==Zr&&(ie=o.relatedTarget||o.fromElement)&&(di(ie)||ie[ir]))break e;if((Z||$)&&($=q.window===q?q:($=q.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(ie=o.relatedTarget||o.toElement,Z=F,ie=ie?di(ie):null,ie!==null&&(tt=yn(ie),ie!==tt||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(Z=null,ie=F),Z!==ie)){if(se=es,K="onMouseLeave",O="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(se=v,K="onPointerLeave",O="onPointerEnter",C="pointer"),tt=Z==null?$:cs(Z),M=ie==null?$:cs(ie),$=new se(K,C+"leave",Z,o,q),$.target=tt,$.relatedTarget=M,K=null,di(q)===F&&(se=new se(O,C+"enter",ie,o,q),se.target=M,se.relatedTarget=tt,K=se),tt=K,Z&&ie)t:{for(se=Z,O=ie,C=0,M=se;M;M=ls(M))C++;for(M=0,K=O;K;K=ls(K))M++;for(;0<C-M;)se=ls(se),C--;for(;0<M-C;)O=ls(O),M--;for(;C--;){if(se===O||O!==null&&se===O.alternate)break t;se=ls(se),O=ls(O)}se=null}else se=null;Z!==null&&gd(W,$,Z,se,!1),ie!==null&&tt!==null&&gd(W,tt,ie,se,!0)}}e:{if($=F?cs(F):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var oe=Qg;else if(Gh($))if(Yh)oe=Yg;else{oe=Gg;var de=Kg}else(Z=$.nodeName)&&Z.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(oe=Xg);if(oe&&(oe=oe(t,F))){Xh(W,oe,o,q);break e}de&&de(t,$,F),t==="focusout"&&(de=$._wrapperState)&&de.controlled&&$.type==="number"&&Oi($,"number",$.value)}switch(de=F?cs(F):window,t){case"focusin":(Gh(de)||de.contentEditable==="true")&&(os=de,vu=F,Eo=null);break;case"focusout":Eo=vu=os=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,sd(W,o,q);break;case"selectionchange":if(ey)break;case"keydown":case"keyup":sd(W,o,q)}var fe;if(rt)e:{switch(t){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else ss?Qh(t,o)&&(me="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(me="onCompositionStart");me&&(hi&&o.locale!=="ko"&&(ss||me!=="onCompositionStart"?me==="onCompositionEnd"&&ss&&(fe=fo()):(Yt=q,Xi="value"in Yt?Yt.value:Yt.textContent,ss=!0)),de=Oa(F,me),0<de.length&&(me=new go(me,t,null,o,q),W.push({event:me,listeners:de}),fe?me.data=fe:(fe=Kh(o),fe!==null&&(me.data=fe)))),(fe=Jt?$g(t,o):qg(t,o))&&(F=Oa(F,"onBeforeInput"),0<F.length&&(q=new go("onBeforeInput","beforeinput",null,o,q),W.push({event:q,listeners:F}),q.data=fe))}pd(W,r)})}function Io(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Oa(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=et(t,o),p!=null&&u.unshift(Io(t,p,h)),p=et(t,r),p!=null&&u.push(Io(t,p,h))),t=t.return}return u}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gd(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var w=o,R=w.alternate,F=w.stateNode;if(R!==null&&R===u)break;w.tag===5&&F!==null&&(w=F,h?(R=et(o,p),R!=null&&y.unshift(Io(o,R,w))):h||(R=et(o,p),R!=null&&y.push(Io(o,R,w)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var iy=/\r\n?/g,sy=/\u0000|\uFFFD/g;function yd(t){return(typeof t=="string"?t:""+t).replace(iy,`
`).replace(sy,"")}function Ma(t,r,o){if(r=yd(r),yd(t)!==r&&o)throw Error(n(425))}function Fa(){}var Ru=null,Cu=null;function Pu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ku=typeof setTimeout=="function"?setTimeout:void 0,oy=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,ay=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(t){return _d.resolve(null).then(t).catch(ly)}:ku;function ly(t){setTimeout(function(){throw t})}function Vu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Tn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Tn(r)}function Cr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function vd(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),Bn="__reactFiber$"+us,So="__reactProps$"+us,ir="__reactContainer$"+us,Du="__reactEvents$"+us,uy="__reactListeners$"+us,cy="__reactHandles$"+us;function di(t){var r=t[Bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ir]||o[Bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=vd(t);t!==null;){if(o=t[Bn])return o;t=vd(t)}return r}t=o,o=t.parentNode}return null}function Ao(t){return t=t[Bn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Ua(t){return t[So]||null}var Nu=[],hs=-1;function Pr(t){return{current:t}}function qe(t){0>hs||(t.current=Nu[hs],Nu[hs]=null,hs--)}function be(t,r){hs++,Nu[hs]=t.current,t.current=r}var kr={},kt=Pr(kr),bt=Pr(!1),fi=kr;function ds(t,r){var o=t.type.contextTypes;if(!o)return kr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function $t(t){return t=t.childContextTypes,t!=null}function za(){qe(bt),qe(kt)}function Ed(t,r,o){if(kt.current!==kr)throw Error(n(168));be(kt,r),be(bt,o)}function wd(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return te({},o,u)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,fi=kt.current,be(kt,t),be(bt,bt.current),!0}function Td(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=wd(t,r,fi),u.__reactInternalMemoizedMergedChildContext=t,qe(bt),qe(kt),be(kt,t)):qe(bt),be(bt,o)}var sr=null,ja=!1,xu=!1;function Id(t){sr===null?sr=[t]:sr.push(t)}function hy(t){ja=!0,Id(t)}function Vr(){if(!xu&&sr!==null){xu=!0;var t=0,r=Ae;try{var o=sr;for(Ae=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}sr=null,ja=!1}catch(h){throw sr!==null&&(sr=sr.slice(t+1)),Hi(ii,Vr),h}finally{Ae=r,xu=!1}}return null}var fs=[],ps=0,ba=null,$a=0,ln=[],un=0,pi=null,or=1,ar="";function mi(t,r){fs[ps++]=$a,fs[ps++]=ba,ba=t,$a=r}function Sd(t,r,o){ln[un++]=or,ln[un++]=ar,ln[un++]=pi,pi=t;var u=or;t=ar;var h=32-Mt(u)-1;u&=~(1<<h),o+=1;var p=32-Mt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,or=1<<32-Mt(r)+h|o<<h|u,ar=p+t}else or=1<<p|o<<h|u,ar=t}function Lu(t){t.return!==null&&(mi(t,1),Sd(t,1,0))}function Ou(t){for(;t===ba;)ba=fs[--ps],fs[ps]=null,$a=fs[--ps],fs[ps]=null;for(;t===pi;)pi=ln[--un],ln[un]=null,ar=ln[--un],ln[un]=null,or=ln[--un],ln[un]=null}var Zt=null,en=null,We=!1,An=null;function Ad(t,r){var o=fn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Rd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Zt=t,en=Cr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Zt=t,en=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=pi!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=fn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Zt=t,en=null,!0):!1;default:return!1}}function Mu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(We){var r=en;if(r){var o=r;if(!Rd(t,r)){if(Mu(t))throw Error(n(418));r=Cr(o.nextSibling);var u=Zt;r&&Rd(t,r)?Ad(u,o):(t.flags=t.flags&-4097|2,We=!1,Zt=t)}}else{if(Mu(t))throw Error(n(418));t.flags=t.flags&-4097|2,We=!1,Zt=t}}}function Cd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function qa(t){if(t!==Zt)return!1;if(!We)return Cd(t),We=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Pu(t.type,t.memoizedProps)),r&&(r=en)){if(Mu(t))throw Pd(),Error(n(418));for(;r;)Ad(t,r),r=Cr(r.nextSibling)}if(Cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){en=Cr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}en=null}}else en=Zt?Cr(t.stateNode.nextSibling):null;return!0}function Pd(){for(var t=en;t;)t=Cr(t.nextSibling)}function ms(){en=Zt=null,We=!1}function Uu(t){An===null?An=[t]:An.push(t)}var dy=Ee.ReactCurrentBatchConfig;function Ro(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var w=h.refs;y===null?delete w[p]:w[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ha(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function kd(t){var r=t._init;return r(t._payload)}function Vd(t){function r(O,C){if(t){var M=O.deletions;M===null?(O.deletions=[C],O.flags|=16):M.push(C)}}function o(O,C){if(!t)return null;for(;C!==null;)r(O,C),C=C.sibling;return null}function u(O,C){for(O=new Map;C!==null;)C.key!==null?O.set(C.key,C):O.set(C.index,C),C=C.sibling;return O}function h(O,C){return O=Ur(O,C),O.index=0,O.sibling=null,O}function p(O,C,M){return O.index=M,t?(M=O.alternate,M!==null?(M=M.index,M<C?(O.flags|=2,C):M):(O.flags|=2,C)):(O.flags|=1048576,C)}function y(O){return t&&O.alternate===null&&(O.flags|=2),O}function w(O,C,M,K){return C===null||C.tag!==6?(C=kc(M,O.mode,K),C.return=O,C):(C=h(C,M),C.return=O,C)}function R(O,C,M,K){var oe=M.type;return oe===k?q(O,C,M.props.children,K,M.key):C!==null&&(C.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Pt&&kd(oe)===C.type)?(K=h(C,M.props),K.ref=Ro(O,C,M),K.return=O,K):(K=ml(M.type,M.key,M.props,null,O.mode,K),K.ref=Ro(O,C,M),K.return=O,K)}function F(O,C,M,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==M.containerInfo||C.stateNode.implementation!==M.implementation?(C=Vc(M,O.mode,K),C.return=O,C):(C=h(C,M.children||[]),C.return=O,C)}function q(O,C,M,K,oe){return C===null||C.tag!==7?(C=Ii(M,O.mode,K,oe),C.return=O,C):(C=h(C,M),C.return=O,C)}function W(O,C,M){if(typeof C=="string"&&C!==""||typeof C=="number")return C=kc(""+C,O.mode,M),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Je:return M=ml(C.type,C.key,C.props,null,O.mode,M),M.ref=Ro(O,null,C),M.return=O,M;case De:return C=Vc(C,O.mode,M),C.return=O,C;case Pt:var K=C._init;return W(O,K(C._payload),M)}if(Gn(C)||ce(C))return C=Ii(C,O.mode,M,null),C.return=O,C;Ha(O,C)}return null}function $(O,C,M,K){var oe=C!==null?C.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return oe!==null?null:w(O,C,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Je:return M.key===oe?R(O,C,M,K):null;case De:return M.key===oe?F(O,C,M,K):null;case Pt:return oe=M._init,$(O,C,oe(M._payload),K)}if(Gn(M)||ce(M))return oe!==null?null:q(O,C,M,K,null);Ha(O,M)}return null}function Z(O,C,M,K,oe){if(typeof K=="string"&&K!==""||typeof K=="number")return O=O.get(M)||null,w(C,O,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Je:return O=O.get(K.key===null?M:K.key)||null,R(C,O,K,oe);case De:return O=O.get(K.key===null?M:K.key)||null,F(C,O,K,oe);case Pt:var de=K._init;return Z(O,C,M,de(K._payload),oe)}if(Gn(K)||ce(K))return O=O.get(M)||null,q(C,O,K,oe,null);Ha(C,K)}return null}function ie(O,C,M,K){for(var oe=null,de=null,fe=C,me=C=0,_t=null;fe!==null&&me<M.length;me++){fe.index>me?(_t=fe,fe=null):_t=fe.sibling;var xe=$(O,fe,M[me],K);if(xe===null){fe===null&&(fe=_t);break}t&&fe&&xe.alternate===null&&r(O,fe),C=p(xe,C,me),de===null?oe=xe:de.sibling=xe,de=xe,fe=_t}if(me===M.length)return o(O,fe),We&&mi(O,me),oe;if(fe===null){for(;me<M.length;me++)fe=W(O,M[me],K),fe!==null&&(C=p(fe,C,me),de===null?oe=fe:de.sibling=fe,de=fe);return We&&mi(O,me),oe}for(fe=u(O,fe);me<M.length;me++)_t=Z(fe,O,me,M[me],K),_t!==null&&(t&&_t.alternate!==null&&fe.delete(_t.key===null?me:_t.key),C=p(_t,C,me),de===null?oe=_t:de.sibling=_t,de=_t);return t&&fe.forEach(function(zr){return r(O,zr)}),We&&mi(O,me),oe}function se(O,C,M,K){var oe=ce(M);if(typeof oe!="function")throw Error(n(150));if(M=oe.call(M),M==null)throw Error(n(151));for(var de=oe=null,fe=C,me=C=0,_t=null,xe=M.next();fe!==null&&!xe.done;me++,xe=M.next()){fe.index>me?(_t=fe,fe=null):_t=fe.sibling;var zr=$(O,fe,xe.value,K);if(zr===null){fe===null&&(fe=_t);break}t&&fe&&zr.alternate===null&&r(O,fe),C=p(zr,C,me),de===null?oe=zr:de.sibling=zr,de=zr,fe=_t}if(xe.done)return o(O,fe),We&&mi(O,me),oe;if(fe===null){for(;!xe.done;me++,xe=M.next())xe=W(O,xe.value,K),xe!==null&&(C=p(xe,C,me),de===null?oe=xe:de.sibling=xe,de=xe);return We&&mi(O,me),oe}for(fe=u(O,fe);!xe.done;me++,xe=M.next())xe=Z(fe,O,me,xe.value,K),xe!==null&&(t&&xe.alternate!==null&&fe.delete(xe.key===null?me:xe.key),C=p(xe,C,me),de===null?oe=xe:de.sibling=xe,de=xe);return t&&fe.forEach(function(Hy){return r(O,Hy)}),We&&mi(O,me),oe}function tt(O,C,M,K){if(typeof M=="object"&&M!==null&&M.type===k&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Je:e:{for(var oe=M.key,de=C;de!==null;){if(de.key===oe){if(oe=M.type,oe===k){if(de.tag===7){o(O,de.sibling),C=h(de,M.props.children),C.return=O,O=C;break e}}else if(de.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Pt&&kd(oe)===de.type){o(O,de.sibling),C=h(de,M.props),C.ref=Ro(O,de,M),C.return=O,O=C;break e}o(O,de);break}else r(O,de);de=de.sibling}M.type===k?(C=Ii(M.props.children,O.mode,K,M.key),C.return=O,O=C):(K=ml(M.type,M.key,M.props,null,O.mode,K),K.ref=Ro(O,C,M),K.return=O,O=K)}return y(O);case De:e:{for(de=M.key;C!==null;){if(C.key===de)if(C.tag===4&&C.stateNode.containerInfo===M.containerInfo&&C.stateNode.implementation===M.implementation){o(O,C.sibling),C=h(C,M.children||[]),C.return=O,O=C;break e}else{o(O,C);break}else r(O,C);C=C.sibling}C=Vc(M,O.mode,K),C.return=O,O=C}return y(O);case Pt:return de=M._init,tt(O,C,de(M._payload),K)}if(Gn(M))return ie(O,C,M,K);if(ce(M))return se(O,C,M,K);Ha(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,C!==null&&C.tag===6?(o(O,C.sibling),C=h(C,M),C.return=O,O=C):(o(O,C),C=kc(M,O.mode,K),C.return=O,O=C),y(O)):o(O,C)}return tt}var gs=Vd(!0),Dd=Vd(!1),Wa=Pr(null),Qa=null,ys=null,zu=null;function Bu(){zu=ys=Qa=null}function ju(t){var r=Wa.current;qe(Wa),t._currentValue=r}function bu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function _s(t,r){Qa=t,zu=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(qt=!0),t.firstContext=null)}function cn(t){var r=t._currentValue;if(zu!==t)if(t={context:t,memoizedValue:r,next:null},ys===null){if(Qa===null)throw Error(n(308));ys=t,Qa.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return r}var gi=null;function $u(t){gi===null?gi=[t]:gi.push(t)}function Nd(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,$u(r)):(o.next=h.next,h.next=o),r.interleaved=o,lr(t,u)}function lr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Dr=!1;function qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Nr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Ne&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,lr(t,o)}return h=u.interleaved,h===null?(r.next=r,$u(u)):(r.next=h.next,h.next=r),u.interleaved=r,lr(t,o)}function Ka(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,wr(t,o)}}function Ld(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Ga(t,r,o,u){var h=t.updateQueue;Dr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var R=w,F=R.next;R.next=null,y===null?p=F:y.next=F,y=R;var q=t.alternate;q!==null&&(q=q.updateQueue,w=q.lastBaseUpdate,w!==y&&(w===null?q.firstBaseUpdate=F:w.next=F,q.lastBaseUpdate=R))}if(p!==null){var W=h.baseState;y=0,q=F=R=null,w=p;do{var $=w.lane,Z=w.eventTime;if((u&$)===$){q!==null&&(q=q.next={eventTime:Z,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var ie=t,se=w;switch($=r,Z=o,se.tag){case 1:if(ie=se.payload,typeof ie=="function"){W=ie.call(Z,W,$);break e}W=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=se.payload,$=typeof ie=="function"?ie.call(Z,W,$):ie,$==null)break e;W=te({},W,$);break e;case 2:Dr=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,$=h.effects,$===null?h.effects=[w]:$.push(w))}else Z={eventTime:Z,lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},q===null?(F=q=Z,R=W):q=q.next=Z,y|=$;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);if(q===null&&(R=W),h.baseState=R,h.firstBaseUpdate=F,h.lastBaseUpdate=q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);vi|=y,t.lanes=y,t.memoizedState=W}}function Od(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Co={},jn=Pr(Co),Po=Pr(Co),ko=Pr(Co);function yi(t){if(t===Co)throw Error(n(174));return t}function Hu(t,r){switch(be(ko,r),be(Po,t),be(jn,Co),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:at(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=at(r,t)}qe(jn),be(jn,r)}function vs(){qe(jn),qe(Po),qe(ko)}function Md(t){yi(ko.current);var r=yi(jn.current),o=at(r,t.type);r!==o&&(be(Po,t),be(jn,o))}function Wu(t){Po.current===t&&(qe(jn),qe(Po))}var Ke=Pr(0);function Xa(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qu=[];function Ku(){for(var t=0;t<Qu.length;t++)Qu[t]._workInProgressVersionPrimary=null;Qu.length=0}var Ya=Ee.ReactCurrentDispatcher,Gu=Ee.ReactCurrentBatchConfig,_i=0,Ge=null,ut=null,gt=null,Ja=!1,Vo=!1,Do=0,fy=0;function Vt(){throw Error(n(321))}function Xu(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Sn(t[o],r[o]))return!1;return!0}function Yu(t,r,o,u,h,p){if(_i=p,Ge=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ya.current=t===null||t.memoizedState===null?yy:_y,t=o(u,h),Vo){p=0;do{if(Vo=!1,Do=0,25<=p)throw Error(n(301));p+=1,gt=ut=null,r.updateQueue=null,Ya.current=vy,t=o(u,h)}while(Vo)}if(Ya.current=tl,r=ut!==null&&ut.next!==null,_i=0,gt=ut=Ge=null,Ja=!1,r)throw Error(n(300));return t}function Ju(){var t=Do!==0;return Do=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=t:gt=gt.next=t,gt}function hn(){if(ut===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var r=gt===null?Ge.memoizedState:gt.next;if(r!==null)gt=r,ut=t;else{if(t===null)throw Error(n(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?Ge.memoizedState=gt=t:gt=gt.next=t}return gt}function No(t,r){return typeof r=="function"?r(t):r}function Zu(t){var r=hn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ut,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var w=y=null,R=null,F=p;do{var q=F.lane;if((_i&q)===q)R!==null&&(R=R.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:t(u,F.action);else{var W={lane:q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};R===null?(w=R=W,y=u):R=R.next=W,Ge.lanes|=q,vi|=q}F=F.next}while(F!==null&&F!==p);R===null?y=u:R.next=w,Sn(u,r.memoizedState)||(qt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Ge.lanes|=p,vi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function ec(t){var r=hn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Sn(p,r.memoizedState)||(qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Fd(){}function Ud(t,r){var o=Ge,u=hn(),h=r(),p=!Sn(u.memoizedState,h);if(p&&(u.memoizedState=h,qt=!0),u=u.queue,tc(jd.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,xo(9,Bd.bind(null,o,u,h,r),void 0,null),yt===null)throw Error(n(349));_i&30||zd(o,r,h)}return h}function zd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ge.updateQueue,r===null?(r={lastEffect:null,stores:null},Ge.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Bd(t,r,o,u){r.value=o,r.getSnapshot=u,bd(r)&&$d(t)}function jd(t,r,o){return o(function(){bd(r)&&$d(t)})}function bd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Sn(t,o)}catch{return!0}}function $d(t){var r=lr(t,1);r!==null&&kn(r,t,1,-1)}function qd(t){var r=bn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},r.queue=t,t=t.dispatch=gy.bind(null,Ge,t),[r.memoizedState,t]}function xo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ge.updateQueue,r===null?(r={lastEffect:null,stores:null},Ge.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Hd(){return hn().memoizedState}function Za(t,r,o,u){var h=bn();Ge.flags|=t,h.memoizedState=xo(1|r,o,void 0,u===void 0?null:u)}function el(t,r,o,u){var h=hn();u=u===void 0?null:u;var p=void 0;if(ut!==null){var y=ut.memoizedState;if(p=y.destroy,u!==null&&Xu(u,y.deps)){h.memoizedState=xo(r,o,p,u);return}}Ge.flags|=t,h.memoizedState=xo(1|r,o,p,u)}function Wd(t,r){return Za(8390656,8,t,r)}function tc(t,r){return el(2048,8,t,r)}function Qd(t,r){return el(4,2,t,r)}function Kd(t,r){return el(4,4,t,r)}function Gd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Xd(t,r,o){return o=o!=null?o.concat([t]):null,el(4,4,Gd.bind(null,r,t),o)}function nc(){}function Yd(t,r){var o=hn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Xu(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Jd(t,r){var o=hn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Xu(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Zd(t,r,o){return _i&21?(Sn(o,r)||(o=ai(),Ge.lanes|=o,vi|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=o)}function py(t,r){var o=Ae;Ae=o!==0&&4>o?o:4,t(!0);var u=Gu.transition;Gu.transition={};try{t(!1),r()}finally{Ae=o,Gu.transition=u}}function ef(){return hn().memoizedState}function my(t,r,o){var u=Mr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},tf(t))nf(r,o);else if(o=Nd(t,r,o,u),o!==null){var h=zt();kn(o,t,u,h),rf(o,r,u)}}function gy(t,r,o){var u=Mr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(tf(t))nf(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,w=p(y,o);if(h.hasEagerState=!0,h.eagerState=w,Sn(w,y)){var R=r.interleaved;R===null?(h.next=h,$u(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Nd(t,r,h,u),o!==null&&(h=zt(),kn(o,t,u,h),rf(o,r,u))}}function tf(t){var r=t.alternate;return t===Ge||r!==null&&r===Ge}function nf(t,r){Vo=Ja=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function rf(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,wr(t,o)}}var tl={readContext:cn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},yy={readContext:cn,useCallback:function(t,r){return bn().memoizedState=[t,r===void 0?null:r],t},useContext:cn,useEffect:Wd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Za(4194308,4,Gd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Za(4194308,4,t,r)},useInsertionEffect:function(t,r){return Za(4,2,t,r)},useMemo:function(t,r){var o=bn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=bn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=my.bind(null,Ge,t),[u.memoizedState,t]},useRef:function(t){var r=bn();return t={current:t},r.memoizedState=t},useState:qd,useDebugValue:nc,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=qd(!1),r=t[0];return t=py.bind(null,t[1]),bn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ge,h=bn();if(We){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));_i&30||zd(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Wd(jd.bind(null,u,p,t),[t]),u.flags|=2048,xo(9,Bd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=bn(),r=yt.identifierPrefix;if(We){var o=ar,u=or;o=(u&~(1<<32-Mt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Do++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=fy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},_y={readContext:cn,useCallback:Yd,useContext:cn,useEffect:tc,useImperativeHandle:Xd,useInsertionEffect:Qd,useLayoutEffect:Kd,useMemo:Jd,useReducer:Zu,useRef:Hd,useState:function(){return Zu(No)},useDebugValue:nc,useDeferredValue:function(t){var r=hn();return Zd(r,ut.memoizedState,t)},useTransition:function(){var t=Zu(No)[0],r=hn().memoizedState;return[t,r]},useMutableSource:Fd,useSyncExternalStore:Ud,useId:ef,unstable_isNewReconciler:!1},vy={readContext:cn,useCallback:Yd,useContext:cn,useEffect:tc,useImperativeHandle:Xd,useInsertionEffect:Qd,useLayoutEffect:Kd,useMemo:Jd,useReducer:ec,useRef:Hd,useState:function(){return ec(No)},useDebugValue:nc,useDeferredValue:function(t){var r=hn();return ut===null?r.memoizedState=t:Zd(r,ut.memoizedState,t)},useTransition:function(){var t=ec(No)[0],r=hn().memoizedState;return[t,r]},useMutableSource:Fd,useSyncExternalStore:Ud,useId:ef,unstable_isNewReconciler:!1};function Rn(t,r){if(t&&t.defaultProps){r=te({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function rc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:te({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var nl={isMounted:function(t){return(t=t._reactInternals)?yn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=zt(),h=Mr(t),p=ur(u,h);p.payload=r,o!=null&&(p.callback=o),r=Nr(t,p,h),r!==null&&(kn(r,t,h,u),Ka(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=zt(),h=Mr(t),p=ur(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Nr(t,p,h),r!==null&&(kn(r,t,h,u),Ka(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=zt(),u=Mr(t),h=ur(o,u);h.tag=2,r!=null&&(h.callback=r),r=Nr(t,h,u),r!==null&&(kn(r,t,u,o),Ka(r,t,u))}};function sf(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!vo(o,u)||!vo(h,p):!0}function of(t,r,o){var u=!1,h=kr,p=r.contextType;return typeof p=="object"&&p!==null?p=cn(p):(h=$t(r)?fi:kt.current,u=r.contextTypes,p=(u=u!=null)?ds(t,h):kr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=nl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function af(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&nl.enqueueReplaceState(r,r.state,null)}function ic(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},qu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=cn(p):(p=$t(r)?fi:kt.current,h.context=ds(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(rc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&nl.enqueueReplaceState(h,h.state,null),Ga(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,r){try{var o="",u=r;do o+=we(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function sc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function oc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Ey=typeof WeakMap=="function"?WeakMap:Map;function lf(t,r,o){o=ur(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){ul||(ul=!0,wc=u),oc(t,r)},o}function uf(t,r,o){o=ur(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){oc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){oc(t,r),typeof u!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function cf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Ey;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Ly.bind(null,t,r,o),r.then(t,t))}function hf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function df(t,r,o,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=ur(-1,1),r.tag=2,Nr(o,r,1))),o.lanes|=1),t)}var wy=Ee.ReactCurrentOwner,qt=!1;function Ut(t,r,o,u){r.child=t===null?Dd(r,null,o,u):gs(r,t.child,o,u)}function ff(t,r,o,u,h){o=o.render;var p=r.ref;return _s(r,h),u=Yu(t,r,o,u,p,h),o=Ju(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(We&&o&&Lu(r),r.flags|=1,Ut(t,r,u,h),r.child)}function pf(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Pc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,mf(t,r,p,u,h)):(t=ml(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:vo,o(y,u)&&t.ref===r.ref)return cr(t,r,h)}return r.flags|=1,t=Ur(p,u),t.ref=r.ref,t.return=r,r.child=t}function mf(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(vo(p,u)&&t.ref===r.ref)if(qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&(qt=!0);else return r.lanes=t.lanes,cr(t,r,h)}return ac(t,r,o,u,h)}function gf(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ts,tn),tn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,be(Ts,tn),tn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,be(Ts,tn),tn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,be(Ts,tn),tn|=u;return Ut(t,r,h,o),r.child}function yf(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function ac(t,r,o,u,h){var p=$t(o)?fi:kt.current;return p=ds(r,p),_s(r,h),o=Yu(t,r,o,u,p,h),u=Ju(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(We&&u&&Lu(r),r.flags|=1,Ut(t,r,o,h),r.child)}function _f(t,r,o,u,h){if($t(o)){var p=!0;Ba(r)}else p=!1;if(_s(r,h),r.stateNode===null)il(t,r),of(r,o,u),ic(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,w=r.memoizedProps;y.props=w;var R=y.context,F=o.contextType;typeof F=="object"&&F!==null?F=cn(F):(F=$t(o)?fi:kt.current,F=ds(r,F));var q=o.getDerivedStateFromProps,W=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";W||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==u||R!==F)&&af(r,y,u,F),Dr=!1;var $=r.memoizedState;y.state=$,Ga(r,u,y,h),R=r.memoizedState,w!==u||$!==R||bt.current||Dr?(typeof q=="function"&&(rc(r,o,q,u),R=r.memoizedState),(w=Dr||sf(r,o,w,u,$,R,F))?(W||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),y.props=u,y.state=R,y.context=F,u=w):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,xd(t,r),w=r.memoizedProps,F=r.type===r.elementType?w:Rn(r.type,w),y.props=F,W=r.pendingProps,$=y.context,R=o.contextType,typeof R=="object"&&R!==null?R=cn(R):(R=$t(o)?fi:kt.current,R=ds(r,R));var Z=o.getDerivedStateFromProps;(q=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==W||$!==R)&&af(r,y,u,R),Dr=!1,$=r.memoizedState,y.state=$,Ga(r,u,y,h);var ie=r.memoizedState;w!==W||$!==ie||bt.current||Dr?(typeof Z=="function"&&(rc(r,o,Z,u),ie=r.memoizedState),(F=Dr||sf(r,o,F,u,$,ie,R)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ie,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ie,R)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),y.props=u,y.state=ie,y.context=R,u=F):(typeof y.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),u=!1)}return lc(t,r,o,u,p,h)}function lc(t,r,o,u,h,p){yf(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Td(r,o,!1),cr(t,r,p);u=r.stateNode,wy.current=r;var w=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=gs(r,t.child,null,p),r.child=gs(r,null,w,p)):Ut(t,r,w,p),r.memoizedState=u.state,h&&Td(r,o,!0),r.child}function vf(t){var r=t.stateNode;r.pendingContext?Ed(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Ed(t,r.context,!1),Hu(t,r.containerInfo)}function Ef(t,r,o,u,h){return ms(),Uu(h),r.flags|=256,Ut(t,r,o,u),r.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wf(t,r,o){var u=r.pendingProps,h=Ke.current,p=!1,y=(r.flags&128)!==0,w;if((w=y)||(w=t!==null&&t.memoizedState===null?!1:(h&2)!==0),w?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),be(Ke,h&1),t===null)return Fu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=gl(y,u,0,null),t=Ii(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=cc(o),r.memoizedState=uc,t):hc(r,y));if(h=t.memoizedState,h!==null&&(w=h.dehydrated,w!==null))return Ty(t,r,y,u,w,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,w=h.sibling;var R={mode:"hidden",children:u.children};return!(y&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=Ur(h,R),u.subtreeFlags=h.subtreeFlags&14680064),w!==null?p=Ur(w,p):(p=Ii(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?cc(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=uc,u}return p=t.child,t=p.sibling,u=Ur(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function hc(t,r){return r=gl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function rl(t,r,o,u){return u!==null&&Uu(u),gs(r,t.child,null,o),t=hc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ty(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=sc(Error(n(422))),rl(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=gl({mode:"visible",children:u.children},h,0,null),p=Ii(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&gs(r,t.child,null,y),r.child.memoizedState=cc(y),r.memoizedState=uc,p);if(!(r.mode&1))return rl(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=sc(p,u,void 0),rl(t,r,y,u)}if(w=(y&t.childLanes)!==0,qt||w){if(u=yt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|y)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,lr(t,h),kn(u,t,h,-1))}return Cc(),u=sc(Error(n(421))),rl(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Oy.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,en=Cr(h.nextSibling),Zt=r,We=!0,An=null,t!==null&&(ln[un++]=or,ln[un++]=ar,ln[un++]=pi,or=t.id,ar=t.overflow,pi=r),r=hc(r,u.children),r.flags|=4096,r)}function Tf(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),bu(t.return,r,o)}function dc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function If(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Ut(t,r,u.children,o),u=Ke.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tf(t,o,r);else if(t.tag===19)Tf(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(be(Ke,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Xa(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),dc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Xa(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}dc(r,!0,o,null,p);break;case"together":dc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function il(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function cr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),vi|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Ur(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Ur(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Iy(t,r,o){switch(r.tag){case 3:vf(r),ms();break;case 5:Md(r);break;case 1:$t(r.type)&&Ba(r);break;case 4:Hu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;be(Wa,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(be(Ke,Ke.current&1),r.flags|=128,null):o&r.child.childLanes?wf(t,r,o):(be(Ke,Ke.current&1),t=cr(t,r,o),t!==null?t.sibling:null);be(Ke,Ke.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return If(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(Ke,Ke.current),u)break;return null;case 22:case 23:return r.lanes=0,gf(t,r,o)}return cr(t,r,o)}var Sf,fc,Af,Rf;Sf=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},fc=function(){},Af=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,yi(jn.current);var p=null;switch(o){case"input":h=Xr(t,h),u=Xr(t,u),p=[];break;case"select":h=te({},h,{value:void 0}),u=te({},u,{value:void 0}),p=[];break;case"textarea":h=Qs(t,h),u=Qs(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Fa)}Zs(o,u);var y;o=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var w=h[F];for(y in w)w.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(a.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in u){var R=u[F];if(w=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&R!==w&&(R!=null||w!=null))if(F==="style")if(w){for(y in w)!w.hasOwnProperty(y)||R&&R.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in R)R.hasOwnProperty(y)&&w[y]!==R[y]&&(o||(o={}),o[y]=R[y])}else o||(p||(p=[]),p.push(F,o)),o=R;else F==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,w=w?w.__html:void 0,R!=null&&w!==R&&(p=p||[]).push(F,R)):F==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(F,""+R):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(a.hasOwnProperty(F)?(R!=null&&F==="onScroll"&&$e("scroll",t),p||w===R||(p=[])):(p=p||[]).push(F,R))}o&&(p=p||[]).push("style",o);var F=p;(r.updateQueue=F)&&(r.flags|=4)}},Rf=function(t,r,o,u){o!==u&&(r.flags|=4)};function Lo(t,r){if(!We)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Dt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Sy(t,r,o){var u=r.pendingProps;switch(Ou(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(r),null;case 1:return $t(r.type)&&za(),Dt(r),null;case 3:return u=r.stateNode,vs(),qe(bt),qe(kt),Ku(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(qa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,An!==null&&(Sc(An),An=null))),fc(t,r),Dt(r),null;case 5:Wu(r);var h=yi(ko.current);if(o=r.type,t!==null&&r.stateNode!=null)Af(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Dt(r),null}if(t=yi(jn.current),qa(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Bn]=r,u[So]=p,t=(r.mode&1)!==0,o){case"dialog":$e("cancel",u),$e("close",u);break;case"iframe":case"object":case"embed":$e("load",u);break;case"video":case"audio":for(h=0;h<wo.length;h++)$e(wo[h],u);break;case"source":$e("error",u);break;case"img":case"image":case"link":$e("error",u),$e("load",u);break;case"details":$e("toggle",u);break;case"input":Li(u,p),$e("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},$e("invalid",u);break;case"textarea":Mi(u,p),$e("invalid",u)}Zs(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var w=p[y];y==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&Ma(u.textContent,w,t),h=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Ma(u.textContent,w,t),h=["children",""+w]):a.hasOwnProperty(y)&&w!=null&&y==="onScroll"&&$e("scroll",u)}switch(o){case"input":Kn(u),la(u,p,!0);break;case"textarea":Kn(u),Ks(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Fa)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ot(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[Bn]=r,t[So]=u,Sf(t,r,!1,!1),r.stateNode=t;e:{switch(y=eo(o,u),o){case"dialog":$e("cancel",t),$e("close",t),h=u;break;case"iframe":case"object":case"embed":$e("load",t),h=u;break;case"video":case"audio":for(h=0;h<wo.length;h++)$e(wo[h],t);h=u;break;case"source":$e("error",t),h=u;break;case"img":case"image":case"link":$e("error",t),$e("load",t),h=u;break;case"details":$e("toggle",t),h=u;break;case"input":Li(t,u),h=Xr(t,u),$e("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=te({},u,{value:void 0}),$e("invalid",t);break;case"textarea":Mi(t,u),h=Qs(t,u),$e("invalid",t);break;default:h=u}Zs(o,h),w=h;for(p in w)if(w.hasOwnProperty(p)){var R=w[p];p==="style"?Ys(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Gs(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&gr(t,R):typeof R=="number"&&gr(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&$e("scroll",t):R!=null&&ue(t,p,R,y))}switch(o){case"input":Kn(t),la(t,u,!1);break;case"textarea":Kn(t),Ks(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Oe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Xn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Xn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Fa)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Dt(r),null;case 6:if(t&&r.stateNode!=null)Rf(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=yi(ko.current),yi(jn.current),qa(r)){if(u=r.stateNode,o=r.memoizedProps,u[Bn]=r,(p=u.nodeValue!==o)&&(t=Zt,t!==null))switch(t.tag){case 3:Ma(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Bn]=r,r.stateNode=u}return Dt(r),null;case 13:if(qe(Ke),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&en!==null&&r.mode&1&&!(r.flags&128))Pd(),ms(),r.flags|=98560,p=!1;else if(p=qa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Bn]=r}else ms(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Dt(r),p=!1}else An!==null&&(Sc(An),An=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ke.current&1?ct===0&&(ct=3):Cc())),r.updateQueue!==null&&(r.flags|=4),Dt(r),null);case 4:return vs(),fc(t,r),t===null&&To(r.stateNode.containerInfo),Dt(r),null;case 10:return ju(r.type._context),Dt(r),null;case 17:return $t(r.type)&&za(),Dt(r),null;case 19:if(qe(Ke),p=r.memoizedState,p===null)return Dt(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Lo(p,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(y=Xa(t),y!==null){for(r.flags|=128,Lo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return be(Ke,Ke.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>Is&&(r.flags|=128,u=!0,Lo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Xa(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Lo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!We)return Dt(r),null}else 2*je()-p.renderingStartTime>Is&&o!==1073741824&&(r.flags|=128,u=!0,Lo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,o=Ke.current,be(Ke,u?o&1|2:o&1),r):(Dt(r),null);case 22:case 23:return Rc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?tn&1073741824&&(Dt(r),r.subtreeFlags&6&&(r.flags|=8192)):Dt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Ay(t,r){switch(Ou(r),r.tag){case 1:return $t(r.type)&&za(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return vs(),qe(bt),qe(kt),Ku(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Wu(r),null;case 13:if(qe(Ke),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ms()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ke),null;case 4:return vs(),null;case 10:return ju(r.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var sl=!1,Nt=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,re=null;function ws(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ye(t,r,u)}else o.current=null}function pc(t,r,o){try{o()}catch(u){Ye(t,r,u)}}var Cf=!1;function Cy(t,r){if(Ru=Sr,t=id(),_u(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,w=-1,R=-1,F=0,q=0,W=t,$=null;t:for(;;){for(var Z;W!==o||h!==0&&W.nodeType!==3||(w=y+h),W!==p||u!==0&&W.nodeType!==3||(R=y+u),W.nodeType===3&&(y+=W.nodeValue.length),(Z=W.firstChild)!==null;)$=W,W=Z;for(;;){if(W===t)break t;if($===o&&++F===h&&(w=y),$===p&&++q===u&&(R=y),(Z=W.nextSibling)!==null)break;W=$,$=W.parentNode}W=Z}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cu={focusedElem:t,selectionRange:o},Sr=!1,re=r;re!==null;)if(r=re,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,re=t;else for(;re!==null;){r=re;try{var ie=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var se=ie.memoizedProps,tt=ie.memoizedState,O=r.stateNode,C=O.getSnapshotBeforeUpdate(r.elementType===r.type?se:Rn(r.type,se),tt);O.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Ye(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,re=t;break}re=r.return}return ie=Cf,Cf=!1,ie}function Oo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&pc(r,o,p)}h=h.next}while(h!==u)}}function ol(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function mc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Pf(t){var r=t.alternate;r!==null&&(t.alternate=null,Pf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Bn],delete r[So],delete r[Du],delete r[uy],delete r[cy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kf(t){return t.tag===5||t.tag===3||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Fa));else if(u!==4&&(t=t.child,t!==null))for(gc(t,r,o),t=t.sibling;t!==null;)gc(t,r,o),t=t.sibling}function yc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(yc(t,r,o),t=t.sibling;t!==null;)yc(t,r,o),t=t.sibling}var Tt=null,Cn=!1;function xr(t,r,o){for(o=o.child;o!==null;)Df(t,r,o),o=o.sibling}function Df(t,r,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(si,o)}catch{}switch(o.tag){case 5:Nt||ws(o,r);case 6:var u=Tt,h=Cn;Tt=null,xr(t,r,o),Tt=u,Cn=h,Tt!==null&&(Cn?(t=Tt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Tt.removeChild(o.stateNode));break;case 18:Tt!==null&&(Cn?(t=Tt,o=o.stateNode,t.nodeType===8?Vu(t.parentNode,o):t.nodeType===1&&Vu(t,o),Tn(t)):Vu(Tt,o.stateNode));break;case 4:u=Tt,h=Cn,Tt=o.stateNode.containerInfo,Cn=!0,xr(t,r,o),Tt=u,Cn=h;break;case 0:case 11:case 14:case 15:if(!Nt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&pc(o,r,y),h=h.next}while(h!==u)}xr(t,r,o);break;case 1:if(!Nt&&(ws(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(w){Ye(o,r,w)}xr(t,r,o);break;case 21:xr(t,r,o);break;case 22:o.mode&1?(Nt=(u=Nt)||o.memoizedState!==null,xr(t,r,o),Nt=u):xr(t,r,o);break;default:xr(t,r,o)}}function Nf(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ry),r.forEach(function(u){var h=My.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Pn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,w=y;e:for(;w!==null;){switch(w.tag){case 5:Tt=w.stateNode,Cn=!1;break e;case 3:Tt=w.stateNode.containerInfo,Cn=!0;break e;case 4:Tt=w.stateNode.containerInfo,Cn=!0;break e}w=w.return}if(Tt===null)throw Error(n(160));Df(p,y,h),Tt=null,Cn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(F){Ye(h,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xf(r,t),r=r.sibling}function xf(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(r,t),$n(t),u&4){try{Oo(3,t,t.return),ol(3,t)}catch(se){Ye(t,t.return,se)}try{Oo(5,t,t.return)}catch(se){Ye(t,t.return,se)}}break;case 1:Pn(r,t),$n(t),u&512&&o!==null&&ws(o,o.return);break;case 5:if(Pn(r,t),$n(t),u&512&&o!==null&&ws(o,o.return),t.flags&32){var h=t.stateNode;try{gr(h,"")}catch(se){Ye(t,t.return,se)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,w=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&Hs(h,p),eo(w,y);var F=eo(w,p);for(y=0;y<R.length;y+=2){var q=R[y],W=R[y+1];q==="style"?Ys(h,W):q==="dangerouslySetInnerHTML"?Gs(h,W):q==="children"?gr(h,W):ue(h,q,W,F)}switch(w){case"input":Ws(h,p);break;case"textarea":Fi(h,p);break;case"select":var $=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?Xn(h,!!p.multiple,Z,!1):$!==!!p.multiple&&(p.defaultValue!=null?Xn(h,!!p.multiple,p.defaultValue,!0):Xn(h,!!p.multiple,p.multiple?[]:"",!1))}h[So]=p}catch(se){Ye(t,t.return,se)}}break;case 6:if(Pn(r,t),$n(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(se){Ye(t,t.return,se)}}break;case 3:if(Pn(r,t),$n(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Tn(r.containerInfo)}catch(se){Ye(t,t.return,se)}break;case 4:Pn(r,t),$n(t);break;case 13:Pn(r,t),$n(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Ec=je())),u&4&&Nf(t);break;case 22:if(q=o!==null&&o.memoizedState!==null,t.mode&1?(Nt=(F=Nt)||q,Pn(r,t),Nt=F):Pn(r,t),$n(t),u&8192){if(F=t.memoizedState!==null,(t.stateNode.isHidden=F)&&!q&&t.mode&1)for(re=t,q=t.child;q!==null;){for(W=re=q;re!==null;){switch($=re,Z=$.child,$.tag){case 0:case 11:case 14:case 15:Oo(4,$,$.return);break;case 1:ws($,$.return);var ie=$.stateNode;if(typeof ie.componentWillUnmount=="function"){u=$,o=$.return;try{r=u,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(se){Ye(u,o,se)}}break;case 5:ws($,$.return);break;case 22:if($.memoizedState!==null){Mf(W);continue}}Z!==null?(Z.return=$,re=Z):Mf(W)}q=q.sibling}e:for(q=null,W=t;;){if(W.tag===5){if(q===null){q=W;try{h=W.stateNode,F?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=W.stateNode,R=W.memoizedProps.style,y=R!=null&&R.hasOwnProperty("display")?R.display:null,w.style.display=Xs("display",y))}catch(se){Ye(t,t.return,se)}}}else if(W.tag===6){if(q===null)try{W.stateNode.nodeValue=F?"":W.memoizedProps}catch(se){Ye(t,t.return,se)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===t)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===t)break e;for(;W.sibling===null;){if(W.return===null||W.return===t)break e;q===W&&(q=null),W=W.return}q===W&&(q=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:Pn(r,t),$n(t),u&4&&Nf(t);break;case 21:break;default:Pn(r,t),$n(t)}}function $n(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(kf(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(gr(h,""),u.flags&=-33);var p=Vf(t);yc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,w=Vf(t);gc(t,w,y);break;default:throw Error(n(161))}}catch(R){Ye(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Py(t,r,o){re=t,Lf(t)}function Lf(t,r,o){for(var u=(t.mode&1)!==0;re!==null;){var h=re,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||sl;if(!y){var w=h.alternate,R=w!==null&&w.memoizedState!==null||Nt;w=sl;var F=Nt;if(sl=y,(Nt=R)&&!F)for(re=h;re!==null;)y=re,R=y.child,y.tag===22&&y.memoizedState!==null?Ff(h):R!==null?(R.return=y,re=R):Ff(h);for(;p!==null;)re=p,Lf(p),p=p.sibling;re=h,sl=w,Nt=F}Of(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,re=p):Of(t)}}function Of(t){for(;re!==null;){var r=re;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Nt||ol(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Nt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Rn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Od(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Od(r,y,o)}break;case 5:var w=r.stateNode;if(o===null&&r.flags&4){o=w;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var q=F.memoizedState;if(q!==null){var W=q.dehydrated;W!==null&&Tn(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Nt||r.flags&512&&mc(r)}catch($){Ye(r,r.return,$)}}if(r===t){re=null;break}if(o=r.sibling,o!==null){o.return=r.return,re=o;break}re=r.return}}function Mf(t){for(;re!==null;){var r=re;if(r===t){re=null;break}var o=r.sibling;if(o!==null){o.return=r.return,re=o;break}re=r.return}}function Ff(t){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{ol(4,r)}catch(R){Ye(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){Ye(r,h,R)}}var p=r.return;try{mc(r)}catch(R){Ye(r,p,R)}break;case 5:var y=r.return;try{mc(r)}catch(R){Ye(r,y,R)}}}catch(R){Ye(r,r.return,R)}if(r===t){re=null;break}var w=r.sibling;if(w!==null){w.return=r.return,re=w;break}re=r.return}}var ky=Math.ceil,al=Ee.ReactCurrentDispatcher,_c=Ee.ReactCurrentOwner,dn=Ee.ReactCurrentBatchConfig,Ne=0,yt=null,it=null,It=0,tn=0,Ts=Pr(0),ct=0,Mo=null,vi=0,ll=0,vc=0,Fo=null,Ht=null,Ec=0,Is=1/0,hr=null,ul=!1,wc=null,Lr=null,cl=!1,Or=null,hl=0,Uo=0,Tc=null,dl=-1,fl=0;function zt(){return Ne&6?je():dl!==-1?dl:dl=je()}function Mr(t){return t.mode&1?Ne&2&&It!==0?It&-It:dy.transition!==null?(fl===0&&(fl=ai()),fl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:ho(t.type)),t):1}function kn(t,r,o,u){if(50<Uo)throw Uo=0,Tc=null,Error(n(185));Er(t,o,u),(!(Ne&2)||t!==yt)&&(t===yt&&(!(Ne&2)&&(ll|=o),ct===4&&Fr(t,It)),Wt(t,u),o===1&&Ne===0&&!(r.mode&1)&&(Is=je()+500,ja&&Vr()))}function Wt(t,r){var o=t.callbackNode;Zn(t,r);var u=oi(t,t===yt?It:0);if(u===0)o!==null&&oo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&oo(o),r===1)t.tag===0?hy(zf.bind(null,t)):Id(zf.bind(null,t)),ay(function(){!(Ne&6)&&Vr()}),o=null;else{switch(Tr(u)){case 1:o=ii;break;case 4:o=yr;break;case 16:o=sn;break;case 536870912:o=fa;break;default:o=sn}o=Qf(o,Uf.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Uf(t,r){if(dl=-1,fl=0,Ne&6)throw Error(n(327));var o=t.callbackNode;if(Ss()&&t.callbackNode!==o)return null;var u=oi(t,t===yt?It:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=pl(t,u);else{r=u;var h=Ne;Ne|=2;var p=jf();(yt!==t||It!==r)&&(hr=null,Is=je()+500,wi(t,r));do try{Ny();break}catch(w){Bf(t,w)}while(!0);Bu(),al.current=p,Ne=h,it!==null?r=0:(yt=null,It=0,r=ct)}if(r!==0){if(r===2&&(h=Xt(t),h!==0&&(u=h,r=Ic(t,h))),r===1)throw o=Mo,wi(t,0),Fr(t,u),Wt(t,je()),o;if(r===6)Fr(t,u);else{if(h=t.current.alternate,!(u&30)&&!Vy(h)&&(r=pl(t,u),r===2&&(p=Xt(t),p!==0&&(u=p,r=Ic(t,p))),r===1))throw o=Mo,wi(t,0),Fr(t,u),Wt(t,je()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ti(t,Ht,hr);break;case 3:if(Fr(t,u),(u&130023424)===u&&(r=Ec+500-je(),10<r)){if(oi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=ku(Ti.bind(null,t,Ht,hr),r);break}Ti(t,Ht,hr);break;case 4:if(Fr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-Mt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*ky(u/1960))-u,10<u){t.timeoutHandle=ku(Ti.bind(null,t,Ht,hr),u);break}Ti(t,Ht,hr);break;case 5:Ti(t,Ht,hr);break;default:throw Error(n(329))}}}return Wt(t,je()),t.callbackNode===o?Uf.bind(null,t):null}function Ic(t,r){var o=Fo;return t.current.memoizedState.isDehydrated&&(wi(t,r).flags|=256),t=pl(t,r),t!==2&&(r=Ht,Ht=o,r!==null&&Sc(r)),t}function Sc(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function Vy(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Sn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fr(t,r){for(r&=~vc,r&=~ll,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Mt(r),u=1<<o;t[o]=-1,r&=~u}}function zf(t){if(Ne&6)throw Error(n(327));Ss();var r=oi(t,0);if(!(r&1))return Wt(t,je()),null;var o=pl(t,r);if(t.tag!==0&&o===2){var u=Xt(t);u!==0&&(r=u,o=Ic(t,u))}if(o===1)throw o=Mo,wi(t,0),Fr(t,r),Wt(t,je()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ti(t,Ht,hr),Wt(t,je()),null}function Ac(t,r){var o=Ne;Ne|=1;try{return t(r)}finally{Ne=o,Ne===0&&(Is=je()+500,ja&&Vr())}}function Ei(t){Or!==null&&Or.tag===0&&!(Ne&6)&&Ss();var r=Ne;Ne|=1;var o=dn.transition,u=Ae;try{if(dn.transition=null,Ae=1,t)return t()}finally{Ae=u,dn.transition=o,Ne=r,!(Ne&6)&&Vr()}}function Rc(){tn=Ts.current,qe(Ts)}function wi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,oy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Ou(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&za();break;case 3:vs(),qe(bt),qe(kt),Ku();break;case 5:Wu(u);break;case 4:vs();break;case 13:qe(Ke);break;case 19:qe(Ke);break;case 10:ju(u.type._context);break;case 22:case 23:Rc()}o=o.return}if(yt=t,it=t=Ur(t.current,null),It=tn=r,ct=0,Mo=null,vc=ll=vi=0,Ht=Fo=null,gi!==null){for(r=0;r<gi.length;r++)if(o=gi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}gi=null}return t}function Bf(t,r){do{var o=it;try{if(Bu(),Ya.current=tl,Ja){for(var u=Ge.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Ja=!1}if(_i=0,gt=ut=Ge=null,Vo=!1,Do=0,_c.current=null,o===null||o.return===null){ct=1,Mo=r,it=null;break}e:{var p=t,y=o.return,w=o,R=r;if(r=It,w.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var F=R,q=w,W=q.tag;if(!(q.mode&1)&&(W===0||W===11||W===15)){var $=q.alternate;$?(q.updateQueue=$.updateQueue,q.memoizedState=$.memoizedState,q.lanes=$.lanes):(q.updateQueue=null,q.memoizedState=null)}var Z=hf(y);if(Z!==null){Z.flags&=-257,df(Z,y,w,p,r),Z.mode&1&&cf(p,F,r),r=Z,R=F;var ie=r.updateQueue;if(ie===null){var se=new Set;se.add(R),r.updateQueue=se}else ie.add(R);break e}else{if(!(r&1)){cf(p,F,r),Cc();break e}R=Error(n(426))}}else if(We&&w.mode&1){var tt=hf(y);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),df(tt,y,w,p,r),Uu(Es(R,w));break e}}p=R=Es(R,w),ct!==4&&(ct=2),Fo===null?Fo=[p]:Fo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var O=lf(p,R,r);Ld(p,O);break e;case 1:w=R;var C=p.type,M=p.stateNode;if(!(p.flags&128)&&(typeof C.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Lr===null||!Lr.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=uf(p,w,r);Ld(p,K);break e}}p=p.return}while(p!==null)}$f(o)}catch(oe){r=oe,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function jf(){var t=al.current;return al.current=tl,t===null?tl:t}function Cc(){(ct===0||ct===3||ct===2)&&(ct=4),yt===null||!(vi&268435455)&&!(ll&268435455)||Fr(yt,It)}function pl(t,r){var o=Ne;Ne|=2;var u=jf();(yt!==t||It!==r)&&(hr=null,wi(t,r));do try{Dy();break}catch(h){Bf(t,h)}while(!0);if(Bu(),Ne=o,al.current=u,it!==null)throw Error(n(261));return yt=null,It=0,ct}function Dy(){for(;it!==null;)bf(it)}function Ny(){for(;it!==null&&!ha();)bf(it)}function bf(t){var r=Wf(t.alternate,t,tn);t.memoizedProps=t.pendingProps,r===null?$f(t):it=r,_c.current=null}function $f(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=Ay(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(o=Sy(o,r,tn),o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ct===0&&(ct=5)}function Ti(t,r,o){var u=Ae,h=dn.transition;try{dn.transition=null,Ae=1,xy(t,r,o,u)}finally{dn.transition=h,Ae=u}return null}function xy(t,r,o,u){do Ss();while(Or!==null);if(Ne&6)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===yt&&(it=yt=null,It=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||cl||(cl=!0,Qf(sn,function(){return Ss(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=dn.transition,dn.transition=null;var y=Ae;Ae=1;var w=Ne;Ne|=4,_c.current=null,Cy(t,o),xf(o,t),Zg(Cu),Sr=!!Ru,Cu=Ru=null,t.current=o,Py(o),cu(),Ne=w,Ae=y,dn.transition=p}else t.current=o;if(cl&&(cl=!1,Or=t,hl=h),p=t.pendingLanes,p===0&&(Lr=null),pa(o.stateNode),Wt(t,je()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(ul)throw ul=!1,t=wc,wc=null,t;return hl&1&&t.tag!==0&&Ss(),p=t.pendingLanes,p&1?t===Tc?Uo++:(Uo=0,Tc=t):Uo=0,Vr(),null}function Ss(){if(Or!==null){var t=Tr(hl),r=dn.transition,o=Ae;try{if(dn.transition=null,Ae=16>t?16:t,Or===null)var u=!1;else{if(t=Or,Or=null,hl=0,Ne&6)throw Error(n(331));var h=Ne;for(Ne|=4,re=t.current;re!==null;){var p=re,y=p.child;if(re.flags&16){var w=p.deletions;if(w!==null){for(var R=0;R<w.length;R++){var F=w[R];for(re=F;re!==null;){var q=re;switch(q.tag){case 0:case 11:case 15:Oo(8,q,p)}var W=q.child;if(W!==null)W.return=q,re=W;else for(;re!==null;){q=re;var $=q.sibling,Z=q.return;if(Pf(q),q===F){re=null;break}if($!==null){$.return=Z,re=$;break}re=Z}}}var ie=p.alternate;if(ie!==null){var se=ie.child;if(se!==null){ie.child=null;do{var tt=se.sibling;se.sibling=null,se=tt}while(se!==null)}}re=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,re=y;else e:for(;re!==null;){if(p=re,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Oo(9,p,p.return)}var O=p.sibling;if(O!==null){O.return=p.return,re=O;break e}re=p.return}}var C=t.current;for(re=C;re!==null;){y=re;var M=y.child;if(y.subtreeFlags&2064&&M!==null)M.return=y,re=M;else e:for(y=C;re!==null;){if(w=re,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:ol(9,w)}}catch(oe){Ye(w,w.return,oe)}if(w===y){re=null;break e}var K=w.sibling;if(K!==null){K.return=w.return,re=K;break e}re=w.return}}if(Ne=h,Vr(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(si,t)}catch{}u=!0}return u}finally{Ae=o,dn.transition=r}}return!1}function qf(t,r,o){r=Es(o,r),r=lf(t,r,1),t=Nr(t,r,1),r=zt(),t!==null&&(Er(t,1,r),Wt(t,r))}function Ye(t,r,o){if(t.tag===3)qf(t,t,o);else for(;r!==null;){if(r.tag===3){qf(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Lr===null||!Lr.has(u))){t=Es(o,t),t=uf(r,t,1),r=Nr(r,t,1),t=zt(),r!==null&&(Er(r,1,t),Wt(r,t));break}}r=r.return}}function Ly(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(It&o)===o&&(ct===4||ct===3&&(It&130023424)===It&&500>je()-Ec?wi(t,0):vc|=o),Wt(t,r)}function Hf(t,r){r===0&&(t.mode&1?(r=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):r=1);var o=zt();t=lr(t,r),t!==null&&(Er(t,r,o),Wt(t,o))}function Oy(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Hf(t,o)}function My(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Hf(t,o)}var Wf;Wf=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||bt.current)qt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return qt=!1,Iy(t,r,o);qt=!!(t.flags&131072)}else qt=!1,We&&r.flags&1048576&&Sd(r,$a,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;il(t,r),t=r.pendingProps;var h=ds(r,kt.current);_s(r,o),h=Yu(null,r,u,t,h,o);var p=Ju();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,$t(u)?(p=!0,Ba(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,qu(r),h.updater=nl,r.stateNode=h,h._reactInternals=r,ic(r,u,t,o),r=lc(null,r,u,!0,p,o)):(r.tag=0,We&&p&&Lu(r),Ut(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(il(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Uy(u),t=Rn(u,t),h){case 0:r=ac(null,r,u,t,o);break e;case 1:r=_f(null,r,u,t,o);break e;case 11:r=ff(null,r,u,t,o);break e;case 14:r=pf(null,r,u,Rn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),ac(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),_f(t,r,u,h,o);case 3:e:{if(vf(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,xd(t,r),Ga(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Es(Error(n(423)),r),r=Ef(t,r,u,o,h);break e}else if(u!==h){h=Es(Error(n(424)),r),r=Ef(t,r,u,o,h);break e}else for(en=Cr(r.stateNode.containerInfo.firstChild),Zt=r,We=!0,An=null,o=Dd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ms(),u===h){r=cr(t,r,o);break e}Ut(t,r,u,o)}r=r.child}return r;case 5:return Md(r),t===null&&Fu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Pu(u,h)?y=null:p!==null&&Pu(u,p)&&(r.flags|=32),yf(t,r),Ut(t,r,y,o),r.child;case 6:return t===null&&Fu(r),null;case 13:return wf(t,r,o);case 4:return Hu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=gs(r,null,u,o):Ut(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),ff(t,r,u,h,o);case 7:return Ut(t,r,r.pendingProps,o),r.child;case 8:return Ut(t,r,r.pendingProps.children,o),r.child;case 12:return Ut(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,be(Wa,u._currentValue),u._currentValue=y,p!==null)if(Sn(p.value,y)){if(p.children===h.children&&!bt.current){r=cr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var w=p.dependencies;if(w!==null){y=p.child;for(var R=w.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=ur(-1,o&-o),R.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var q=F.pending;q===null?R.next=R:(R.next=q.next,q.next=R),F.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),bu(p.return,o,r),w.lanes|=o;break}R=R.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,w=y.alternate,w!==null&&(w.lanes|=o),bu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Ut(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,_s(r,o),h=cn(h),u=u(h),r.flags|=1,Ut(t,r,u,o),r.child;case 14:return u=r.type,h=Rn(u,r.pendingProps),h=Rn(u.type,h),pf(t,r,u,h,o);case 15:return mf(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),il(t,r),r.tag=1,$t(u)?(t=!0,Ba(r)):t=!1,_s(r,o),of(r,u,h),ic(r,u,h,o),lc(null,r,u,!0,t,o);case 19:return If(t,r,o);case 22:return gf(t,r,o)}throw Error(n(156,r.tag))};function Qf(t,r){return Hi(t,r)}function Fy(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,r,o,u){return new Fy(t,r,o,u)}function Pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uy(t){if(typeof t=="function")return Pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===x)return 11;if(t===Ct)return 14}return 2}function Ur(t,r){var o=t.alternate;return o===null?(o=fn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function ml(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")Pc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case k:return Ii(o.children,h,p,r);case T:y=8,h|=8;break;case A:return t=fn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case I:return t=fn(13,o,r,h),t.elementType=I,t.lanes=p,t;case Ze:return t=fn(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case Ue:return gl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:y=10;break e;case D:y=9;break e;case x:y=11;break e;case Ct:y=14;break e;case Pt:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=fn(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Ii(t,r,o,u){return t=fn(7,t,u,r),t.lanes=o,t}function gl(t,r,o,u){return t=fn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function kc(t,r,o){return t=fn(6,t,null,r),t.lanes=o,t}function Vc(t,r,o){return r=fn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function zy(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vr(0),this.expirationTimes=vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Dc(t,r,o,u,h,p,y,w,R){return t=new zy(t,r,o,w,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=fn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(p),t}function By(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:De,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Kf(t){if(!t)return kr;t=t._reactInternals;e:{if(yn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if($t(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if($t(o))return wd(t,o,r)}return r}function Gf(t,r,o,u,h,p,y,w,R){return t=Dc(o,u,!0,t,h,p,y,w,R),t.context=Kf(null),o=t.current,u=zt(),h=Mr(o),p=ur(u,h),p.callback=r??null,Nr(o,p,h),t.current.lanes=h,Er(t,h,u),Wt(t,u),t}function yl(t,r,o,u){var h=r.current,p=zt(),y=Mr(h);return o=Kf(o),r.context===null?r.context=o:r.pendingContext=o,r=ur(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Nr(h,r,y),t!==null&&(kn(t,h,y,p),Ka(t,h,y)),y}function _l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xf(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Nc(t,r){Xf(t,r),(t=t.alternate)&&Xf(t,r)}function jy(){return null}var Yf=typeof reportError=="function"?reportError:function(t){console.error(t)};function xc(t){this._internalRoot=t}vl.prototype.render=xc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));yl(t,r,null,null)},vl.prototype.unmount=xc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ei(function(){yl(null,t,null,null)}),r[ir]=null}};function vl(t){this._internalRoot=t}vl.prototype.unstable_scheduleHydration=function(t){if(t){var r=va();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Mn.length&&r!==0&&r<Mn[o].priority;o++);Mn.splice(o,0,t),o===0&&Ta(t)}};function Lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function El(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jf(){}function by(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var F=_l(y);p.call(F)}}var y=Gf(r,u,t,0,null,!1,!1,"",Jf);return t._reactRootContainer=y,t[ir]=y.current,To(t.nodeType===8?t.parentNode:t),Ei(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var w=u;u=function(){var F=_l(R);w.call(F)}}var R=Dc(t,0,!1,null,null,!1,!1,"",Jf);return t._reactRootContainer=R,t[ir]=R.current,To(t.nodeType===8?t.parentNode:t),Ei(function(){yl(r,R,o,u)}),R}function wl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var w=h;h=function(){var R=_l(y);w.call(R)}}yl(r,y,t,h)}else y=by(o,r,t,h,u);return _l(y)}ya=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=_r(r.pendingLanes);o!==0&&(wr(r,o|1),Wt(r,je()),!(Ne&6)&&(Is=je()+500,Vr()))}break;case 13:Ei(function(){var u=lr(t,1);if(u!==null){var h=zt();kn(u,t,1,h)}}),Nc(t,1)}},Ki=function(t){if(t.tag===13){var r=lr(t,134217728);if(r!==null){var o=zt();kn(r,t,134217728,o)}Nc(t,134217728)}},_a=function(t){if(t.tag===13){var r=Mr(t),o=lr(t,r);if(o!==null){var u=zt();kn(o,t,r,u)}Nc(t,r)}},va=function(){return Ae},Ea=function(t,r){var o=Ae;try{return Ae=t,r()}finally{Ae=o}},zi=function(t,r,o){switch(r){case"input":if(Ws(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Ua(u);if(!h)throw Error(n(90));xi(u),Ws(u,h)}}}break;case"textarea":Fi(t,o);break;case"select":r=o.value,r!=null&&Xn(t,!!o.multiple,r,!1)}},ei=Ac,no=Ei;var $y={usingClientEntryPoint:!1,Events:[Ao,cs,Ua,Ln,to,Ac]},zo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qy={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=so(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||jy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{si=Tl.inject(qy),Gt=Tl}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$y,Qt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(r))throw Error(n(200));return By(t,r,null,o)},Qt.createRoot=function(t,r){if(!Lc(t))throw Error(n(299));var o=!1,u="",h=Yf;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Dc(t,1,!1,null,null,o,!1,u,h),t[ir]=r.current,To(t.nodeType===8?t.parentNode:t),new xc(r)},Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=so(r),t=t===null?null:t.stateNode,t},Qt.flushSync=function(t){return Ei(t)},Qt.hydrate=function(t,r,o){if(!El(r))throw Error(n(200));return wl(null,t,r,!0,o)},Qt.hydrateRoot=function(t,r,o){if(!Lc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=Yf;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=Gf(r,null,t,1,o??null,h,!1,p,y),t[ir]=r.current,To(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new vl(r)},Qt.render=function(t,r,o){if(!El(r))throw Error(n(200));return wl(null,t,r,!1,o)},Qt.unmountComponentAtNode=function(t){if(!El(t))throw Error(n(40));return t._reactRootContainer?(Ei(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1},Qt.unstable_batchedUpdates=Ac,Qt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!El(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return wl(t,r,o,!1,u)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var op;function Zy(){if(op)return Fc.exports;op=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Fc.exports=Jy(),Fc.exports}var ap;function e_(){if(ap)return Il;ap=1;var i=Zy();return Il.createRoot=i.createRoot,Il.hydrateRoot=i.hydrateRoot,Il}var t_=e_();function n_(i){return Ie.jsxs("div",{className:"welcome-page wrapper",children:[Ie.jsx("h1",{className:"title bold",children:"WELCOME"}),Ie.jsx("h2",{children:"TO YOUR FAVORITE TASK TRACKER"}),Ie.jsx("p",{children:"YOU WILL HAVE THE CHANCE TO TRACK ATMOST FIVE IMPORTANT TASK AT THE SAME TIME. CURIOUS? TYPE IN YOUR NAME LET GET STARTED."}),Ie.jsxs("label",{children:[Ie.jsx("b",{children:"YOUR NAME:"})," ",Ie.jsx("input",{id:"user-name",type:"text",placeholder:"NickName",name:"name",value:i.user.name,onChange:i.handleChange})]}),Ie.jsx("button",{className:"begin st btn",onClick:i.handleClick,children:"LET'S BEGIN!"})]})}function r_(i){return Ie.jsx("nav",{className:i.mode?"nav dark-mode":"nav",children:Ie.jsxs("button",{className:"nav-btn",onClick:i.toggleMode,children:[i.mode?"Light":"Dark"," Mode"]})})}function i_(i){return Ie.jsxs("div",{className:"task",children:[Ie.jsx("span",{title:i.description,className:"task-descrition",children:i.description.length>15?i.description.slice(0,15)+"...":i.description}),Ie.jsx("span",{title:i.timeFrame,className:"task-timeframe",children:i.timeFrame.length>10?i.timeFrame.slice(0,10)+"...":i.timeFrame}),Ie.jsx("button",{className:"edit st btn",onClick:i.toggleEdit,children:"Edit"}),Ie.jsx("button",{className:"remove st btn",onClick:i.removeTask,children:"Remove"})]})}function s_(i){const e=i.tasks.map(n=>Ie.jsx(i_,{id:n.id,description:n.description,timeFrame:n.timeFrame,Edit:n.isEDit,toggleEdit:()=>i.toggleEdit(n.id),removeTask:()=>i.removeTask(n.id)},n.id));return Ie.jsxs("div",{className:"main wrapper",children:[Ie.jsx("h2",{children:i.name}),Ie.jsx("h1",{className:"title",children:"Today's Tasks"}),Ie.jsx("button",{className:"addtask st btn",onClick:i.addTask,children:"Add Task"}),i.tasks.length>0&&Ie.jsx("div",{className:"task-list",children:e}),i.tasks.length>1&&Ie.jsx("button",{className:"remove-all st btn bold",onClick:i.removeAllTasks,children:"Delete All"})]})}function o_(i){return Ie.jsxs("div",{className:"modify-task wrapper",children:[Ie.jsxs("label",{children:["Description:",Ie.jsx("input",{name:"description",type:"text",placeholder:"NickName",value:i.editedTask.description,onChange:i.handleChange,id:"description",required:!0})]}),Ie.jsxs("label",{children:["Time Range:",Ie.jsx("input",{name:"timeFrame",type:"text",placeholder:"1 to 2 PM",value:i.editedTask.timeFrame,onChange:i.handleChange,id:"timeFrame",required:!0})]}),Ie.jsxs("div",{className:"buttons-wrapper",children:[Ie.jsx("button",{className:"save st btn",onClick:i.editTask,children:"Save"}),Ie.jsx("button",{className:"cancel st btn",onClick:i.handleCancel,children:"Cancel"})]})]})}var Bc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var lp;function a_(){return lp||(lp=1,function(i){(function(){var e={}.hasOwnProperty;function n(){for(var c="",d=0;d<arguments.length;d++){var m=arguments[d];m&&(c=a(c,s(m)))}return c}function s(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return n.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var d="";for(var m in c)e.call(c,m)&&c[m]&&(d=a(d,m));return d}function a(c,d){return d?c?c+" "+d:c+d:c}i.exports?(n.default=n,i.exports=n):window.classNames=n})()}(Bc)),Bc.exports}var l_=a_();const u_=Wy(l_),c_=["xxl","xl","lg","md","sm","xs"],h_="xs",d_=Vn.createContext({prefixes:{},breakpoints:c_,minBreakpoint:h_});function f_(i,e){const{prefixes:n}=Vn.useContext(d_);return i||n[e]||e}const lm=Vn.forwardRef(({bsPrefix:i,fluid:e=!1,as:n="div",className:s,...a},c)=>{const d=f_(i,"container"),m=typeof e=="string"?`-${e}`:"-fluid";return Ie.jsx(n,{ref:c,...a,className:u_(s,e?`${d}${m}`:d)})});lm.displayName="Container";var up={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},p_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],d=i[n++],m=i[n++],_=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},cm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],d=a+1<i.length,m=d?i[a+1]:0,_=a+2<i.length,E=_?i[a+2]:0,S=c>>2,V=(c&3)<<4|m>>4;let U=(m&15)<<2|E>>6,b=E&63;_||(b=64,d||(U=64)),s.push(n[S],n[V],n[U],n[b])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(um(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):p_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const V=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||E==null||V==null)throw new m_;const U=c<<2|m>>4;if(s.push(U),E!==64){const b=m<<4&240|E>>2;if(s.push(b),V!==64){const Y=E<<6&192|V;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class m_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g_=function(i){const e=um(i);return cm.encodeByteArray(e,!0)},Ml=function(i){return g_(i).replace(/\./g,"")},y_=function(i){try{return cm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=()=>__().__FIREBASE_DEFAULTS__,E_=()=>{if(typeof process>"u"||typeof up>"u")return;const i=up.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},w_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&y_(i[1]);return e&&JSON.parse(e)},gh=()=>{try{return v_()||E_()||w_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},T_=i=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},I_=i=>{const e=T_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},hm=()=>{var i;return(i=gh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ml(JSON.stringify(n)),Ml(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C_(){var i;const e=(i=gh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P_(){return!C_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k_(){try{return typeof indexedDB=="object"}catch{return!1}}function V_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="FirebaseError";class Bs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=D_,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dm.prototype.create)}}class dm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?N_(c,s):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new Bs(a,m,s)}}function N_(i,e){return i.replace(x_,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const x_=/\{\$([^}]+)}/g;function Gc(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],d=e[a];if(cp(c)&&cp(d)){if(!Gc(c,d))return!1}else if(c!==d)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function cp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(i){return i&&i._delegate?i._delegate:i}class Xo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new S_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M_(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:O_(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O_(i){return i===Si?void 0:i}function M_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const U_={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},z_=Ve.INFO,B_={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},j_=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=B_[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=z_,this._logHandler=j_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const b_=(i,e)=>e.some(n=>i instanceof n);let hp,dp;function $_(){return hp||(hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q_(){return dp||(dp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pm=new WeakMap,Xc=new WeakMap,mm=new WeakMap,jc=new WeakMap,yh=new WeakMap;function H_(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(jr(i.result)),a()},d=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&pm.set(n,i)}).catch(()=>{}),yh.set(e,i),e}function W_(i){if(Xc.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Xc.set(i,e)}let Yc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Xc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||mm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Q_(i){Yc=i(Yc)}function K_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(bc(this),e,...n);return mm.set(s,e.sort?e.sort():[e]),jr(s)}:q_().includes(i)?function(...e){return i.apply(bc(this),e),jr(pm.get(this))}:function(...e){return jr(i.apply(bc(this),e))}}function G_(i){return typeof i=="function"?K_(i):(i instanceof IDBTransaction&&W_(i),b_(i,$_())?new Proxy(i,Yc):i)}function jr(i){if(i instanceof IDBRequest)return H_(i);if(jc.has(i))return jc.get(i);const e=G_(i);return e!==i&&(jc.set(i,e),yh.set(e,i)),e}const bc=i=>yh.get(i);function X_(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const d=indexedDB.open(i,e),m=jr(d);return s&&d.addEventListener("upgradeneeded",_=>{s(jr(d.result),_.oldVersion,_.newVersion,jr(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),a&&_.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const Y_=["get","getKey","getAll","getAllKeys","count"],J_=["put","add","delete","clear"],$c=new Map;function fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if($c.get(e))return $c.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=J_.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Y_.includes(n)))return;const c=async function(d,...m){const _=this.transaction(d,a?"readwrite":"readonly");let E=_.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[n](...m),a&&_.done]))[0]};return $c.set(e,c),c}Q_(i=>({...i,get:(e,n,s)=>fp(e,n)||i.get(e,n,s),has:(e,n)=>!!fp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ev(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ev(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jc="@firebase/app",pp="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new fm("@firebase/app"),tv="@firebase/app-compat",nv="@firebase/analytics-compat",rv="@firebase/analytics",iv="@firebase/app-check-compat",sv="@firebase/app-check",ov="@firebase/auth",av="@firebase/auth-compat",lv="@firebase/database",uv="@firebase/data-connect",cv="@firebase/database-compat",hv="@firebase/functions",dv="@firebase/functions-compat",fv="@firebase/installations",pv="@firebase/installations-compat",mv="@firebase/messaging",gv="@firebase/messaging-compat",yv="@firebase/performance",_v="@firebase/performance-compat",vv="@firebase/remote-config",Ev="@firebase/remote-config-compat",wv="@firebase/storage",Tv="@firebase/storage-compat",Iv="@firebase/firestore",Sv="@firebase/vertexai",Av="@firebase/firestore-compat",Rv="firebase",Cv="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="[DEFAULT]",Pv={[Jc]:"fire-core",[tv]:"fire-core-compat",[rv]:"fire-analytics",[nv]:"fire-analytics-compat",[sv]:"fire-app-check",[iv]:"fire-app-check-compat",[ov]:"fire-auth",[av]:"fire-auth-compat",[lv]:"fire-rtdb",[uv]:"fire-data-connect",[cv]:"fire-rtdb-compat",[hv]:"fire-fn",[dv]:"fire-fn-compat",[fv]:"fire-iid",[pv]:"fire-iid-compat",[mv]:"fire-fcm",[gv]:"fire-fcm-compat",[yv]:"fire-perf",[_v]:"fire-perf-compat",[vv]:"fire-rc",[Ev]:"fire-rc-compat",[wv]:"fire-gcs",[Tv]:"fire-gcs-compat",[Iv]:"fire-fst",[Av]:"fire-fst-compat",[Sv]:"fire-vertex","fire-js":"fire-js",[Rv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,kv=new Map,eh=new Map;function mp(i,e){try{i.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ul(i){const e=i.name;if(eh.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,i);for(const n of Fl.values())mp(n,i);for(const n of kv.values())mp(n,i);return!0}function Vv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new dm("app","Firebase",Dv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=Cv;function gm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Zc,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw br.create("bad-app-name",{appName:String(a)});if(n||(n=hm()),!n)throw br.create("no-options");const c=Fl.get(a);if(c){if(Gc(n,c.options)&&Gc(s,c.config))return c;throw br.create("duplicate-app",{appName:a})}const d=new F_(a);for(const _ of eh.values())d.addComponent(_);const m=new Nv(n,s,d);return Fl.set(a,m),m}function Lv(i=Zc){const e=Fl.get(i);if(!e&&i===Zc&&hm())return gm();if(!e)throw br.create("no-app",{appName:i});return e}function ks(i,e,n){var s;let a=(s=Pv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(m.join(" "));return}Ul(new Xo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="firebase-heartbeat-database",Mv=1,Yo="firebase-heartbeat-store";let qc=null;function ym(){return qc||(qc=X_(Ov,Mv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(i=>{throw br.create("idb-open",{originalErrorMessage:i.message})})),qc}async function Fv(i){try{const n=(await ym()).transaction(Yo),s=await n.objectStore(Yo).get(_m(i));return await n.done,s}catch(e){if(e instanceof Bs)dr.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function gp(i,e){try{const s=(await ym()).transaction(Yo,"readwrite");await s.objectStore(Yo).put(e,_m(i)),await s.done}catch(n){if(n instanceof Bs)dr.warn(n.message);else{const s=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(s.message)}}}function _m(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=1024,zv=30*24*60*60*1e3;class Bv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bv(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=yp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=zv}),this._storage.overwrite(this._heartbeatsCache))}catch(s){dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yp(),{heartbeatsToSend:s,unsentEntries:a}=jv(this._heartbeatsCache.heartbeats),c=Ml(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return dr.warn(n),""}}}function yp(){return new Date().toISOString().substring(0,10)}function jv(i,e=Uv){const n=[];let s=i.slice();for(const a of i){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),_p(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),_p(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k_()?V_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function _p(i){return Ml(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(i){Ul(new Xo("platform-logger",e=>new Z_(e),"PRIVATE")),Ul(new Xo("heartbeat",e=>new Bv(e),"PRIVATE")),ks(Jc,pp,i),ks(Jc,pp,"esm2017"),ks("fire-js","")}$v("");var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,vm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function A(){}A.prototype=T.prototype,k.D=T.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,D,x){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return T.prototype[D].apply(P,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,T,A){A||(A=0);var P=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)P[D]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(D=0;16>D;++D)P[D]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=k.g[0],A=k.g[1],D=k.g[2];var x=k.g[3],I=T+(x^A&(D^x))+P[0]+3614090360&4294967295;T=A+(I<<7&4294967295|I>>>25),I=x+(D^T&(A^D))+P[1]+3905402710&4294967295,x=T+(I<<12&4294967295|I>>>20),I=D+(A^x&(T^A))+P[2]+606105819&4294967295,D=x+(I<<17&4294967295|I>>>15),I=A+(T^D&(x^T))+P[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=T+(x^A&(D^x))+P[4]+4118548399&4294967295,T=A+(I<<7&4294967295|I>>>25),I=x+(D^T&(A^D))+P[5]+1200080426&4294967295,x=T+(I<<12&4294967295|I>>>20),I=D+(A^x&(T^A))+P[6]+2821735955&4294967295,D=x+(I<<17&4294967295|I>>>15),I=A+(T^D&(x^T))+P[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=T+(x^A&(D^x))+P[8]+1770035416&4294967295,T=A+(I<<7&4294967295|I>>>25),I=x+(D^T&(A^D))+P[9]+2336552879&4294967295,x=T+(I<<12&4294967295|I>>>20),I=D+(A^x&(T^A))+P[10]+4294925233&4294967295,D=x+(I<<17&4294967295|I>>>15),I=A+(T^D&(x^T))+P[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=T+(x^A&(D^x))+P[12]+1804603682&4294967295,T=A+(I<<7&4294967295|I>>>25),I=x+(D^T&(A^D))+P[13]+4254626195&4294967295,x=T+(I<<12&4294967295|I>>>20),I=D+(A^x&(T^A))+P[14]+2792965006&4294967295,D=x+(I<<17&4294967295|I>>>15),I=A+(T^D&(x^T))+P[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=T+(D^x&(A^D))+P[1]+4129170786&4294967295,T=A+(I<<5&4294967295|I>>>27),I=x+(A^D&(T^A))+P[6]+3225465664&4294967295,x=T+(I<<9&4294967295|I>>>23),I=D+(T^A&(x^T))+P[11]+643717713&4294967295,D=x+(I<<14&4294967295|I>>>18),I=A+(x^T&(D^x))+P[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=T+(D^x&(A^D))+P[5]+3593408605&4294967295,T=A+(I<<5&4294967295|I>>>27),I=x+(A^D&(T^A))+P[10]+38016083&4294967295,x=T+(I<<9&4294967295|I>>>23),I=D+(T^A&(x^T))+P[15]+3634488961&4294967295,D=x+(I<<14&4294967295|I>>>18),I=A+(x^T&(D^x))+P[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=T+(D^x&(A^D))+P[9]+568446438&4294967295,T=A+(I<<5&4294967295|I>>>27),I=x+(A^D&(T^A))+P[14]+3275163606&4294967295,x=T+(I<<9&4294967295|I>>>23),I=D+(T^A&(x^T))+P[3]+4107603335&4294967295,D=x+(I<<14&4294967295|I>>>18),I=A+(x^T&(D^x))+P[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=T+(D^x&(A^D))+P[13]+2850285829&4294967295,T=A+(I<<5&4294967295|I>>>27),I=x+(A^D&(T^A))+P[2]+4243563512&4294967295,x=T+(I<<9&4294967295|I>>>23),I=D+(T^A&(x^T))+P[7]+1735328473&4294967295,D=x+(I<<14&4294967295|I>>>18),I=A+(x^T&(D^x))+P[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=T+(A^D^x)+P[5]+4294588738&4294967295,T=A+(I<<4&4294967295|I>>>28),I=x+(T^A^D)+P[8]+2272392833&4294967295,x=T+(I<<11&4294967295|I>>>21),I=D+(x^T^A)+P[11]+1839030562&4294967295,D=x+(I<<16&4294967295|I>>>16),I=A+(D^x^T)+P[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=T+(A^D^x)+P[1]+2763975236&4294967295,T=A+(I<<4&4294967295|I>>>28),I=x+(T^A^D)+P[4]+1272893353&4294967295,x=T+(I<<11&4294967295|I>>>21),I=D+(x^T^A)+P[7]+4139469664&4294967295,D=x+(I<<16&4294967295|I>>>16),I=A+(D^x^T)+P[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=T+(A^D^x)+P[13]+681279174&4294967295,T=A+(I<<4&4294967295|I>>>28),I=x+(T^A^D)+P[0]+3936430074&4294967295,x=T+(I<<11&4294967295|I>>>21),I=D+(x^T^A)+P[3]+3572445317&4294967295,D=x+(I<<16&4294967295|I>>>16),I=A+(D^x^T)+P[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=T+(A^D^x)+P[9]+3654602809&4294967295,T=A+(I<<4&4294967295|I>>>28),I=x+(T^A^D)+P[12]+3873151461&4294967295,x=T+(I<<11&4294967295|I>>>21),I=D+(x^T^A)+P[15]+530742520&4294967295,D=x+(I<<16&4294967295|I>>>16),I=A+(D^x^T)+P[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=T+(D^(A|~x))+P[0]+4096336452&4294967295,T=A+(I<<6&4294967295|I>>>26),I=x+(A^(T|~D))+P[7]+1126891415&4294967295,x=T+(I<<10&4294967295|I>>>22),I=D+(T^(x|~A))+P[14]+2878612391&4294967295,D=x+(I<<15&4294967295|I>>>17),I=A+(x^(D|~T))+P[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=T+(D^(A|~x))+P[12]+1700485571&4294967295,T=A+(I<<6&4294967295|I>>>26),I=x+(A^(T|~D))+P[3]+2399980690&4294967295,x=T+(I<<10&4294967295|I>>>22),I=D+(T^(x|~A))+P[10]+4293915773&4294967295,D=x+(I<<15&4294967295|I>>>17),I=A+(x^(D|~T))+P[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=T+(D^(A|~x))+P[8]+1873313359&4294967295,T=A+(I<<6&4294967295|I>>>26),I=x+(A^(T|~D))+P[15]+4264355552&4294967295,x=T+(I<<10&4294967295|I>>>22),I=D+(T^(x|~A))+P[6]+2734768916&4294967295,D=x+(I<<15&4294967295|I>>>17),I=A+(x^(D|~T))+P[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=T+(D^(A|~x))+P[4]+4149444226&4294967295,T=A+(I<<6&4294967295|I>>>26),I=x+(A^(T|~D))+P[11]+3174756917&4294967295,x=T+(I<<10&4294967295|I>>>22),I=D+(T^(x|~A))+P[2]+718787259&4294967295,D=x+(I<<15&4294967295|I>>>17),I=A+(x^(D|~T))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+x&4294967295}s.prototype.u=function(k,T){T===void 0&&(T=k.length);for(var A=T-this.blockSize,P=this.B,D=this.h,x=0;x<T;){if(D==0)for(;x<=A;)a(this,k,x),x+=this.blockSize;if(typeof k=="string"){for(;x<T;)if(P[D++]=k.charCodeAt(x++),D==this.blockSize){a(this,P),D=0;break}}else for(;x<T;)if(P[D++]=k[x++],D==this.blockSize){a(this,P),D=0;break}}this.h=D,this.o+=T},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;var A=8*this.o;for(T=k.length-8;T<k.length;++T)k[T]=A&255,A/=256;for(this.u(k),k=Array(16),T=A=0;4>T;++T)for(var P=0;32>P;P+=8)k[A++]=this.g[T]>>>P&255;return k};function c(k,T){var A=m;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=T(k)}function d(k,T){this.h=T;for(var A=[],P=!0,D=k.length-1;0<=D;D--){var x=k[D]|0;P&&x==T||(A[D]=x,P=!1)}this.g=A}var m={};function _(k){return-128<=k&&128>k?c(k,function(T){return new d([T|0],0>T?-1:0)}):new d([k|0],0>k?-1:0)}function E(k){if(isNaN(k)||!isFinite(k))return V;if(0>k)return H(E(-k));for(var T=[],A=1,P=0;k>=A;P++)T[P]=k/A|0,A*=4294967296;return new d(T,0)}function S(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return H(S(k.substring(1),T));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(T,8)),P=V,D=0;D<k.length;D+=8){var x=Math.min(8,k.length-D),I=parseInt(k.substring(D,D+x),T);8>x?(x=E(Math.pow(T,x)),P=P.j(x).add(E(I))):(P=P.j(A),P=P.add(E(I)))}return P}var V=_(0),U=_(1),b=_(16777216);i=d.prototype,i.m=function(){if(X(this))return-H(this).m();for(var k=0,T=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*T,T*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(Y(this))return"0";if(X(this))return"-"+H(this).toString(k);for(var T=E(Math.pow(k,6)),A=this,P="";;){var D=Ee(A,T).g;A=ee(A,D.j(T));var x=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=D,Y(A))return x+P;for(;6>x.length;)x="0"+x;P=x+P}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function Y(k){if(k.h!=0)return!1;for(var T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function X(k){return k.h==-1}i.l=function(k){return k=ee(this,k),X(k)?-1:Y(k)?0:1};function H(k){for(var T=k.g.length,A=[],P=0;P<T;P++)A[P]=~k.g[P];return new d(A,~k.h).add(U)}i.abs=function(){return X(this)?H(this):this},i.add=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0,D=0;D<=T;D++){var x=P+(this.i(D)&65535)+(k.i(D)&65535),I=(x>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);P=I>>>16,x&=65535,I&=65535,A[D]=I<<16|x}return new d(A,A[A.length-1]&-2147483648?-1:0)};function ee(k,T){return k.add(H(T))}i.j=function(k){if(Y(this)||Y(k))return V;if(X(this))return X(k)?H(this).j(H(k)):H(H(this).j(k));if(X(k))return H(this.j(H(k)));if(0>this.l(b)&&0>k.l(b))return E(this.m()*k.m());for(var T=this.g.length+k.g.length,A=[],P=0;P<2*T;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<k.g.length;D++){var x=this.i(P)>>>16,I=this.i(P)&65535,Ze=k.i(D)>>>16,Ct=k.i(D)&65535;A[2*P+2*D]+=I*Ct,ae(A,2*P+2*D),A[2*P+2*D+1]+=x*Ct,ae(A,2*P+2*D+1),A[2*P+2*D+1]+=I*Ze,ae(A,2*P+2*D+1),A[2*P+2*D+2]+=x*Ze,ae(A,2*P+2*D+2)}for(P=0;P<T;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=T;P<2*T;P++)A[P]=0;return new d(A,0)};function ae(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function ue(k,T){this.g=k,this.h=T}function Ee(k,T){if(Y(T))throw Error("division by zero");if(Y(k))return new ue(V,V);if(X(k))return T=Ee(H(k),T),new ue(H(T.g),H(T.h));if(X(T))return T=Ee(k,H(T)),new ue(H(T.g),T.h);if(30<k.g.length){if(X(k)||X(T))throw Error("slowDivide_ only works with positive integers.");for(var A=U,P=T;0>=P.l(k);)A=Je(A),P=Je(P);var D=De(A,1),x=De(P,1);for(P=De(P,2),A=De(A,2);!Y(P);){var I=x.add(P);0>=I.l(k)&&(D=D.add(A),x=I),P=De(P,1),A=De(A,1)}return T=ee(k,D.j(T)),new ue(D,T)}for(D=V;0<=k.l(T);){for(A=Math.max(1,Math.floor(k.m()/T.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),x=E(A),I=x.j(T);X(I)||0<I.l(k);)A-=P,x=E(A),I=x.j(T);Y(x)&&(x=U),D=D.add(x),k=ee(k,I)}return new ue(D,k)}i.A=function(k){return Ee(this,k).h},i.and=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)&k.i(P);return new d(A,this.h&k.h)},i.or=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)|k.i(P);return new d(A,this.h|k.h)},i.xor=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)^k.i(P);return new d(A,this.h^k.h)};function Je(k){for(var T=k.g.length+1,A=[],P=0;P<T;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new d(A,k.h)}function De(k,T){var A=T>>5;T%=32;for(var P=k.g.length-A,D=[],x=0;x<P;x++)D[x]=0<T?k.i(x+A)>>>T|k.i(x+A+1)<<32-T:k.i(x+A);return new d(D,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,vm=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=E,d.fromString=S,Ri=d}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var Sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Em,bo,wm,kl,th,Tm,Im,Sm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sl=="object"&&Sl];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,f){if(f)e:{var g=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var L=l[v];if(!(L in g))break e;g=g[L]}l=l[l.length-1],v=g[l],f=f(v),f!=v&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var g=0,v=!1,L={next:function(){if(!v&&g<l.length){var z=g++;return{value:f(z,l[z]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function _(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function E(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function S(l,f,g){return l.call.apply(l.bind,arguments)}function V(l,f,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function U(l,f,g){return U=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:V,U.apply(null,arguments)}function b(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function Y(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,L,z){for(var G=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)G[Fe-2]=arguments[Fe];return f.prototype[L].apply(v,G)}}function X(l){const f=l.length;if(0<f){const g=Array(f);for(let v=0;v<f;v++)g[v]=l[v];return g}return[]}function H(l,f){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(_(v)){const L=l.length||0,z=v.length||0;l.length=L+z;for(let G=0;G<z;G++)l[L+G]=v[G]}else l.push(v)}}class ee{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ae(l){return/^[\s\xa0]*$/.test(l)}function ue(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function Ee(l){return Ee[" "](l),l}Ee[" "]=function(){};var Je=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function De(l,f,g){for(const v in l)f.call(g,l[v],v,l)}function k(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function T(l){const f={};for(const g in l)f[g]=l[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let g,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(g in v)l[g]=v[g];for(let z=0;z<A.length;z++)g=A[z],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function D(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function x(l){m.setTimeout(()=>{throw l},0)}function I(){var l=ce;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ze{constructor(){this.h=this.g=null}add(f,g){const v=Ct.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Ct=new ee(()=>new Pt,l=>l.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,J=!1,ce=new Ze,te=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(N)}};var N=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(g){x(g)}var f=Ct;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}J=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,f),m.removeEventListener("test",g,f)}catch{}return l}();function we(l,f){if(le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Je){e:{try{Ee(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ce[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}Y(we,le);var Ce={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Be(l,f,g,v,L){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=L,this.key=++Oe,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Kn(l){this.src=l,this.g={},this.h=0}Kn.prototype.add=function(l,f,g,v,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var G=mr(l,f,v,L);return-1<G?(f=l[G],g||(f.fa=!1)):(f=new Be(f,this.src,z,!!v,L),f.fa=g,l.push(f)),f};function xi(l,f){var g=f.type;if(g in l.g){var v=l.g[g],L=Array.prototype.indexOf.call(v,f,void 0),z;(z=0<=L)&&Array.prototype.splice.call(v,L,1),z&&(pt(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function mr(l,f,g,v){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==f&&z.capture==!!g&&z.ha==v)return L}return-1}var Xr="closure_lm_"+(1e6*Math.random()|0),Li={};function Hs(l,f,g,v,L){if(Array.isArray(f)){for(var z=0;z<f.length;z++)Hs(l,f[z],g,v,L);return null}return g=Ks(g),l&&l[Le]?l.K(f,g,E(v)?!!v.capture:!!v,L):Ws(l,f,g,!1,v,L)}function Ws(l,f,g,v,L,z){if(!f)throw Error("Invalid event type");var G=E(L)?!!L.capture:!!L,Fe=Mi(l);if(Fe||(l[Xr]=Fe=new Kn(l)),g=Fe.add(f,g,v,G,z),g.proxy)return g;if(v=la(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)ve||(L=G),L===void 0&&(L=!1),l.addEventListener(f.toString(),v,L);else if(l.attachEvent)l.attachEvent(Xn(f.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function la(){function l(g){return f.call(l.src,l.listener,g)}const f=Qs;return l}function Oi(l,f,g,v,L){if(Array.isArray(f))for(var z=0;z<f.length;z++)Oi(l,f[z],g,v,L);else v=E(v)?!!v.capture:!!v,g=Ks(g),l&&l[Le]?(l=l.i,f=String(f).toString(),f in l.g&&(z=l.g[f],g=mr(z,g,v,L),-1<g&&(pt(z[g]),Array.prototype.splice.call(z,g,1),z.length==0&&(delete l.g[f],l.h--)))):l&&(l=Mi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=mr(f,g,v,L)),(g=-1<l?f[l]:null)&&Gn(g))}function Gn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Le])xi(f.i,l);else{var g=l.type,v=l.proxy;f.removeEventListener?f.removeEventListener(g,v,l.capture):f.detachEvent?f.detachEvent(Xn(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=Mi(f))?(xi(g,l),g.h==0&&(g.src=null,f[Xr]=null)):pt(l)}}}function Xn(l){return l in Li?Li[l]:Li[l]="on"+l}function Qs(l,f){if(l.da)l=!0;else{f=new we(f,this);var g=l.listener,v=l.ha||l.src;l.fa&&Gn(l),l=g.call(v,f)}return l}function Mi(l){return l=l[Xr],l instanceof Kn?l:null}var Fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ks(l){return typeof l=="function"?l:(l[Fi]||(l[Fi]=function(f){return l.handleEvent(f)}),l[Fi])}function ot(){j.call(this),this.i=new Kn(this),this.M=this,this.F=null}Y(ot,j),ot.prototype[Le]=!0,ot.prototype.removeEventListener=function(l,f,g,v){Oi(this,l,f,g,v)};function at(l,f){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=f.type||f,typeof f=="string")f=new le(f,l);else if(f instanceof le)f.target=f.target||l;else{var L=f;f=new le(v,l),P(f,L)}if(L=!0,g)for(var z=g.length-1;0<=z;z--){var G=f.g=g[z];L=Yn(G,v,!0,f)&&L}if(G=f.g=l,L=Yn(G,v,!0,f)&&L,L=Yn(G,v,!1,f)&&L,g)for(z=0;z<g.length;z++)G=f.g=g[z],L=Yn(G,v,!1,f)&&L}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],v=0;v<g.length;v++)pt(g[v]);delete l.g[f],l.h--}}this.F=null},ot.prototype.K=function(l,f,g,v){return this.i.add(String(l),f,!1,g,v)},ot.prototype.L=function(l,f,g,v){return this.i.add(String(l),f,!0,g,v)};function Yn(l,f,g,v){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,z=0;z<f.length;++z){var G=f[z];if(G&&!G.da&&G.capture==g){var Fe=G.listener,lt=G.ha||G.src;G.fa&&xi(l.i,G),L=Fe.call(lt,v)!==!1&&L}}return L&&!v.defaultPrevented}function Gs(l,f,g){if(typeof l=="function")g&&(l=U(l,g));else if(l&&typeof l.handleEvent=="function")l=U(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function gr(l){l.g=Gs(()=>{l.g=null,l.i&&(l.i=!1,gr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Yr extends j{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:gr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(l){j.call(this),this.h=l,this.g={}}Y(Jr,j);var Xs=[];function Ys(l){De(l.g,function(f,g){this.g.hasOwnProperty(g)&&Gn(f)},l),l.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),Ys(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=m.JSON.stringify,Zs=m.JSON.parse,eo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Zr(){}Zr.prototype.h=null;function Ui(l){return l.h||(l.h=l.i())}function zi(){}var rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){le.call(this,"d")}Y(xn,le);function Bi(){le.call(this,"c")}Y(Bi,le);var Ln={},to=null;function ei(){return to=to||new ot}Ln.La="serverreachability";function no(l){le.call(this,Ln.La,l)}Y(no,le);function Jn(l){const f=ei();at(f,new no(f))}Ln.STAT_EVENT="statevent";function ro(l,f){le.call(this,Ln.STAT_EVENT,l),this.stat=f}Y(ro,le);function et(l){const f=ei();at(f,new ro(f,l))}Ln.Ma="timingevent";function ji(l,f){le.call(this,Ln.Ma,l),this.size=f}Y(ji,le);function mn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function ti(){this.g=!0}ti.prototype.xa=function(){this.g=!1};function ni(l,f,g,v,L,z){l.info(function(){if(l.g)if(z)for(var G="",Fe=z.split("&"),lt=0;lt<Fe.length;lt++){var Pe=Fe[lt].split("=");if(1<Pe.length){var mt=Pe[0];Pe=Pe[1];var rt=mt.split("_");G=2<=rt.length&&rt[1]=="type"?G+(mt+"="+Pe+"&"):G+(mt+"=redacted&")}}else G=null;else G=z;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+f+`
`+g+`
`+G})}function bi(l,f,g,v,L,z,G){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+f+`
`+g+`
`+z+" "+G})}function gn(l,f,g,v){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+uu(l,g)+(v?" "+v:"")})}function io(l,f){l.info(function(){return"TIMEOUT: "+f})}ti.prototype.info=function(){};function uu(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return Js(g)}catch{return f}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ua={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yn;function ri(){}Y(ri,Zr),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},yn=new ri;function _n(l,f,g,v){this.j=l,this.i=f,this.l=g,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}var so={},qi={};function Hi(l,f,g){l.L=1,l.v=wr(Xt(f)),l.m=g,l.P=!0,oo(l,null)}function oo(l,f){l.F=Date.now(),je(l),l.A=Xt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Ir(g.i,"t",v),l.C=0,g=l.j.J,l.h=new ca,l.g=Pa(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Yr(U(l.Y,l,l.g),l.O)),f=l.U,g=l.g,v=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Xs[0]=L.toString()),L=Xs);for(var z=0;z<L.length;z++){var G=Hs(g,L[z],v||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Jn(),ni(l.i,l.u,l.A,l.l,l.R,l.m)}_n.prototype.ca=function(l){l=l.target;const f=this.M;f&&jt(l)==3?f.j():this.Y(l)},_n.prototype.Y=function(l){try{if(l==this.g)e:{const rt=jt(this.g);var f=this.g.Ba();const an=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||fo(this.g)))){this.J||rt!=4||f==7||(f==8||0>=an?Jn(3):Jn(2)),ii(this);var g=this.g.Z();this.X=g;t:if(ha(this)){var v=fo(this.g);l="";var L=v.length,z=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),yr(this);var G="";break t}this.h.i=new m.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(v[f],{stream:!(z&&f==L-1)});v.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,bi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,lt=this.g;if((Fe=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Fe)){var Pe=Fe;break t}}Pe=null}if(g=Pe)gn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,g);else{this.o=!1,this.s=3,et(12),sn(this),yr(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<G.length;)if(Jt=cu(this,G),Jt==qi){rt==4&&(this.s=4,et(14),g=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==so){this.s=4,et(15),gn(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else gn(this.i,this.l,Jt,null),ao(this,Jt);if(ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||G.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)gn(this.i,this.l,G,"[Invalid Chunked Response]"),sn(this),yr(this);else if(0<G.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),mo(mt),mt.M=!0,et(11))}}else gn(this.i,this.l,G,null),ao(this,G);rt==4&&sn(this),this.o&&!this.J&&(rt==4?ns(this.j,this):(this.o=!1,je(this)))}else Yi(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),sn(this),yr(this)}}}catch{}finally{}};function ha(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cu(l,f){var g=l.C,v=f.indexOf(`
`,g);return v==-1?qi:(g=Number(f.substring(g,v)),isNaN(g)?so:(v+=1,v+g>f.length?qi:(f=f.slice(v,v+g),l.C=v+g,f)))}_n.prototype.cancel=function(){this.J=!0,sn(this)};function je(l){l.S=Date.now()+l.I,da(l,l.I)}function da(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=mn(U(l.ba,l),f)}function ii(l){l.B&&(m.clearTimeout(l.B),l.B=null)}_n.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(io(this.i,this.A),this.L!=2&&(Jn(),et(17)),sn(this),this.s=2,yr(this)):da(this,this.S-l)};function yr(l){l.j.G==0||l.J||ns(l.j,l)}function sn(l){ii(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Ys(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ao(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Mt(g.h,l))){if(!l.K&&Mt(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ts(g),In(g);else break e;es(g),et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=mn(U(g.Za,g),6e3));if(1>=pa(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else rr(g,11)}else if((l.K||g.g==l)&&ts(g),!ae(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let Pe=L[f];if(g.T=Pe[0],Pe=Pe[1],g.G==2)if(Pe[0]=="c"){g.K=Pe[1],g.ia=Pe[2];const mt=Pe[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const rt=Pe[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const an=Pe[5];an!=null&&typeof an=="number"&&0<an&&(v=1.5*an,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Jt=l.g;if(Jt){const hi=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var z=v.h;z.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(lo(z,z.h),z.h=null))}if(v.D){const is=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;is&&(v.ya=is,ze(v.I,v.D,is))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var G=l;if(v.qa=Ca(v,v.J?v.ia:null,v.W),G.K){ma(v.h,G);var Fe=G,lt=v.L;lt&&(Fe.I=lt),Fe.B&&(ii(Fe),je(Fe)),v.g=G}else ci(v);0<g.i.length&&Un(g)}else Pe[0]!="stop"&&Pe[0]!="close"||rr(g,7);else g.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?rr(g,7):wt(g):Pe[0]!="noop"&&g.l&&g.l.ta(Pe),g.v=0)}}Jn(4)}catch{}}var fa=class{constructor(l,f){this.g=l,this.map=f}};function si(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function pa(l){return l.h?1:l.g?l.g.size:0}function Mt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function lo(l,f){l.g?l.g.add(f):l.h=f}function ma(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}si.prototype.cancel=function(){if(this.i=ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ga(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return X(l.i)}function Wi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(_(l)){for(var f=[],g=l.length,v=0;v<g;v++)f.push(l[v]);return f}f=[],g=0;for(v in l)f[g++]=l[v];return f}function Qi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(_(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const v in l)f[g++]=v;return f}}}function _r(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(_(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=Qi(l),v=Wi(l),L=v.length,z=0;z<L;z++)f.call(void 0,v[z],g&&g[z],l)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hu(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),L=null;if(0<=v){var z=l[g].substring(0,v);L=l[g].substring(v+1)}else z=l[g];f(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Zn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zn){this.h=l.h,ai(this,l.j),this.o=l.o,this.g=l.g,vr(this,l.s),this.l=l.l;var f=l.i,g=new On;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Er(this,g),this.m=l.m}else l&&(f=String(l).match(oi))?(this.h=!1,ai(this,f[1]||"",!0),this.o=Ae(f[2]||""),this.g=Ae(f[3]||"",!0),vr(this,f[4]),this.l=Ae(f[5]||"",!0),Er(this,f[6]||"",!0),this.m=Ae(f[7]||"")):(this.h=!1,this.i=new On(null,this.h))}Zn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Tr(f,Ki,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Tr(f,Ki,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Tr(g,g.charAt(0)=="/"?va:_a,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Tr(g,uo)),l.join("")};function Xt(l){return new Zn(l)}function ai(l,f,g){l.j=g?Ae(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function vr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Er(l,f,g){f instanceof On?(l.i=f,Mn(l.i,l.h)):(g||(f=Tr(f,Ea)),l.i=new On(f,l.h))}function ze(l,f,g){l.i.set(f,g)}function wr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ae(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Tr(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,ya),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ya(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ki=/[#\/\?@]/g,_a=/[#\?:]/g,va=/[#\?]/g,Ea=/[#\?@]/g,uo=/#/g;function On(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Et(l){l.g||(l.g=new Map,l.h=0,l.i&&hu(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}i=On.prototype,i.add=function(l,f){Et(this),this.i=null,l=on(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function vn(l,f){Et(l),f=on(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function En(l,f){return Et(l),f=on(l,f),l.g.has(f)}i.forEach=function(l,f){Et(this),this.g.forEach(function(g,v){g.forEach(function(L){l.call(f,L,v,this)},this)},this)},i.na=function(){Et(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){const L=l[v];for(let z=0;z<L.length;z++)g.push(f[v])}return g},i.V=function(l){Et(this);let f=[];if(typeof l=="string")En(this,l)&&(f=f.concat(this.g.get(on(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},i.set=function(l,f){return Et(this),this.i=null,l=on(this,l),En(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Ir(l,f,g){vn(l,f),0<g.length&&(l.i=null,l.g.set(on(l,f),X(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];const z=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var L=z;G[v]!==""&&(L+="="+encodeURIComponent(String(G[v]))),l.push(L)}}return this.i=l.join("&")};function on(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Mn(l,f){f&&!l.j&&(Et(l),l.i=null,l.g.forEach(function(g,v){var L=v.toLowerCase();v!=L&&(vn(this,v),Ir(this,L,g))},l)),l.j=f}function du(l,f){const g=new ti;if(m.Image){const v=new Image;v.onload=b(Bt,g,"TestLoadImage: loaded",!0,f,v),v.onerror=b(Bt,g,"TestLoadImage: error",!1,f,v),v.onabort=b(Bt,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=b(Bt,g,"TestLoadImage: timeout",!1,f,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else f(!1)}function wa(l,f){const g=new ti,v=new AbortController,L=setTimeout(()=>{v.abort(),Bt(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:v.signal}).then(z=>{clearTimeout(L),z.ok?Bt(g,"TestPingServer: ok",!0,f):Bt(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Bt(g,"TestPingServer: error",!1,f)})}function Bt(l,f,g,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(g)}catch{}}function fu(){this.g=new eo}function Ta(l,f,g){const v=g||"";try{_r(l,function(L,z){let G=L;E(L)&&(G=Js(L)),f.push(v+z+"="+encodeURIComponent(G))})}catch(L){throw f.push(v+"type="+encodeURIComponent("_badmap")),L}}function er(l){this.l=l.Ub||null,this.j=l.eb||!1}Y(er,Zr),er.prototype.g=function(){return new li(this.l,this.j)},er.prototype.i=function(l){return function(){return l}}({});function li(l,f){ot.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(li,ot),i=li.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Tn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ia(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ia(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?wn(this):Tn(this),this.readyState==3&&Ia(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,wn(this))},i.Qa=function(l){this.g&&(this.response=l,wn(this))},i.ga=function(){this.g&&wn(this)};function wn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Tn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Tn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function tr(l){let f="";return De(l,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function Sr(l,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=tr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,f,g))}function He(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(He,ot);var pu=/^https?$/i,co=["POST","PUT"];i=He.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yn.g(),this.v=this.o?Ui(this.o):Ui(yn),this.g.onreadystatechange=U(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(z){ui(this,z);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)g.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const z of v.keys())g.set(z,v.get(z));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(co,f,void 0))||v||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,G]of g)this.g.setRequestHeader(z,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xi(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){ui(this,z)}};function ui(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Gi(l),Yt(l)}function Gi(l){l.A||(l.A=!0,at(l,"complete"),at(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,at(this,"complete"),at(this,"abort"),Yt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),He.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},i.bb=function(){ho(this)};function ho(l){if(l.h&&typeof d<"u"&&(!l.v[1]||jt(l)!=4||l.Z()!=2)){if(l.u&&jt(l)==4)Gs(l.Ea,0,l);else if(at(l,"readystatechange"),jt(l)==4){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=G===0){var L=String(l.D).match(oi)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),v=!pu.test(L?L.toLowerCase():"")}g=v}if(g)at(l,"complete"),at(l,"success");else{l.m=6;try{var z=2<jt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Gi(l)}}finally{Yt(l)}}}}function Yt(l,f){if(l.g){Xi(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||at(l,"ready");try{g.onreadystatechange=v}catch{}}}function Xi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function jt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Zs(f)}};function fo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(l){const f={};l=(l.g&&2<=jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(ae(l[v]))continue;var g=D(l[v]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=f[L]||[];f[L]=z,z.push(g)}k(f,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fn(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function po(l){this.Aa=0,this.i=[],this.j=new ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fn("baseRetryDelayMs",5e3,l),this.cb=Fn("retryDelaySeedMs",1e4,l),this.Wa=Fn("forwardChannelMaxRetries",2,l),this.wa=Fn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new si(l&&l.concurrentRequestLimit),this.Da=new fu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=po.prototype,i.la=8,i.G=1,i.connect=function(l,f,g,v){et(0),this.W=l,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Ca(this,null,this.W),Un(this)};function wt(l){if(Ji(l),l.G==3){var f=l.U++,g=Xt(l.I);if(ze(g,"SID",l.K),ze(g,"RID",f),ze(g,"TYPE","terminate"),nr(l,g),f=new _n(l,l.j,f),f.L=2,f.v=wr(Xt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=f.v,g=!0),g||(f.g=Pa(f.j,null),f.g.ea(f.v)),f.F=Date.now(),je(f)}Ra(l)}function In(l){l.g&&(mo(l),l.g.cancel(),l.g=null)}function Ji(l){In(l),l.u&&(m.clearTimeout(l.u),l.u=null),ts(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Un(l){if(!Gt(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ue||te(),J||(Ue(),J=!0),ce.add(f,l),l.B=0}}function mu(l,f){return pa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=mn(U(l.Ga,l,f),Aa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new _n(this,this.j,l);let z=this.o;if(this.S&&(z?(z=T(z),P(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ar(this,L,f),g=Xt(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),nr(this,g),z&&(this.O?f="headers="+encodeURIComponent(String(tr(z)))+"&"+f:this.m&&Sr(g,this.m,z)),lo(this.h,L),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",f),ze(g,"SID","null"),L.T=!0,Hi(L,g,null)):Hi(L,g,f),this.G=2}}else this.G==3&&(l?Zi(this,l):this.i.length==0||Gt(this.h)||Zi(this))};function Zi(l,f){var g;f?g=f.l:g=l.U++;const v=Xt(l.I);ze(v,"SID",l.K),ze(v,"RID",g),ze(v,"AID",l.T),nr(l,v),l.m&&l.o&&Sr(v,l.m,l.o),g=new _n(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ar(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),lo(l.h,g),Hi(g,v,f)}function nr(l,f){l.H&&De(l.H,function(g,v){ze(f,v,g)}),l.l&&_r({},function(g,v){ze(f,v,g)})}function Ar(l,f,g){g=Math.min(l.i.length,g);var v=l.l?U(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const G=["count="+g];z==-1?0<g?(z=L[0].g,G.push("ofs="+z)):z=0:G.push("ofs="+z);let Fe=!0;for(let lt=0;lt<g;lt++){let Pe=L[lt].g;const mt=L[lt].map;if(Pe-=z,0>Pe)z=Math.max(0,L[lt].g-100),Fe=!1;else try{Ta(mt,G,"req"+Pe+"_")}catch{v&&v(mt)}}if(Fe){v=G.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,v}function ci(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ue||te(),J||(Ue(),J=!0),ce.add(f,l),l.v=0}}function es(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=mn(U(l.Fa,l),Aa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Sa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=mn(U(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),In(this),Sa(this))};function mo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Sa(l){l.g=new _n(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Xt(l.qa);ze(f,"RID","rpc"),ze(f,"SID",l.K),ze(f,"AID",l.T),ze(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(f,"TO",l.ja),ze(f,"TYPE","xmlhttp"),nr(l,f),l.m&&l.o&&Sr(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=wr(Xt(f)),g.m=null,g.P=!0,oo(g,l)}i.Za=function(){this.C!=null&&(this.C=null,In(this),es(this),et(19))};function ts(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ns(l,f){var g=null;if(l.g==f){ts(l),mo(l),l.g=null;var v=2}else if(Mt(l.h,f))g=f.D,ma(l.h,f),v=1;else return;if(l.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;v=ei(),at(v,new ji(v,g)),Un(l)}else ci(l);else if(L=f.s,L==3||L==0&&0<f.X||!(v==1&&mu(l,f)||v==2&&es(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),L){case 1:rr(l,5);break;case 4:rr(l,10);break;case 3:rr(l,6);break;default:rr(l,2)}}}function Aa(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function rr(l,f){if(l.j.info("Error code "+f),f==2){var g=U(l.fb,l),v=l.Xa;const L=!v;v=new Zn(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ai(v,"https"),wr(v),L?du(v.toString(),g):wa(v.toString(),g)}else et(2);l.G=0,l.l&&l.l.sa(f),Ra(l),Ji(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Ra(l){if(l.G=0,l.ka=[],l.l){const f=ga(l.h);(f.length!=0||l.i.length!=0)&&(H(l.ka,f),H(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function Ca(l,f,g){var v=g instanceof Zn?Xt(g):new Zn(g);if(v.g!="")f&&(v.g=f+"."+v.g),vr(v,v.s);else{var L=m.location;v=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var z=new Zn(null);v&&ai(z,v),f&&(z.g=f),L&&vr(z,L),g&&(z.l=g),v=z}return g=l.D,f=l.ya,g&&f&&ze(v,g,f),ze(v,"VER",l.la),nr(l,v),v}function Pa(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new He(new er({eb:g})):new He(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function go(){}i=go.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function rs(){}rs.prototype.g=function(l,f){return new Ft(l,f)};function Ft(l,f){ot.call(this),this.g=new po(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ae(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ae(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new zn(this)}Y(Ft,ot),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){wt(this.g)},Ft.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Js(l),l=g);f.i.push(new fa(f.Ya++,l)),f.G==3&&Un(f)},Ft.prototype.N=function(){this.g.l=null,delete this.j,wt(this.g),delete this.g,Ft.aa.N.call(this)};function ka(l){xn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}Y(ka,xn);function Va(){Bi.call(this),this.status=1}Y(Va,Bi);function zn(l){this.g=l}Y(zn,go),zn.prototype.ua=function(){at(this.g,"a")},zn.prototype.ta=function(l){at(this.g,new ka(l))},zn.prototype.sa=function(l){at(this.g,new Va)},zn.prototype.ra=function(){at(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Sm=function(){return new rs},Im=function(){return ei()},Tm=Ln,th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,kl=$i,ua.COMPLETE="complete",wm=ua,zi.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",ot.prototype.listen=ot.prototype.K,bo=zi,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Em=He}).apply(typeof Sl<"u"?Sl:typeof self<"u"?self:typeof window<"u"?window:{});const Ep="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new fm("@firebase/firestore");function As(){return Pi.logLevel}function ne(i,...e){if(Pi.logLevel<=Ve.DEBUG){const n=e.map(_h);Pi.debug(`Firestore (${js}): ${i}`,...n)}}function fr(i,...e){if(Pi.logLevel<=Ve.ERROR){const n=e.map(_h);Pi.error(`Firestore (${js}): ${i}`,...n)}}function Ns(i,...e){if(Pi.logLevel<=Ve.WARN){const n=e.map(_h);Pi.warn(`Firestore (${js}): ${i}`,...n)}}function _h(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(i="Unexpected state"){const e=`FIRESTORE (${js}) INTERNAL ASSERTION FAILED: `+i;throw fr(e),new Error(e)}function Me(i,e){i||ge()}function _e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class Hv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Wv{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let s=this.i;const a=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ci,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const _=c;e.enqueueRetryable(async()=>{await _.promise,await a(this.currentUser)})},m=_=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ci)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string"),new Am(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Lt(e)}}class Qv{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Kv{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Qv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const s=c=>{c.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new Gv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Yv(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Re(i,e){return i<e?-1:i>e?1:0}function xs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new dt(0,0))}static max(){return new ye(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,s){n===void 0?n=0:n>e.length&&ge(),s===void 0?s=e.length-n:s>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Jo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jo?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=e.get(a),d=n.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Qe extends Jo{construct(e,n,s){return new Qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const Jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Jo{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return Jv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new he(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new he(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[a+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new he(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(s+=m,a++):(c(),a++)}if(c(),d)throw new he(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}function Zv(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=ye.fromTimestamp(s===1e9?new dt(n+1,0):new dt(n,s));return new Hr(a,pe.empty(),e)}function e0(i){return new Hr(i.readTime,i.key,-1)}class Hr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(ye.min(),pe.empty(),-1)}static max(){return new Hr(ye.max(),pe.empty(),-1)}}function t0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(i.documentKey,e.documentKey),n!==0?n:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==n0)throw i;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,s)=>{n(e)})}static reject(e){return new B((n,s)=>{s(e)})}static waitFor(e){return new B((n,s)=>{let a=0,c=0,d=!1;e.forEach(m=>{++a,m.next(()=>{++c,d&&c===a&&n()},_=>s(_))}),d=!0,c===a&&n()})}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next(a=>a?B.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new B((s,a)=>{const c=e.length,d=new Array(c);let m=0;for(let _=0;_<c;_++){const E=_;n(e[E]).next(S=>{d[E]=S,++m,m===c&&s(d)},S=>a(S))}})}static doWhile(e,n){return new B((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function i0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $s(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gl.oe=-1;function Xl(i){return i==null}function zl(i){return i===0&&1/i==-1/0}function s0(i){return typeof i=="number"&&Number.isInteger(i)&&!zl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=wp(e)),e=a0(i.get(n),e);return wp(e)}function a0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function wp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ki(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Cm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??St.RED,this.left=a??St.EMPTY,this.right=c??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new St(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return St.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,s,a,c){return this}insert(e,n,s){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ip(this.data.getIterator())}getIteratorFrom(e){return new Ip(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Ip{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new ft(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Pm("Invalid base64 string: "+c):c}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const l0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(i){if(Me(!!i),typeof i=="string"){let e=0;const n=l0.exec(i);if(Me(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Qr(i){return typeof i=="string"?Rt.fromBase64String(i):Rt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yl(i){const e=i.mapValue.fields.__previous_value__;return vh(e)?Yl(e):e}function Zo(i){const e=Wr(i.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n,s,a,c,d,m,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=E}}class ea{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vh(i)?4:h0(i)?9007199254740991:c0(i)?10:11:ge()}function Wn(i,e){if(i===e)return!0;const n=Kr(i);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Zo(i).isEqual(Zo(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=Wr(a.timestampValue),m=Wr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Qr(a.bytesValue).isEqual(Qr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=nt(a.doubleValue),m=nt(c.doubleValue);return d===m?zl(d)===zl(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return xs(i.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Tp(d)!==Tp(m))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(m[_]===void 0||!Wn(d[_],m[_])))return!1;return!0}(i,e);default:return ge()}}function ta(i,e){return(i.values||[]).find(n=>Wn(n,e))!==void 0}function Ls(i,e){if(i===e)return 0;const n=Kr(i),s=Kr(e);if(n!==s)return Re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(c,d){const m=nt(c.integerValue||c.doubleValue),_=nt(d.integerValue||d.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(i,e);case 3:return Sp(i.timestampValue,e.timestampValue);case 4:return Sp(Zo(i),Zo(e));case 5:return Re(i.stringValue,e.stringValue);case 6:return function(c,d){const m=Qr(c),_=Qr(d);return m.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),_=d.split("/");for(let E=0;E<m.length&&E<_.length;E++){const S=Re(m[E],_[E]);if(S!==0)return S}return Re(m.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Re(nt(c.latitude),nt(d.latitude));return m!==0?m:Re(nt(c.longitude),nt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Ap(i.arrayValue,e.arrayValue);case 10:return function(c,d){var m,_,E,S;const V=c.fields||{},U=d.fields||{},b=(m=V.value)===null||m===void 0?void 0:m.arrayValue,Y=(_=U.value)===null||_===void 0?void 0:_.arrayValue,X=Re(((E=b==null?void 0:b.values)===null||E===void 0?void 0:E.length)||0,((S=Y==null?void 0:Y.values)===null||S===void 0?void 0:S.length)||0);return X!==0?X:Ap(b,Y)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===Rl.mapValue&&d===Rl.mapValue)return 0;if(c===Rl.mapValue)return 1;if(d===Rl.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),E=d.fields||{},S=Object.keys(E);_.sort(),S.sort();for(let V=0;V<_.length&&V<S.length;++V){const U=Re(_[V],S[V]);if(U!==0)return U;const b=Ls(m[_[V]],E[S[V]]);if(b!==0)return b}return Re(_.length,S.length)}(i.mapValue,e.mapValue);default:throw ge()}}function Sp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const n=Wr(i),s=Wr(e),a=Re(n.seconds,s.seconds);return a!==0?a:Re(n.nanos,s.nanos)}function Ap(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Ls(n[a],s[a]);if(c)return c}return Re(n.length,s.length)}function Os(i){return nh(i)}function nh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Wr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Qr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return pe.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=nh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of s)c?c=!1:a+=",",a+=`${d}:${nh(n.fields[d])}`;return a+"}"}(i.mapValue):ge()}function Vl(i){switch(Kr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yl(i);return e?16+Vl(e):16;case 5:return 2*i.stringValue.length;case 6:return Qr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Vl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return ki(s.fields,(c,d)=>{a+=c.length+Vl(d)}),a}(i.mapValue);default:throw ge()}}function rh(i){return!!i&&"integerValue"in i}function Eh(i){return!!i&&"arrayValue"in i}function Rp(i){return!!i&&"nullValue"in i}function Cp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Dl(i){return!!i&&"mapValue"in i}function c0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Wo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ki(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Wo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function h0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(n)}setAll(e){let n=At.emptyPath(),s={},a=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,s,a),s={},a=[],n=m.popLast()}d?s[m.lastSegment()]=Wo(d):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Dl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){ki(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new pn(Wo(this.value))}}function km(i){const e=[];return ki(i.fields,(n,s)=>{const a=new At([n]);if(Dl(s)){const c=km(s.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,s,a,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Ot(e,0,ye.min(),ye.min(),ye.min(),pn.empty(),0)}static newFoundDocument(e,n,s,a){return new Ot(e,1,n,ye.min(),s,a,0)}static newNoDocument(e,n){return new Ot(e,2,n,ye.min(),ye.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,ye.min(),ye.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.position=e,this.inclusive=n}}function Pp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(c.field.isKeyField()?s=pe.comparator(pe.fromName(d.referenceValue),n.key):s=Ls(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function kp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Wn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function d0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{}class ht extends Vm{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new p0(e,n,s):n==="array-contains"?new y0(e,s):n==="in"?new _0(e,s):n==="not-in"?new v0(e,s):n==="array-contains-any"?new E0(e,s):new ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new m0(e,s):new g0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends Vm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qn(e,n)}matches(e){return Dm(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dm(i){return i.op==="and"}function Nm(i){return f0(i)&&Dm(i)}function f0(i){for(const e of i.filters)if(e instanceof Qn)return!1;return!0}function ih(i){if(i instanceof ht)return i.field.canonicalString()+i.op.toString()+Os(i.value);if(Nm(i))return i.filters.map(e=>ih(e)).join(",");{const e=i.filters.map(n=>ih(n)).join(",");return`${i.op}(${e})`}}function xm(i,e){return i instanceof ht?function(s,a){return a instanceof ht&&s.op===a.op&&s.field.isEqual(a.field)&&Wn(s.value,a.value)}(i,e):i instanceof Qn?function(s,a){return a instanceof Qn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,d,m)=>c&&xm(d,a.filters[m]),!0):!1}(i,e):void ge()}function Lm(i){return i instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Os(n.value)}`}(i):i instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Lm).join(" ,")+"}"}(i):"Filter"}class p0 extends ht{constructor(e,n,s){super(e,n,s),this.key=pe.fromName(s.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class m0 extends ht{constructor(e,n){super(e,"in",n),this.keys=Om("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g0 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Om("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Om(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>pe.fromName(s.referenceValue))}class y0 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eh(n)&&ta(n.arrayValue,this.value)}}class _0 extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ta(this.value.arrayValue,n)}}class v0 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ta(this.value.arrayValue,n)}}class E0 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ta(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n=null,s=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Vp(i,e=null,n=[],s=[],a=null,c=null,d=null){return new w0(i,e,n,s,a,c,d)}function wh(i){const e=_e(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ih(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Os(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Os(s)).join(",")),e.ue=n}return e.ue}function Th(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!d0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!xm(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!kp(i.startAt,e.startAt)&&kp(i.endAt,e.endAt)}function sh(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n=null,s=[],a=[],c=null,d="F",m=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function T0(i,e,n,s,a,c,d,m){return new Jl(i,e,n,s,a,c,d,m)}function Ih(i){return new Jl(i)}function Dp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function I0(i){return i.collectionGroup!==null}function Qo(i){const e=_e(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new ft(At.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new jl(c,s))}),n.has(At.keyField().canonicalString())||e.ce.push(new jl(At.keyField(),s))}return e.ce}function qn(i){const e=_e(i);return e.le||(e.le=S0(e,Qo(i))),e.le}function S0(i,e){if(i.limitType==="F")return Vp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new jl(a.field,c)});const n=i.endAt?new Bl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Bl(i.startAt.position,i.startAt.inclusive):null;return Vp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function oh(i,e,n){return new Jl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Zl(i,e){return Th(qn(i),qn(e))&&i.limitType===e.limitType}function Mm(i){return`${wh(qn(i))}|lt:${i.limitType}`}function Rs(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Lm(a)).join(", ")}]`),Xl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Os(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Os(a)).join(",")),`Target(${s})`}(qn(i))}; limitType=${i.limitType})`}function eu(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):pe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Qo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(d,m,_){const E=Pp(d,m,_);return d.inclusive?E<=0:E<0}(s.startAt,Qo(s),a)||s.endAt&&!function(d,m,_){const E=Pp(d,m,_);return d.inclusive?E>=0:E>0}(s.endAt,Qo(s),a))}(i,e)}function A0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Fm(i){return(e,n)=>{let s=!1;for(const a of Qo(i)){const c=R0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function R0(i,e,n){const s=i.field.isKeyField()?pe.comparator(e.key,n.key):function(c,d,m){const _=d.data.field(c),E=m.data.field(c);return _!==null&&E!==null?Ls(_,E):ge()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Cm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Xe(pe.comparator);function pr(){return C0}const Um=new Xe(pe.comparator);function $o(...i){let e=Um;for(const n of i)e=e.insert(n.key,n);return e}function zm(i){let e=Um;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ai(){return Ko()}function Bm(){return Ko()}function Ko(){return new Vi(i=>i.toString(),(i,e)=>i.isEqual(e))}const P0=new Xe(pe.comparator),k0=new ft(pe.comparator);function Se(...i){let e=k0;for(const n of i)e=e.add(n);return e}const V0=new ft(Re);function D0(){return V0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(e)?"-0":e}}function jm(i){return{integerValue:""+i}}function N0(i,e){return s0(e)?jm(e):Sh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this._=void 0}}function x0(i,e,n){return i instanceof bl?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&vh(c)&&(c=Yl(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,e):i instanceof na?$m(i,e):i instanceof ra?qm(i,e):function(a,c){const d=bm(a,c),m=Np(d)+Np(a.Pe);return rh(d)&&rh(a.Pe)?jm(m):Sh(a.serializer,m)}(i,e)}function L0(i,e,n){return i instanceof na?$m(i,e):i instanceof ra?qm(i,e):n}function bm(i,e){return i instanceof $l?function(s){return rh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class bl extends tu{}class na extends tu{constructor(e){super(),this.elements=e}}function $m(i,e){const n=Hm(e);for(const s of i.elements)n.some(a=>Wn(a,s))||n.push(s);return{arrayValue:{values:n}}}class ra extends tu{constructor(e){super(),this.elements=e}}function qm(i,e){let n=Hm(e);for(const s of i.elements)n=n.filter(a=>!Wn(a,s));return{arrayValue:{values:n}}}class $l extends tu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Np(i){return nt(i.integerValue||i.doubleValue)}function Hm(i){return Eh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function O0(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof na&&a instanceof na||s instanceof ra&&a instanceof ra?xs(s.elements,a.elements,Wn):s instanceof $l&&a instanceof $l?Wn(s.Pe,a.Pe):s instanceof bl&&a instanceof bl}(i.transform,e.transform)}class M0{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class nu{}function Wm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ah(i.key,Nn.none()):new ia(i.key,i.data,Nn.none());{const n=i.data,s=pn.empty();let a=new ft(At.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),a=a.add(c)}return new Di(i.key,s,new Dn(a.toArray()),Nn.none())}}function F0(i,e,n){i instanceof ia?function(a,c,d){const m=a.value.clone(),_=Lp(a.fieldTransforms,c,d.transformResults);m.setAll(_),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Di?function(a,c,d){if(!Nl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Lp(a.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(Qm(a)),_.setAll(m),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(i,e,n):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Go(i,e,n,s){return i instanceof ia?function(c,d,m,_){if(!Nl(c.precondition,d))return m;const E=c.value.clone(),S=Op(c.fieldTransforms,_,d);return E.setAll(S),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof Di?function(c,d,m,_){if(!Nl(c.precondition,d))return m;const E=Op(c.fieldTransforms,_,d),S=d.data;return S.setAll(Qm(c)),S.setAll(E),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(V=>V.field))}(i,e,n,s):function(c,d,m){return Nl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function U0(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=bm(s.transform,a||null);c!=null&&(n===null&&(n=pn.empty()),n.set(s.field,c))}return n||null}function xp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&xs(s,a,(c,d)=>O0(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ia extends nu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Di extends nu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Qm(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Lp(i,e,n){const s=new Map;Me(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],d=c.transform,m=e.data.field(c.field);s.set(c.field,L0(d,m,n[a]))}return s}function Op(i,e,n){const s=new Map;for(const a of i){const c=a.transform,d=n.data.field(a.field);s.set(a.field,x0(c,d,e))}return s}class Ah extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z0 extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&F0(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Bm();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(a.key)?null:m;const _=Wm(d,m);_!==null&&s.set(a.key,_),d.isValidDocument()||d.convertToNoDocument(ye.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(n,s)=>xp(n,s))&&xs(this.baseMutations,e.baseMutations,(n,s)=>xp(n,s))}}class Rh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Me(e.mutations.length===s.length);let a=function(){return P0}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,s[d].version);return new Rh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,ke;function $0(i){switch(i){default:return ge();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function Km(i){if(i===void 0)return fr("GRPC error has no .code"),Q.UNKNOWN;switch(i){case st.OK:return Q.OK;case st.CANCELLED:return Q.CANCELLED;case st.UNKNOWN:return Q.UNKNOWN;case st.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case st.INTERNAL:return Q.INTERNAL;case st.UNAVAILABLE:return Q.UNAVAILABLE;case st.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case st.NOT_FOUND:return Q.NOT_FOUND;case st.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case st.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case st.ABORTED:return Q.ABORTED;case st.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case st.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case st.DATA_LOSS:return Q.DATA_LOSS;default:return ge()}}(ke=st||(st={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Ri([4294967295,4294967295],0);function Mp(i){const e=q0().encode(i),n=new vm;return n.update(e),new Uint8Array(n.digest())}function Fp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ri([n,s],0),new Ri([a,c],0)]}class Ch{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(s<0)throw new qo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ri.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Ri.fromNumber(s)));return a.compare(H0)===1&&(a=new Ri([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Mp(e),[s,a]=Fp(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);if(!this.de(d))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ch(c,a,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Te===0)return;const n=Mp(e),[s,a]=Fp(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ru(ye.min(),a,new Xe(Re),pr(),Se())}}class sa{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new sa(s,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class Gm{constructor(e,n){this.targetId=e,this.me=n}}class Xm{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Up{constructor(){this.fe=0,this.ge=zp(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),s=Se();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:ge()}}),new sa(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=zp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class W0{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=Cl(),this.Qe=Cl(),this.Ke=new Xe(Re)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(sh(c))if(s===0){const d=new pe(c.path);this.We(n,d,Ot.newNoDocument(d,ye.min()))}else Me(s===1);else{const d=this.Ze(n);if(d!==s){const m=this.Xe(e),_=m?this.et(m,e,d):1;if(_!==0){this.He(n);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let d,m;try{d=Qr(s).toUint8Array()}catch(_){if(_ instanceof Pm)return Ns("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new Ch(d,a,c)}catch(_){return Ns(_ instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const d=this.Le.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&sh(m.target)){const _=new pe(m.target.path);this.st(_).has(d)||this.ot(d,_)||this.We(d,_,Ot.newNoDocument(_,e))}c.be&&(n.set(d,c.ve()),c.Ce())}});let s=Se();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(_=>{const E=this.Ye(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new ru(e,n,this.Ke,this.ke,s);return this.ke=pr(),this.qe=Cl(),this.Qe=Cl(),this.Ke=new Xe(Re),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Up,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new ft(Re),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(Re),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Up),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cl(){return new Xe(pe.comparator)}function zp(){return new Xe(pe.comparator)}const Q0={asc:"ASCENDING",desc:"DESCENDING"},K0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G0={and:"AND",or:"OR"};class X0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ah(i,e){return i.useProto3Json||Xl(e)?e:{value:e}}function ql(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ym(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Y0(i,e){return ql(i,e.toTimestamp())}function Hn(i){return Me(!!i),ye.fromTimestamp(function(n){const s=Wr(n);return new dt(s.seconds,s.nanos)}(i))}function Ph(i,e){return lh(i,e).canonicalString()}function lh(i,e){const n=function(a){return new Qe(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Jm(i){const e=Qe.fromString(i);return Me(rg(e)),e}function uh(i,e){return Ph(i.databaseId,e.path)}function Hc(i,e){const n=Jm(e);if(n.get(1)!==i.databaseId.projectId)throw new he(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new pe(eg(n))}function Zm(i,e){return Ph(i.databaseId,e)}function J0(i){const e=Jm(i);return e.length===4?Qe.emptyPath():eg(e)}function ch(i){return new Qe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function eg(i){return Me(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Bp(i,e,n){return{name:uh(i,e),fields:n.value.mapValue.fields}}function Z0(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,S){return E.useProto3Json?(Me(S===void 0||typeof S=="string"),Rt.fromBase64String(S||"")):(Me(S===void 0||S instanceof Buffer||S instanceof Uint8Array),Rt.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const S=E.code===void 0?Q.UNKNOWN:Km(E.code);return new he(S,E.message||"")}(d);n=new Xm(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Hc(i,s.document.name),c=Hn(s.document.updateTime),d=s.document.createTime?Hn(s.document.createTime):ye.min(),m=new pn({mapValue:{fields:s.document.fields}}),_=Ot.newFoundDocument(a,c,d,m),E=s.targetIds||[],S=s.removedTargetIds||[];n=new xl(E,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Hc(i,s.document),c=s.readTime?Hn(s.readTime):ye.min(),d=Ot.newNoDocument(a,c),m=s.removedTargetIds||[];n=new xl([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Hc(i,s.document),c=s.removedTargetIds||[];n=new xl([],c,a,null)}else{if(!("filter"in e))return ge();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,d=new b0(a,c),m=s.targetId;n=new Gm(m,d)}}return n}function eE(i,e){let n;if(e instanceof ia)n={update:Bp(i,e.key,e.value)};else if(e instanceof Ah)n={delete:uh(i,e.key)};else if(e instanceof Di)n={update:Bp(i,e.key,e.data),updateMask:uE(e.fieldMask)};else{if(!(e instanceof z0))return ge();n={verify:uh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof bl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof na)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ra)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $l)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw ge()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:Y0(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ge()}(i,e.precondition)),n}function tE(i,e){return i&&i.length>0?(Me(e!==void 0),i.map(n=>function(a,c){let d=a.updateTime?Hn(a.updateTime):Hn(c);return d.isEqual(ye.min())&&(d=Hn(c)),new M0(d,a.transformResults||[])}(n,e))):[]}function nE(i,e){return{documents:[Zm(i,e.path)]}}function rE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Zm(i,a);const c=function(E){if(E.length!==0)return ng(Qn.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(E){if(E.length!==0)return E.map(S=>function(U){return{field:Cs(U.field),direction:oE(U.dir)}}(S))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=ah(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:n,parent:a}}function iE(i){let e=J0(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Me(s===1);const S=n.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=function(V){const U=tg(V);return U instanceof Qn&&Nm(U)?U.getFilters():[U]}(n.where));let d=[];n.orderBy&&(d=function(V){return V.map(U=>function(Y){return new jl(Ps(Y.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(U))}(n.orderBy));let m=null;n.limit&&(m=function(V){let U;return U=typeof V=="object"?V.value:V,Xl(U)?null:U}(n.limit));let _=null;n.startAt&&(_=function(V){const U=!!V.before,b=V.values||[];return new Bl(b,U)}(n.startAt));let E=null;return n.endAt&&(E=function(V){const U=!V.before,b=V.values||[];return new Bl(b,U)}(n.endAt)),T0(e,a,d,c,m,"F",_,E)}function sE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ps(n.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ps(n.unaryFilter.field);return ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ps(n.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ps(n.unaryFilter.field);return ht.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(i):i.fieldFilter!==void 0?function(n){return ht.create(Ps(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(s=>tg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(i):ge()}function oE(i){return Q0[i]}function aE(i){return K0[i]}function lE(i){return G0[i]}function Cs(i){return{fieldPath:i.canonicalString()}}function Ps(i){return At.fromServerFormat(i.fieldPath)}function ng(i){return i instanceof ht?function(n){if(n.op==="=="){if(Cp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(Rp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(Rp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:aE(n.op),value:n.value}}}(i):i instanceof Qn?function(n){const s=n.getFilters().map(a=>ng(a));return s.length===1?s[0]:{compositeFilter:{op:lE(n.op),filters:s}}}(i):ge()}function uE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,s,a,c=ye.min(),d=ye.min(),m=Rt.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.ht=e}}function hE(i){const e=iE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ln=new fE}addToCollectionParentIndex(e,n){return this.ln.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Hr.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class fE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new ft(Qe.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ft(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ms(0)}static Qn(){return new Ms(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp([i,e],[n,s]){const a=Re(i,n);return a===0?Re(e,s):a}class pE{constructor(e){this.Gn=e,this.buffer=new ft(bp),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();bp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$s(n)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await bs(n)}await this.Yn(3e5)})}}class gE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Gl.oe);const s=new pE(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(jp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,d,m,_,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(V=>(V>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${V}`),a=this.params.maximumSequenceNumbersToCollect):a=V,d=Date.now(),this.nthSequenceNumber(e,a))).next(V=>(s=V,m=Date.now(),this.removeTargets(e,s,n))).next(V=>(c=V,_=Date.now(),this.removeOrphanedDocuments(e,s))).next(V=>(E=Date.now(),As()<=Ve.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${V} documents in `+(E-_)+`ms
Total Duration: ${E-S}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:V})))}}function yE(i,e){return new gE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Go(s.mutation,a,Dn.empty(),dt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Se()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Se()){const a=Ai();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let d=$o();return c.forEach((m,_)=>{d=d.insert(m,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Ai();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Se()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,a){let c=pr();const d=Ko(),m=function(){return Ko()}();return n.forEach((_,E)=>{const S=s.get(E.key);a.has(E.key)&&(S===void 0||S.mutation instanceof Di)?c=c.insert(E.key,E):S!==void 0?(d.set(E.key,S.mutation.getFieldMask()),Go(S.mutation,E,S.mutation.getFieldMask(),dt.now())):d.set(E.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,c).next(_=>(_.forEach((E,S)=>d.set(E,S)),n.forEach((E,S)=>{var V;return m.set(E,new vE(S,(V=d.get(E))!==null&&V!==void 0?V:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Ko();let a=new Xe((d,m)=>d-m),c=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(_=>{const E=n.get(_);if(E===null)return;let S=s.get(_)||Dn.empty();S=m.applyToLocalView(E,S),s.set(_,S);const V=(a.get(m.batchId)||Se()).add(_);a=a.insert(m.batchId,V)})}).next(()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),E=_.key,S=_.value,V=Bm();S.forEach(U=>{if(!c.has(U)){const b=Wm(n.get(U),s.get(U));b!==null&&V.set(U,b),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(e,E,V))}return B.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):I0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):B.resolve(Ai());let m=-1,_=c;return d.next(E=>B.forEach(E,(S,V)=>(m<V.largestBatchId&&(m=V.largestBatchId),c.get(S)?B.resolve():this.remoteDocumentCache.getEntry(e,S).next(U=>{_=_.insert(S,U)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,_,E,Se())).next(S=>({batchId:m,changes:zm(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(s=>{let a=$o();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let d=$o();return this.indexManager.getCollectionParents(e,c).next(m=>B.forEach(m,_=>{const E=function(V,U){return new Jl(U,null,V.explicitOrderBy.slice(),V.filters.slice(),V.limit,V.limitType,V.startAt,V.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(S=>{S.forEach((V,U)=>{d=d.insert(V,U)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(d=>{c.forEach((_,E)=>{const S=E.getKey();d.get(S)===null&&(d=d.insert(S,Ot.newInvalidDocument(S)))});let m=$o();return d.forEach((_,E)=>{const S=c.get(_);S!==void 0&&Go(S.mutation,E,Dn.empty(),dt.now()),eu(n,E)&&(m=m.insert(_,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return B.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Hn(a.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:hE(a.bundledQuery),readTime:Hn(a.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.overlays=new Xe(pe.comparator),this.Er=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ai();return B.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),B.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const a=Ai(),c=n.length+1,d=new pe(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const _=m.getNext().value,E=_.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&_.largestBatchId>s&&a.set(_.getKey(),_)}return B.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Xe((E,S)=>E-S);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let S=c.get(E.largestBatchId);S===null&&(S=Ai(),c=c.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const m=Ai(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,S)=>m.set(E,S)),!(m.size()>=a)););return B.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new j0(n,s));let c=this.Er.get(n);c===void 0&&(c=Se(),this.Er.set(n,c)),this.Er.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.dr=new ft(vt.Ar),this.Rr=new ft(vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new vt(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new pe(new Qe([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new pe(new Qe([])),s=new vt(n,e),a=new vt(n,e+1);let c=Se();return this.Rr.forEachInRange([s,a],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new vt(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return pe.comparator(e.key,n.key)||Re(e.br,n.br)}static Vr(e,n){return Re(e.br,n.br)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new ft(vt.Ar)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new B0(c,n,s,a);this.mutationQueue.push(d);for(const m of a)this.vr=this.vr.add(new vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return B.resolve(d)}lookupMutationBatch(e,n){return B.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return B.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],d=>{const m=this.Cr(d.br);c.push(m)}),B.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ft(Re);return n.forEach(a=>{const c=new vt(a,0),d=new vt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{s=s.add(m.br)})}),B.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;pe.isDocumentKey(c)||(c=c.child(""));const d=new vt(new pe(c),0);let m=new ft(Re);return this.vr.forEachWhile(_=>{const E=_.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(_.br)),!0)},d),B.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Me(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return B.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new vt(n,0),a=this.vr.firstAfterOrEqual(s);return B.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.Nr=e,this.docs=function(){return new Xe(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,d=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let s=pr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Ot.newInvalidDocument(a))}),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=pr();const d=n.path,m=new pe(d.child("")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:E,value:{document:S}}=_.getNext();if(!d.isPrefixOf(E.path))break;E.path.length>d.length+1||t0(e0(S),s)<=0||(a.has(S.key)||eu(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return B.resolve(c)}getAllFromCollectionGroup(e,n,s,a){ge()}Lr(e,n){return B.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new RE(this)}getSize(e){return B.resolve(this.size)}}class RE extends _E{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),B.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.persistence=e,this.Br=new Vi(n=>wh(n),Th),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.kr=0,this.qr=new kh,this.targetCount=0,this.Qr=Ms.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),B.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ms(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Un(n),B.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Br.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),B.waitFor(c).next(()=>a)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),B.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Gl(0),this.Ur=!1,this.Ur=!0,this.Wr=new IE,this.referenceDelegate=e(this),this.Gr=new CE(this),this.indexManager=new dE,this.remoteDocumentCache=function(a){return new AE(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new cE(n),this.jr=new wE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new SE(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const a=new PE(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return B.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class PE extends r0{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Zr=new kh,this.Xr=null}static ei(e){return new Vh(e)}get ti(){if(this.Xr)return this.Xr;throw ge()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),B.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ti,s=>{const a=pe.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,ye.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return B.or([()=>B.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Hl{constructor(e,n){this.persistence=e,this.ri=new Vi(s=>o0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=yE(this,n)}static ei(e,n){return new Hl(e,n)}Hr(){}Jr(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return B.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?B.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,d=>this.ir(e,d,n).next(m=>{m||(s++,c.removeEntry(d,ye.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vl(e.data.value)),n}ir(e,n,s){return B.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return B.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Se(),a=Se();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Dh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return P_()?8:i0(R_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new kE;return this.ts(e,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,d,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(As()<=Ve.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),B.resolve()):(As()<=Ve.DEBUG&&ne("QueryEngine","Query:",Rs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(As()<=Ve.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):B.resolve())}Xi(e,n){if(Dp(n))return B.resolve(null);let s=qn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=oh(n,null,"F"),s=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Se(...c);return this.Zi.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(_=>{const E=this.rs(n,m);return this.ss(n,E,d,_.readTime)?this.Xi(e,oh(n,null,"F")):this.os(e,E,n,_)}))})))}es(e,n,s,a){return Dp(n)||a.isEqual(ye.min())?B.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const d=this.rs(n,c);return this.ss(n,d,s,a)?B.resolve(null):(As()<=Ve.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Rs(n)),this.os(e,d,n,Zv(a,-1)).next(m=>m))})}rs(e,n){let s=new ft(Fm(e));return n.forEach((a,c)=>{eu(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return As()<=Ve.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.Zi.getDocumentsMatchingQuery(e,n,Hr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Xe(Re),this.cs=new Vi(c=>wh(c),Th),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function NE(i,e,n,s){return new DE(i,e,n,s)}async function sg(i,e){const n=_e(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let _=Se();for(const E of a){d.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}for(const E of c){m.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}return n.localDocuments.getDocuments(s,_).next(E=>({Ts:E,removedBatchIds:d,addedBatchIds:m}))})})}function xE(i,e){const n=_e(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,_,E,S){const V=E.batch,U=V.keys();let b=B.resolve();return U.forEach(Y=>{b=b.next(()=>S.getEntry(_,Y)).next(X=>{const H=E.docVersions.get(Y);Me(H!==null),X.version.compareTo(H)<0&&(V.applyToRemoteDocument(X,E),X.isValidDocument()&&(X.setReadTime(E.commitVersion),S.addEntry(X)))})}),b.next(()=>m.mutationQueue.removeMutationBatch(_,V))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let _=Se();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(_=_.add(m.batch.mutations[E].key));return _}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function og(i){const e=_e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function LE(i,e){const n=_e(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((S,V)=>{const U=a.get(V);if(!U)return;m.push(n.Gr.removeMatchingKeys(c,S.removedDocuments,V).next(()=>n.Gr.addMatchingKeys(c,S.addedDocuments,V)));let b=U.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(V)!==null?b=b.withResumeToken(Rt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):S.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(S.resumeToken,s)),a=a.insert(V,b),function(X,H,ee){return X.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(U,b,S)&&m.push(n.Gr.updateTargetData(c,b))});let _=pr(),E=Se();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))}),m.push(OE(c,d,e.documentUpdates).next(S=>{_=S.Is,E=S.Es})),!s.isEqual(ye.min())){const S=n.Gr.getLastRemoteSnapshotVersion(c).next(V=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(S)}return B.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,E)).next(()=>_)}).then(c=>(n.us=a,c))}function OE(i,e,n){let s=Se(),a=Se();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let d=pr();return n.forEach((m,_)=>{const E=c.get(m);_.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),_.isNoDocument()&&_.version.isEqual(ye.min())?(e.removeEntry(m,_.readTime),d=d.insert(m,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),d=d.insert(m,_)):ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",_.version)}),{Is:d,Es:a}})}function ME(i,e){const n=_e(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function FE(i,e){const n=_e(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,B.resolve(a)):n.Gr.allocateTargetId(s).next(d=>(a=new Br(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function hh(i,e,n){const s=_e(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!$s(d))throw d;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function $p(i,e,n){const s=_e(i);let a=ye.min(),c=Se();return s.persistence.runTransaction("Execute query","readwrite",d=>function(_,E,S){const V=_e(_),U=V.cs.get(S);return U!==void 0?B.resolve(V.us.get(U)):V.Gr.getTargetData(E,S)}(s,d,qn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(d,m.targetId).next(_=>{c=_})}).next(()=>s._s.getDocumentsMatchingQuery(d,e,n?a:ye.min(),n?c:Se())).next(m=>(UE(s,A0(e),m),{documents:m,ds:c})))}function UE(i,e,n){let s=i.ls.get(e)||ye.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class qp{constructor(){this.activeTargetIds=D0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zE{constructor(){this._o=new qp,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new qp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl=null;function Wc(){return Pl===null?Pl=function(){return 268435456+Math.round(2147483648*Math.random())}():Pl++,"0x"+Pl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class $E extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,d){const m=Wc(),_=this.No(n,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${m}:`,_,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(E,c,d),this.Bo(n,_,E,a).then(S=>(ne("RestConnection",`Received RPC '${n}' ${m}: `,S),S),S=>{throw Ns("RestConnection",`RPC '${n}' ${m} failed with error: `,S,"url: ",_,"request:",a),S})}ko(n,s,a,c,d,m){return this.Oo(n,s,a,c,d)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,d)=>n[d]=c),a&&a.headers.forEach((c,d)=>n[d]=c)}No(n,s){const a=jE[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const c=Wc();return new Promise((d,m)=>{const _=new Em;_.setWithCredentials(!0),_.listenOnce(wm.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case kl.NO_ERROR:const S=_.getResponseJson();ne(xt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),d(S);break;case kl.TIMEOUT:ne(xt,`RPC '${e}' ${c} timed out`),m(new he(Q.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const V=_.getStatus();if(ne(xt,`RPC '${e}' ${c} failed with status:`,V,"response text:",_.getResponseText()),V>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const b=U==null?void 0:U.error;if(b&&b.status&&b.message){const Y=function(H){const ee=H.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ee)>=0?ee:Q.UNKNOWN}(b.status);m(new he(Y,b.message))}else m(new he(Q.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new he(Q.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ne(xt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);ne(xt,`RPC '${e}' ${c} sending request:`,a),_.send(n,"POST",E,s,15)})}qo(e,n,s){const a=Wc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Sm(),m=Im(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Lo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const S=c.join("");ne(xt,`Creating RPC '${e}' stream ${a}: ${S}`,_);const V=d.createWebChannel(S,_);let U=!1,b=!1;const Y=new bE({Eo:H=>{b?ne(xt,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(U||(ne(xt,`Opening RPC '${e}' stream ${a} transport.`),V.open(),U=!0),ne(xt,`RPC '${e}' stream ${a} sending:`,H),V.send(H))},Ao:()=>V.close()}),X=(H,ee,ae)=>{H.listen(ee,ue=>{try{ae(ue)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return X(V,bo.EventType.OPEN,()=>{b||(ne(xt,`RPC '${e}' stream ${a} transport opened.`),Y.So())}),X(V,bo.EventType.CLOSE,()=>{b||(b=!0,ne(xt,`RPC '${e}' stream ${a} transport closed`),Y.Do())}),X(V,bo.EventType.ERROR,H=>{b||(b=!0,Ns(xt,`RPC '${e}' stream ${a} transport errored:`,H),Y.Do(new he(Q.UNAVAILABLE,"The operation could not be completed")))}),X(V,bo.EventType.MESSAGE,H=>{var ee;if(!b){const ae=H.data[0];Me(!!ae);const ue=ae,Ee=(ue==null?void 0:ue.error)||((ee=ue[0])===null||ee===void 0?void 0:ee.error);if(Ee){ne(xt,`RPC '${e}' stream ${a} received error:`,Ee);const Je=Ee.status;let De=function(A){const P=st[A];if(P!==void 0)return Km(P)}(Je),k=Ee.message;De===void 0&&(De=Q.INTERNAL,k="Unknown error status: "+Je+" with message "+Ee.message),b=!0,Y.Do(new he(De,k)),V.close()}else ne(xt,`RPC '${e}' stream ${a} received:`,ae),Y.vo(ae)}}),X(m,Tm.STAT_EVENT,H=>{H.stat===th.PROXY?ne(xt,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===th.NOPROXY&&ne(xt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Y.bo()},0),Y}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i){return new X0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,s,a,c,d,m,_){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ag(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new he(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qE extends lg{constructor(e,n,s,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=Z0(this.serializer,e),s=function(c){if(!("targetChange"in c))return ye.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?ye.min():d.readTime?Hn(d.readTime):ye.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=ch(this.serializer),n.addTarget=function(c,d){let m;const _=d.target;if(m=sh(_)?{documents:nE(c,_)}:{query:rE(c,_).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Ym(c,d.resumeToken);const E=ah(c,d.expectedCount);E!==null&&(m.expectedCount=E)}else if(d.snapshotVersion.compareTo(ye.min())>0){m.readTime=ql(c,d.snapshotVersion.toTimestamp());const E=ah(c,d.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=sE(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.c_(n)}}class HE extends lg{constructor(e,n,s,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=tE(e.writeResults,e.commitTime),s=Hn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=ch(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>eE(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new he(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(e,lh(n,s),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Q.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(e,lh(n,s),a,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(Q.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class QE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(fr(n),this.C_=!1):ne("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{s.enqueueAndForget(async()=>{Ni(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(_){const E=_e(_);E.k_.add(4),await oa(E),E.K_.set("Unknown"),E.k_.delete(4),await su(E)}(this))})}),this.K_=new QE(s,a)}}async function su(i){if(Ni(i))for(const e of i.q_)await e(!0)}async function oa(i){for(const e of i.q_)await e(!1)}function ug(i,e){const n=_e(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Oh(n)?Lh(n):qs(n).s_()&&xh(n,e))}function Nh(i,e){const n=_e(i),s=qs(n);n.B_.delete(e),s.s_()&&cg(n,e),n.B_.size===0&&(s.s_()?s.a_():Ni(n)&&n.K_.set("Unknown"))}function xh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(i).V_(e)}function cg(i,e){i.U_.xe(e),qs(i).m_(e)}function Lh(i){i.U_=new W0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),qs(i).start(),i.K_.F_()}function Oh(i){return Ni(i)&&!qs(i).i_()&&i.B_.size>0}function Ni(i){return _e(i).k_.size===0}function hg(i){i.U_=void 0}async function GE(i){i.K_.set("Online")}async function XE(i){i.B_.forEach((e,n)=>{xh(i,e)})}async function YE(i,e){hg(i),Oh(i)?(i.K_.O_(e),Lh(i)):i.K_.set("Unknown")}async function JE(i,e,n){if(i.K_.set("Online"),e instanceof Xm&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wl(i,s)}else if(e instanceof xl?i.U_.$e(e):e instanceof Gm?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(ye.min()))try{const s=await og(i.localStore);n.compareTo(s)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.B_.get(E);S&&c.B_.set(E,S.withResumeToken(_.resumeToken,d))}}),m.targetMismatches.forEach((_,E)=>{const S=c.B_.get(_);if(!S)return;c.B_.set(_,S.withResumeToken(Rt.EMPTY_BYTE_STRING,S.snapshotVersion)),cg(c,_);const V=new Br(S.target,_,E,S.sequenceNumber);xh(c,V)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),await Wl(i,s)}}async function Wl(i,e,n){if(!$s(e))throw e;i.k_.add(1),await oa(i),i.K_.set("Offline"),n||(n=()=>og(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await su(i)})}function dg(i,e){return e().catch(n=>Wl(i,n,e))}async function ou(i){const e=_e(i),n=Gr(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;ZE(e);)try{const a=await ME(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,e1(e,a)}catch(a){await Wl(e,a)}fg(e)&&pg(e)}function ZE(i){return Ni(i)&&i.L_.length<10}function e1(i,e){i.L_.push(e);const n=Gr(i);n.s_()&&n.f_&&n.g_(e.mutations)}function fg(i){return Ni(i)&&!Gr(i).i_()&&i.L_.length>0}function pg(i){Gr(i).start()}async function t1(i){Gr(i).w_()}async function n1(i){const e=Gr(i);for(const n of i.L_)e.g_(n.mutations)}async function r1(i,e,n){const s=i.L_.shift(),a=Rh.from(s,e,n);await dg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await ou(i)}async function i1(i,e){e&&Gr(i).f_&&await async function(s,a){if(function(d){return $0(d)&&d!==Q.ABORTED}(a.code)){const c=s.L_.shift();Gr(s).__(),await dg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await ou(s)}}(i,e),fg(i)&&pg(i)}async function Wp(i,e){const n=_e(i);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=Ni(n);n.k_.add(3),await oa(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await su(n)}async function s1(i,e){const n=_e(i);e?(n.k_.delete(2),await su(n)):e||(n.k_.add(2),await oa(n),n.K_.set("Unknown"))}function qs(i){return i.W_||(i.W_=function(n,s,a){const c=_e(n);return c.b_(),new qE(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:GE.bind(null,i),mo:XE.bind(null,i),po:YE.bind(null,i),R_:JE.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Oh(i)?Lh(i):i.K_.set("Unknown")):(await i.W_.stop(),hg(i))})),i.W_}function Gr(i){return i.G_||(i.G_=function(n,s,a){const c=_e(n);return c.b_(),new HE(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:t1.bind(null,i),po:i1.bind(null,i),p_:n1.bind(null,i),y_:r1.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await ou(i)):(await i.G_.stop(),i.L_.length>0&&(ne("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const d=Date.now()+s,m=new Mh(e,n,d,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(i,e){if(fr("AsyncQueue",`${e}: ${i}`),$s(i))return new he(Q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static emptySet(e){return new Vs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||pe.comparator(n.key,s.key):(n,s)=>pe.comparator(n.key,s.key),this.keyedMap=$o(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.z_=new Xe(pe.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ge():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Fs{constructor(e,n,s,a,c,d,m,_,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Fs(e,n,Vs.emptySet(n),d,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class a1{constructor(){this.queries=Kp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=_e(n),c=a.queries;a.queries=Kp(),c.forEach((d,m)=>{for(const _ of m.J_)_.onError(s)})})(this,new he(Q.ABORTED,"Firestore shutting down"))}}function Kp(){return new Vi(i=>Mm(i),Zl)}async function l1(i,e){const n=_e(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new o1,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const m=Fh(d,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Uh(n)}async function u1(i,e){const n=_e(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const d=c.J_.indexOf(e);d>=0&&(c.J_.splice(d,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function c1(i,e){const n=_e(i);let s=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(a)&&(s=!0);d.H_=a}}s&&Uh(n)}function h1(i,e,n){const s=_e(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Uh(i){i.X_.forEach(e=>{e.next()})}var dh,Gp;(Gp=dh||(dh={})).na="default",Gp.Cache="cache";class d1{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Fs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==dh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.key=e}}class gg{constructor(e){this.key=e}}class f1{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Se(),this.mutatedKeys=Se(),this.Va=Fm(e),this.ma=new Vs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new Qp,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,m=!1;const _=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((S,V)=>{const U=a.get(S),b=eu(this.query,V)?V:null,Y=!!U&&this.mutatedKeys.has(U.key),X=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let H=!1;U&&b?U.data.isEqual(b.data)?Y!==X&&(s.track({type:3,doc:b}),H=!0):this.ya(U,b)||(s.track({type:2,doc:b}),H=!0,(_&&this.Va(b,_)>0||E&&this.Va(b,E)<0)&&(m=!0)):!U&&b?(s.track({type:0,doc:b}),H=!0):U&&!b&&(s.track({type:1,doc:U}),H=!0,(_||E)&&(m=!0)),H&&(b?(d=d.add(b),c=X?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{ma:d,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const d=e.pa.j_();d.sort((S,V)=>function(b,Y){const X=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return X(b)-X(Y)}(S.type,V.type)||this.Va(S.doc,V.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],_=this.Ra.size===0&&this.current&&!a?1:0,E=_!==this.Aa;return this.Aa=_,d.length!==0||E?{snapshot:new Fs(this.query,e.ma,c,d,e.mutatedKeys,_===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Qp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Se(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new gg(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new mg(s))}),n}va(e){this.da=e.ds,this.Ra=Se();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Fs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class p1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class m1{constructor(e){this.key=e,this.Fa=!1}}class g1{constructor(e,n,s,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new Vi(m=>Mm(m),Zl),this.Oa=new Map,this.Na=new Set,this.La=new Xe(pe.comparator),this.Ba=new Map,this.ka=new kh,this.qa={},this.Qa=new Map,this.Ka=Ms.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function y1(i,e,n=!0){const s=Tg(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await yg(s,e,n,!0),a}async function _1(i,e){const n=Tg(i);await yg(n,e,!0,!1)}async function yg(i,e,n,s){const a=await FE(i.localStore,qn(e)),c=a.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await v1(i,e,c,d==="current",a.resumeToken)),i.isPrimaryClient&&n&&ug(i.remoteStore,a),m}async function v1(i,e,n,s,a){i.Ua=(V,U,b)=>async function(X,H,ee,ae){let ue=H.view.ga(ee);ue.ss&&(ue=await $p(X.localStore,H.query,!1).then(({documents:k})=>H.view.ga(k,ue)));const Ee=ae&&ae.targetChanges.get(H.targetId),Je=ae&&ae.targetMismatches.get(H.targetId)!=null,De=H.view.applyChanges(ue,X.isPrimaryClient,Ee,Je);return Yp(X,H.targetId,De.ba),De.snapshot}(i,V,U,b);const c=await $p(i.localStore,e,!0),d=new f1(e,c.ds),m=d.ga(c.documents),_=sa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=d.applyChanges(m,i.isPrimaryClient,_);Yp(i,n,E.ba);const S=new p1(e,n,d);return i.xa.set(e,S),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),E.snapshot}async function E1(i,e,n){const s=_e(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(d=>!Zl(d,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await hh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Nh(s.remoteStore,a.targetId),fh(s,a.targetId)}).catch(bs)):(fh(s,a.targetId),await hh(s.localStore,a.targetId,!0))}async function w1(i,e){const n=_e(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(n.remoteStore,s.targetId))}async function T1(i,e,n){const s=k1(i);try{const a=await function(d,m){const _=_e(d),E=dt.now(),S=m.reduce((b,Y)=>b.add(Y.key),Se());let V,U;return _.persistence.runTransaction("Locally write mutations","readwrite",b=>{let Y=pr(),X=Se();return _.hs.getEntries(b,S).next(H=>{Y=H,Y.forEach((ee,ae)=>{ae.isValidDocument()||(X=X.add(ee))})}).next(()=>_.localDocuments.getOverlayedDocuments(b,Y)).next(H=>{V=H;const ee=[];for(const ae of m){const ue=U0(ae,V.get(ae.key).overlayedDocument);ue!=null&&ee.push(new Di(ae.key,ue,km(ue.value.mapValue),Nn.exists(!0)))}return _.mutationQueue.addMutationBatch(b,E,ee,m)}).next(H=>{U=H;const ee=H.applyToLocalDocumentSet(V,X);return _.documentOverlayCache.saveOverlays(b,H.batchId,ee)})}).then(()=>({batchId:U.batchId,changes:zm(V)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,m,_){let E=d.qa[d.currentUser.toKey()];E||(E=new Xe(Re)),E=E.insert(m,_),d.qa[d.currentUser.toKey()]=E}(s,a.batchId,n),await aa(s,a.changes),await ou(s.remoteStore)}catch(a){const c=Fh(a,"Failed to persist write");n.reject(c)}}async function _g(i,e){const n=_e(i);try{const s=await LE(n.localStore,e);e.targetChanges.forEach((a,c)=>{const d=n.Ba.get(c);d&&(Me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.Fa=!0:a.modifiedDocuments.size>0?Me(d.Fa):a.removedDocuments.size>0&&(Me(d.Fa),d.Fa=!1))}),await aa(n,s,e)}catch(s){await bs(s)}}function Xp(i,e,n){const s=_e(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,d)=>{const m=d.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(d,m){const _=_e(d);_.onlineState=m;let E=!1;_.queries.forEach((S,V)=>{for(const U of V.J_)U.ea(m)&&(E=!0)}),E&&Uh(_)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function I1(i,e,n){const s=_e(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),c=a&&a.key;if(c){let d=new Xe(pe.comparator);d=d.insert(c,Ot.newNoDocument(c,ye.min()));const m=Se().add(c),_=new ru(ye.min(),new Map,new Xe(Re),d,m);await _g(s,_),s.La=s.La.remove(c),s.Ba.delete(e),zh(s)}else await hh(s.localStore,e,!1).then(()=>fh(s,e,n)).catch(bs)}async function S1(i,e){const n=_e(i),s=e.batch.batchId;try{const a=await xE(n.localStore,e);Eg(n,s,null),vg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await aa(n,a)}catch(a){await bs(a)}}async function A1(i,e,n){const s=_e(i);try{const a=await function(d,m){const _=_e(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let S;return _.mutationQueue.lookupMutationBatch(E,m).next(V=>(Me(V!==null),S=V.keys(),_.mutationQueue.removeMutationBatch(E,V))).next(()=>_.mutationQueue.performConsistencyCheck(E)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(E,S,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,S)).next(()=>_.localDocuments.getDocuments(E,S))})}(s.localStore,e);Eg(s,e,n),vg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await aa(s,a)}catch(a){await bs(a)}}function vg(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function Eg(i,e,n){const s=_e(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function fh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||wg(i,s)})}function wg(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(Nh(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),zh(i))}function Yp(i,e,n){for(const s of n)s instanceof mg?(i.ka.addReference(s.key,e),R1(i,s)):s instanceof gg?(ne("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||wg(i,s.key)):ge()}function R1(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(ne("SyncEngine","New document in limbo: "+n),i.Na.add(s),zh(i))}function zh(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new pe(Qe.fromString(e)),s=i.Ka.next();i.Ba.set(s,new m1(n)),i.La=i.La.insert(n,s),ug(i.remoteStore,new Br(qn(Ih(n.path)),s,"TargetPurposeLimboResolution",Gl.oe))}}async function aa(i,e,n){const s=_e(i),a=[],c=[],d=[];s.xa.isEmpty()||(s.xa.forEach((m,_)=>{d.push(s.Ua(_,e,n).then(E=>{var S;if((E||n)&&s.isPrimaryClient){const V=E?!E.fromCache:(S=n==null?void 0:n.targetChanges.get(_.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(_.targetId,V?"current":"not-current")}if(E){a.push(E);const V=Dh.zi(_.targetId,E);c.push(V)}}))}),await Promise.all(d),s.Ma.R_(a),await async function(_,E){const S=_e(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",V=>B.forEach(E,U=>B.forEach(U.Wi,b=>S.persistence.referenceDelegate.addReference(V,U.targetId,b)).next(()=>B.forEach(U.Gi,b=>S.persistence.referenceDelegate.removeReference(V,U.targetId,b)))))}catch(V){if(!$s(V))throw V;ne("LocalStore","Failed to update sequence numbers: "+V)}for(const V of E){const U=V.targetId;if(!V.fromCache){const b=S.us.get(U),Y=b.snapshotVersion,X=b.withLastLimboFreeSnapshotVersion(Y);S.us=S.us.insert(U,X)}}}(s.localStore,c))}async function C1(i,e){const n=_e(i);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const s=await sg(n.localStore,e);n.currentUser=e,function(c,d){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new he(Q.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await aa(n,s.Ts)}}function P1(i,e){const n=_e(i),s=n.Ba.get(e);if(s&&s.Fa)return Se().add(s.key);{let a=Se();const c=n.Oa.get(e);if(!c)return a;for(const d of c){const m=n.xa.get(d);a=a.unionWith(m.view.fa)}return a}}function Tg(i){const e=_e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=_g.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I1.bind(null,e),e.Ma.R_=c1.bind(null,e.eventManager),e.Ma.Wa=h1.bind(null,e.eventManager),e}function k1(i){const e=_e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A1.bind(null,e),e}class Ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return NE(this.persistence,new VE,e.initialUser,this.serializer)}ja(e){return new ig(Vh.ei,this.serializer)}za(e){return new zE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ql.provider={build:()=>new Ql};class V1 extends Ql{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Me(this.persistence.referenceDelegate instanceof Hl);const s=this.persistence.referenceDelegate.garbageCollector;return new mE(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new ig(s=>Hl.ei(s,n),this.serializer)}}class ph{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Xp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C1.bind(null,this.syncEngine),await s1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a1}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),s=function(c){return new $E(c)}(e.databaseInfo);return function(c,d,m,_){return new WE(c,d,m,_)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,d,m){return new KE(s,a,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Xp(this.syncEngine,n,0),function(){return Hp.p()?new Hp:new BE}())}createSyncEngine(e,n){return function(a,c,d,m,_,E,S){const V=new g1(a,c,d,m,_,E);return S&&(V.$a=!0),V}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=_e(a);ne("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await oa(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ph.provider={build:()=>new ph};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Lt.UNAUTHENTICATED,this.clientId=Rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{ne("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Kc(i,e){i.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await sg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Jp(i,e){i.asyncQueue.verifyOperationInProgress();const n=await x1(i);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Wp(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Wp(e.remoteStore,a)),i._onlineComponents=e}async function x1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Ns("Error using user provided cache. Falling back to memory cache: "+n),await Kc(i,new Ql)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Kc(i,new V1(void 0));return i._offlineComponents}async function Ig(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Jp(i,i._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Jp(i,new ph))),i._onlineComponents}function L1(i){return Ig(i).then(e=>e.syncEngine)}async function Zp(i){const e=await Ig(i),n=e.eventManager;return n.onListen=y1.bind(null,e.syncEngine),n.onUnlisten=E1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w1.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(i,e,n){if(!n)throw new he(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function O1(i,e,n,s){if(e===!0&&s===!0)throw new he(Q.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function tm(i){if(!pe.isDocumentKey(i))throw new he(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nm(i){if(pe.isDocumentKey(i))throw new he(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ge()}function $r(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bh(i);throw new he(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new he(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new he(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new he(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class au{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new qv;switch(s.type){case"firstParty":return new Kv(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=em.get(n);s&&(ne("ComponentProvider","Removing Datastore"),em.delete(n),s.terminate())}(this),Promise.resolve()}}function M1(i,e,n,s={}){var a;const c=(i=$r(i,au))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),s.mockUserToken){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=Lt.MOCK_USER;else{m=A_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new he(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Lt(E)}i._authCredentials=new Hv(new Am(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new lu(this.firestore,e,this._query)}}class nn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class qr extends lu{constructor(e,n,s){super(e,n,Ih(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new pe(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function Rg(i,e,...n){if(i=Ds(i),Ag("collection","path",e),i instanceof au){const s=Qe.fromString(e,...n);return nm(s),new qr(i,null,s)}{if(!(i instanceof nn||i instanceof qr))throw new he(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return nm(s),new qr(i.firestore,null,s)}}function Ll(i,e,...n){if(i=Ds(i),arguments.length===1&&(e=Rm.newId()),Ag("doc","path",e),i instanceof au){const s=Qe.fromString(e,...n);return tm(s),new nn(i,null,new pe(s))}{if(!(i instanceof nn||i instanceof qr))throw new he(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return tm(s),new nn(i.firestore,i instanceof qr?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ag(this,"async_queue_retry"),this.fu=()=>{const s=Qc();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Ci;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!$s(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw fr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Mh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&ge()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function sm(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class Us extends au{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new im,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new im(e),this._firestoreClient=void 0,await e}}}function F1(i,e){const n=typeof i=="object"?i:Lv(),s=typeof i=="string"?i:"(default)",a=Vv(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=I_("firestore");c&&M1(a,...c)}return a}function Cg(i){if(i._terminated)throw new he(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||U1(i),i._firestoreClient}function U1(i){var e,n,s;const a=i._freezeSettings(),c=function(m,_,E,S){return new u0(m,_,E,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,Sg(S.experimentalLongPollingOptions),S.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new N1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(Rt.fromBase64String(e))}catch(n){throw new he(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=/^__.*__$/;class B1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}function kg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class qh{constructor(e,n,s,a,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Kl(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(kg(this.Mu)&&z1.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class j1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||iu(e)}$u(e,n,s,a=!1){return new qh({Mu:e,methodName:n,Ku:s,path:At.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vg(i){const e=i._freezeSettings(),n=iu(i._databaseId);return new j1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Dg(i,e,n,s,a,c={}){const d=i.$u(c.merge||c.mergeFields?2:0,e,n,a);Og("Data must be an object, but it was:",d,s);const m=xg(s,d);let _,E;if(c.merge)_=new Dn(d.fieldMask),E=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const V of c.mergeFields){const U=b1(e,V,n);if(!d.contains(U))throw new he(Q.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);q1(S,U)||S.push(U)}_=new Dn(S),E=d.fieldTransforms.filter(V=>_.covers(V.field))}else _=null,E=d.fieldTransforms;return new B1(new pn(m),_,E)}function Ng(i,e){if(Lg(i=Ds(i)))return Og("Unsupported field value:",e,i),xg(i,e);if(i instanceof Pg)return function(s,a){if(!kg(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let d=0;for(const m of s){let _=Ng(m,a.ku(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=Ds(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return N0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=dt.fromDate(s);return{timestampValue:ql(a.serializer,c)}}if(s instanceof dt){const c=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ql(a.serializer,c)}}if(s instanceof bh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zs)return{bytesValue:Ym(a.serializer,s._byteString)};if(s instanceof nn){const c=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw a.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ph(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof $h)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw m.qu("VectorValues must only contain numeric values.");return Sh(m.serializer,_)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Bh(s)}`)}(i,e)}function xg(i,e){const n={};return Cm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(i,(s,a)=>{const c=Ng(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function Lg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof dt||i instanceof bh||i instanceof zs||i instanceof nn||i instanceof Pg||i instanceof $h)}function Og(i,e,n){if(!Lg(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Bh(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function b1(i,e,n){if((e=Ds(e))instanceof jh)return e._internalPath;if(typeof e=="string")return Mg(i,e);throw Kl("Field path arguments must be of type string or ",i,!1,void 0,n)}const $1=new RegExp("[~\\*/\\[\\]]");function Mg(i,e,n){if(e.search($1)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new jh(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Kl(i,e,n,s,a){const c=s&&!s.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${s}`),d&&(_+=` in document ${a}`),_+=")"),new he(Q.INVALID_ARGUMENT,m+i+_)}function q1(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H1 extends Fg{data(){return super.data()}}function Ug(i,e){return typeof e=="string"?Mg(i,e):e instanceof jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q1{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ki(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(d=>nt(d.doubleValue));return new $h(c)}convertGeoPoint(e){return new bh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Yl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qe.fromString(e);Me(rg(s));const a=new ea(s.get(1),s.get(3)),c=new pe(s.popFirst(5));return a.isEqual(n)||fr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bg extends Fg{constructor(e,n,s,a,c,d){super(e,n,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ug("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ol extends Bg{data(e={}){return super.data(e)}}class K1{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ho(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ol(this._firestore,this._userDataWriter,s.key,s,new Ho(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map(m=>{const _=new Ol(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ho(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new Ol(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ho(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,S=-1;return m.type!==0&&(E=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),S=d.indexOf(m.doc.key)),{type:G1(m.type),doc:_,oldIndex:E,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}class jg extends Q1{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function X1(i,e,n){i=$r(i,nn);const s=$r(i.firestore,Us),a=zg(i.converter,e,n);return Hh(s,[Dg(Vg(s),"setDoc",i._key,a,i.converter!==null,n).toMutation(i._key,Nn.none())])}function om(i){return Hh($r(i.firestore,Us),[new Ah(i._key,Nn.none())])}function Y1(i,e){const n=$r(i.firestore,Us),s=Ll(i),a=zg(i.converter,e);return Hh(n,[Dg(Vg(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Nn.exists(!1))]).then(()=>s)}function am(i,...e){var n,s,a;i=Ds(i);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||sm(e[d])||(c=e[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(sm(e[d])){const V=e[d];e[d]=(n=V.next)===null||n===void 0?void 0:n.bind(V),e[d+1]=(s=V.error)===null||s===void 0?void 0:s.bind(V),e[d+2]=(a=V.complete)===null||a===void 0?void 0:a.bind(V)}let _,E,S;if(i instanceof nn)E=$r(i.firestore,Us),S=Ih(i._key.path),_={next:V=>{e[d]&&e[d](J1(E,i,V))},error:e[d+1],complete:e[d+2]};else{const V=$r(i,lu);E=$r(V.firestore,Us),S=V._query;const U=new jg(E);_={next:b=>{e[d]&&e[d](new K1(E,U,V,b))},error:e[d+1],complete:e[d+2]},W1(i._query)}return function(U,b,Y,X){const H=new D1(X),ee=new d1(b,H,Y);return U.asyncQueue.enqueueAndForget(async()=>l1(await Zp(U),ee)),()=>{H.eu(),U.asyncQueue.enqueueAndForget(async()=>u1(await Zp(U),ee))}}(Cg(E),S,m,_)}function Hh(i,e){return function(s,a){const c=new Ci;return s.asyncQueue.enqueueAndForget(async()=>T1(await L1(s),a,c)),c.promise}(Cg(i),e)}function J1(i,e,n){const s=n.docs.get(e._key),a=new jg(i);return new Bg(i,a,e._key,s,new Ho(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){js=a})(xv),Ul(new Xo("firestore",(s,{instanceIdentifier:a,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Us(new Wv(s.getProvider("auth-internal")),new Xv(s.getProvider("app-check-internal")),function(E,S){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new he(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(E.options.projectId,S)}(d,a),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),ks(Ep,"4.7.5",e),ks(Ep,"4.7.5","esm2017")})();var Z1="firebase",ew="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(Z1,ew,"app");const tw={apiKey:"AIzaSyCs8jX845KEXH9RTfiC8eB2ycnRzcP9mwk",authDomain:"react-note-d93ce.firebaseapp.com",projectId:"react-note-d93ce",storageBucket:"react-note-d93ce.firebasestorage.app",messagingSenderId:"370984367461",appId:"1:370984367461:web:36748a24c81496f355dd8c"},nw=gm(tw),bg=F1(nw),jo=Rg(bg,"tasks"),rw=Rg(bg,"users");function iw(){const[i,e]=Vn.useState({name:"",next:!1,id:""}),[n,s]=Vn.useState([{description:"",timeFrame:"",id:1}]),[a,c]=Vn.useState({description:"React",timeFrame:"Task Time",isEdit:!1,id:1}),[d,m]=Vn.useState(JSON.parse(window.localStorage.getItem("mode"))||!1);function _(){e(ee=>({...ee,next:!ee.next}))}function E(ee){e({...i,[ee.target.name]:ee.target.value})}async function S(ee){const ae=Ll(jo,ee);await om(ae)}async function V(){for(let ee=0;ee<(n==null?void 0:n.length);ee++){const ae=n[ee];if(ae.id){const ue=Ll(jo,ae.id);await om(ue)}}}function U(ee="id"){const ae=n.find(ue=>ue.id===ee);c(ae?ue=>({...ue,description:ae.description,timeFrame:ae.timeFrame,id:ae.id,isEdit:!ue.isEdit}):ue=>({...ue,isEdit:!ue.isEdit}))}async function b(){const ee={description:"NAME",timeFrame:"TIME"},ae=await Y1(jo,ee);c({...ee,isEdit:!0,id:ae.id})}function Y(ee){c(ae=>({...ae,[ee.target.name]:ee.target.value}))}async function X(){const ee=Ll(jo,a.id);await X1(ee,{description:a.description,timeFrame:a.timeFrame},{merge:!0}),U()}function H(){m(ee=>!ee)}return Vn.useEffect(()=>am(rw,ae=>{ae.docs.map(ue=>({...ue.data(),id:ue.id}))}),[]),Vn.useEffect(()=>am(jo,ae=>{const ue=ae.docs.map(Ee=>({...Ee.data(),id:Ee.id}));s(ue)}),[]),Vn.useEffect(()=>()=>{window.localStorage.setItem("mode",JSON.stringify(d))},[d]),Ie.jsxs(lm,{id:"App",className:d?"dark-mode":"",fluid:!0,children:[Ie.jsx(r_,{mode:d,toggleMode:H}),i.next?Ie.jsx(s_,{name:i.name,tasks:n,addTask:b,removeTask:S,removeAllTasks:V,toggleEdit:U}):Ie.jsx(n_,{user:i,handleChange:E,handleClick:_}),a.isEdit&&Ie.jsx(o_,{handleChange:Y,editedTask:a,tasks:n,editTask:X,handleCancel:()=>U()})]})}t_.createRoot(document.getElementById("root")).render(Ie.jsx(Vn.StrictMode,{children:Ie.jsx(iw,{})}));
